# Puppet
## Sumo Logic App For: Puppet
Puppet is a software configuration management tool. The Sumo Logic App for Puppet helps you monitor Puppet performance and events.
Docs Link: [Puppet](https://help.sumologic.com/?cid=80450)

## Searches

### Log Searches

- **Active Nodes**: from Dashboard: Installed Apps/Puppet/Puppet - Overview 
- **Activity by Environments**: from Dashboard: Installed Apps/Puppet/Puppet - Overview 
- **Average Catalog Application Time**: from Dashboard: Installed Apps/Puppet/Puppet - Node Puppet Runs Analysis 
- **Average Service Time**: from Dashboard: Installed Apps/Puppet/Puppet - Overview 
- **Average Service Time by Nodes**: from Dashboard: Installed Apps/Puppet/Puppet - Overview 
- **Error Rate**: from Dashboard: Installed Apps/Puppet/Puppet - Error Analysis 
- **Error Rate**: from Dashboard: Installed Apps/Puppet/Puppet - Overview 
- **Failed Resources**: from Dashboard: Installed Apps/Puppet/Puppet - Node Puppet Runs Analysis 
- **Highest Service Time by Nodes**: from Dashboard: Installed Apps/Puppet/Puppet - Overview 
- **Most Recent Errors**: from Dashboard: Installed Apps/Puppet/Puppet - Error Analysis 
- **Most Recent Warnings**: from Dashboard: Installed Apps/Puppet/Puppet - Error Analysis 
- **Node Puppet Run Activity**: from Dashboard: Installed Apps/Puppet/Puppet - Node Puppet Runs Analysis 
- **Node Puppet Runs**: from Dashboard: Installed Apps/Puppet/Puppet - Overview 
- **Node Requests Summary Over Time**: from Dashboard: Installed Apps/Puppet/Puppet - Overview 
- **Out of Sync Resources**: from Dashboard: Installed Apps/Puppet/Puppet - Node Puppet Runs Analysis 
- **Puppet Node Versions**: from Dashboard: Installed Apps/Puppet/Puppet - Overview 
- **Resource Status**: from Dashboard: Installed Apps/Puppet/Puppet - Node Puppet Runs Analysis 
- **Resources Changed**: from Dashboard: Installed Apps/Puppet/Puppet - Node Puppet Runs Analysis 
- **Resources Transition**: from Dashboard: Installed Apps/Puppet/Puppet - Node Puppet Runs Analysis 
- **Skipped Resources**: from Dashboard: Installed Apps/Puppet/Puppet - Node Puppet Runs Analysis 
- **Slowest Nodes by Catalog Application Time**: from Dashboard: Installed Apps/Puppet/Puppet - Node Puppet Runs Analysis 
- **Top 10 Errors**: from Dashboard: Installed Apps/Puppet/Puppet - Error Analysis 
- **Top 5 Nodes by Puppet Runs**: from Dashboard: Installed Apps/Puppet/Puppet - Node Puppet Runs Analysis 
- **Top Erroneous Nodes**: from Dashboard: Installed Apps/Puppet/Puppet - Error Analysis

### Metric Searches


## Search Table

|app\_topic|search\_name|type|origin|search|
|:--|:--|:--|:--|:--|
|Puppet|Active Nodes|Logs|Installed Apps/Puppet/Puppet - Overview|\_sourceCategory={{AccessLogsDataSource}} <br />\| parse regex "^(?\<src\_ip\>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})"<br />\| count\_distinct(src\_ip) |
|Puppet|Activity by Environments|Logs|Installed Apps/Puppet/Puppet - Overview|\_sourceCategory={{AccessLogsDataSource}} <br />\| parse regex "(?\<dummy\>environment=)(?\<environment\>\\S+?)&"<br />\| count by environment<br />|
|Puppet|Average Catalog Application Time|Logs|Installed Apps/Puppet/Puppet - Node Puppet Runs Analysis|\_sourceCategory={{ReportLogsDataSource}}  <br />\| parse"\\"environment\\":\\"\*\\"" as runenvironment<br />\| where runenvironment matches "{{Environment}}"<br />\| parse regex "(?:Applied\|Finished)\\s(?:catalog\|catalog\\srun)\\sin\\s(?\<processing\_time\>.\*?)\\s.\*" <br />\| timeslice 1h<br />\| avg(processing\_time) as avg\_time by \_timeslice|
|Puppet|Average Service Time|Logs|Installed Apps/Puppet/Puppet - Overview|\_sourceCategory={{ ServerLogsDataSource}} <br />AND "Puppet Compiled catalog for" <br />\| parse "Puppet Compiled catalog for \* in environment \* in \* seconds" as client\_name,runenvironment,seconds\_taken <br />\| timeslice 1h<br />\| avg(seconds\_taken) as avg\_seconds by \_timeslice<br />\| compare with timeshift 1d 7|
|Puppet|Average Service Time by Nodes|Logs|Installed Apps/Puppet/Puppet - Overview|\_sourceCategory={{ ServerLogsDataSource}}  and "Puppet Compiled catalog for" <br />\| parse "Puppet Compiled catalog for \* in environment \* in \* seconds" as client\_name,runenvironment,seconds\_taken <br />\| avg(seconds\_taken) as avg\_seconds by client\_name<br />|
|Puppet|Error Rate|Logs|Installed Apps/Puppet/Puppet - Error Analysis|\_sourceCategory={{ ServerLogsDataSource}}  and " ERROR "<br />\| timeslice 1h<br />\| count by \_timeslice|
|Puppet|Error Rate|Logs|Installed Apps/Puppet/Puppet - Overview|\_sourceCategory={{ ServerLogsDataSource}}  and " ERROR "<br />\| timeslice 1h<br />\| count by \_timeslice|
|Puppet|Failed Resources|Logs|Installed Apps/Puppet/Puppet - Node Puppet Runs Analysis|\_sourceCategory={{ReportLogsDataSource}} <br />\| parse"\\"environment\\":\\"\*\\"" as runenvironment<br />\| where runenvironment matches "{{Environment}}"<br />\| parse "\\"resources\\":{\\"name\\":\\"resources\\",\\"label\\":\\"Resources\\",\\"values\\":[[\\"total\\",\\"Total\\",\*],[\\"skipped\\",\\"Skipped\\",\*],[\\"failed\\",\\"Failed\\",\*],[\\"failed\_to\_restart\\",\\"Failed to restart\\",\*],[\\"restarted\\",\\"Restarted\\",\*],[\\"changed\\",\\"Changed\\",\*],[\\"out\_of\_sync\\",\\"Out of sync\\",\*],[\\"scheduled\\",\\"Scheduled\\",\*],[\\"corrective\_change\\",\\"Corrective change\\",\*]]" as total\_res,skipped,failed,failed\_to\_restart,restarted,changed,out\_of\_sync,scheduled,corrective\_change<br />\| parse "resource\_list\\":\\"\*\\"}" as resourcelist<br />\| sum(total\_res) as total\_resources, sum(failed) as failed\_resources<br />\| failed\_resources/total\_resources\*100 as failed\_res\_pct<br />\| fields failed\_res\_pct|
|Puppet|Highest Service Time by Nodes|Logs|Installed Apps/Puppet/Puppet - Overview|\_sourceCategory={{ ServerLogsDataSource}}  and "Puppet Compiled catalog for" <br />\| parse "Puppet Compiled catalog for \* in environment \* in \* seconds" as node\_name,runenvironment,seconds\_taken<br />\| where runenvironment matches "\*"<br />\| number(seconds\_taken)<br />\| max(seconds\_taken), min(seconds\_taken), pct(seconds\_taken, 25,50,75) by node\_name|
|Puppet|Most Recent Errors|Logs|Installed Apps/Puppet/Puppet - Error Analysis|\_sourceCategory={{ ServerLogsDataSource}}  and " ERROR "<br />\| parse regex "\\sERROR\\s.\*\\]\\s\\[.\*?\\]\\s(?\<err\_msg\>.\*)\$"<br />\| timeslice 1s<br />\| count as eventCount by \_timeslice, err\_msg<br />\| sort by \_timeslice<br />\| limit 10<br />\| fields -eventCount<br />|
|Puppet|Most Recent Warnings|Logs|Installed Apps/Puppet/Puppet - Error Analysis|\_sourceCategory={{ ServerLogsDataSource}}  and " WARN "<br />\| parse regex "\\sWARN\\s.\*\\]\\s\\[.\*?\\]\\s(?\<warning\>.\*)\$"<br />\| timeslice 1s<br />\| count as eventCount by \_timeslice, warning<br />\| sort by \_timeslice<br />\| limit 10<br />\| fields -eventCount<br />|
|Puppet|Node Puppet Run Activity|Logs|Installed Apps/Puppet/Puppet - Node Puppet Runs Analysis|\_sourceCategory={{ReportLogsDataSource}} <br />\| parse"\\"environment\\":\\"\*\\"" as runenvironment<br />\| where runenvironment matches "{{Environment}}"<br />\| parse "\\"puppet\_version\\":\\"\*\\",\\"status\\":\\"\*\\"" as puppet\_version,status<br />\| timeslice 1h<br />\| count(status) by \_timeslice,status<br />\| fillmissing timeslice(1h) in \_timeslice, values("failed","changed", "unchanged") in status <br />\| transpose row \_timeslice column status|
|Puppet|Node Puppet Runs|Logs|Installed Apps/Puppet/Puppet - Overview|\_sourceCategory={{ ServerLogsDataSource}}  and "Puppet Compiled catalog for" <br />\| timeslice 1d<br />\| count by \_timeslice|
|Puppet|Node Requests Summary Over Time|Logs|Installed Apps/Puppet/Puppet - Overview|\_sourceCategory={{AccessLogsDataSource}} <br />\| parse regex "^(?\<src\_ip\>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})" nodrop<br />\| parse regex "(?\<method\>[A-Z]+)\\s(?\<url\>\\S+)\\sHTTP/[\\d\\.]+\\"\\s(?\<status\_code\>\\d+)\\s(?\<size\>[\\d-]+)\\s\\"(?\<referrer\>.\*?)\\"\\s\\"(?\<user\_agent\>.+?)\\".\*"<br />\| if(status\_code matches "2\*", 1, 0) as successes <br />\| if(status\_code matches "3\*", 1, 0) as redirects<br />\| if(status\_code matches "4\*", 1, 0) as client\_errors <br />\| if(status\_code matches "5\*", 1, 0) as server\_errors <br />\| timeslice by 1h<br />\| sum(successes) as successes, sum(redirects) as redirects, sum(client\_errors) as client\_errors, sum(server\_errors) as server\_errors by \_timeslice|
|Puppet|Out of Sync Resources|Logs|Installed Apps/Puppet/Puppet - Node Puppet Runs Analysis|\_sourceCategory={{ReportLogsDataSource}} <br />\| parse"\\"environment\\":\\"\*\\"" as runenvironment<br />\| where runenvironment matches "{{Environment}}"<br />\| parse "\\"resources\\":{\\"name\\":\\"resources\\",\\"label\\":\\"Resources\\",\\"values\\":[[\\"total\\",\\"Total\\",\*],[\\"skipped\\",\\"Skipped\\",\*],[\\"failed\\",\\"Failed\\",\*],[\\"failed\_to\_restart\\",\\"Failed to restart\\",\*],[\\"restarted\\",\\"Restarted\\",\*],[\\"changed\\",\\"Changed\\",\*],[\\"out\_of\_sync\\",\\"Out of sync\\",\*],[\\"scheduled\\",\\"Scheduled\\",\*],[\\"corrective\_change\\",\\"Corrective change\\",\*]]" as total\_res,skipped,failed,failed\_to\_restart,restarted,changed,out\_of\_sync,scheduled,corrective\_change<br />\| parse "resource\_list\\":\\"\*\\"}" as resourcelist<br />\| sum(total\_res) as total\_resources, sum(out\_of\_sync) as out\_of\_sync<br />\| out\_of\_sync/total\_resources\*100 as out\_of\_sync\_pct<br />\| fields out\_of\_sync\_pct|
|Puppet|Puppet Node Versions|Logs|Installed Apps/Puppet/Puppet - Overview|\_sourceCategory={{AccessLogsDataSource}} <br />\| parse regex "(?\<method\>[A-Z]+)\\s(?\<url\>\\S+)\\sHTTP/[\\d\\.]+\\"\\s(?\<status\_code\>\\d+)\\s(?\<size\>[\\d-]+)\\s\\"(?\<referrer\>.\*?)\\"\\s\\"(?\<puppet\_version\_prefix\>Puppet/)(?\<puppet\_version\>.\*?)\\s.\*"<br />\| count by puppet\_version<br />|
|Puppet|Resource Status|Logs|Installed Apps/Puppet/Puppet - Node Puppet Runs Analysis|\_sourceCategory={{ReportLogsDataSource}} <br />AND "\\"resource\_type\\":"<br />\| parse "\\"environment\\":\\"\*\\"" as environment<br />\| where  environment matches "{{Environment}}"<br />\| parse "\\"title\\":\\"\*\\"\*\\"resource\_type\\":\\"\*\\"\*\\"failed\\":\*," as resource\_name,text1,resource\_type,text2,failure\_status<br />\| where resource\_type matches "{{ResourceType}}"<br />\| timeslice 1s<br />\| count by \_timeslice,resource\_name, text1, resource\_type, text2, failure\_status<br />\| limit 10<br />\| fields -text1<br />\| fields -text2<br />\| fields -\_count|
|Puppet|Resources Changed|Logs|Installed Apps/Puppet/Puppet - Node Puppet Runs Analysis|\_sourceCategory={{ReportLogsDataSource}} <br />\| parse"\\"environment\\":\\"\*\\"" as runenvironment<br />\| where runenvironment matches "{{Environment}}"<br />\| parse "\\"resources\\":{\\"name\\":\\"resources\\",\\"label\\":\\"Resources\\",\\"values\\":[[\\"total\\",\\"Total\\",\*],[\\"skipped\\",\\"Skipped\\",\*],[\\"failed\\",\\"Failed\\",\*],[\\"failed\_to\_restart\\",\\"Failed to restart\\",\*],[\\"restarted\\",\\"Restarted\\",\*],[\\"changed\\",\\"Changed\\",\*],[\\"out\_of\_sync\\",\\"Out of sync\\",\*],[\\"scheduled\\",\\"Scheduled\\",\*],[\\"corrective\_change\\",\\"Corrective change\\",\*]]" as total\_res,skipped,failed,failed\_to\_restart,restarted,changed,out\_of\_sync,scheduled,corrective\_change<br />\| parse "resource\_list\\":\\"\*\\"}" as resourcelist<br />\| sum(total\_res) as total\_resources, sum(changed) as changed\_resources<br />\| changed\_resources/total\_resources\*100 as changes\_res\_pct<br />\| fields changes\_res\_pct|
|Puppet|Resources Transition|Logs|Installed Apps/Puppet/Puppet - Node Puppet Runs Analysis|\_sourceCategory={{ReportLogsDataSource}} <br />\| parse"\\"environment\\":\\"\*\\"" as runenvironment<br />\| where runenvironment matches "{{Environment}}"<br />\| parse "\\"resources\\":{\\"name\\":\\"resources\\",\\"label\\":\\"Resources\\",\\"values\\":[[\\"total\\",\\"Total\\",\*],[\\"skipped\\",\\"Skipped\\",\*],[\\"failed\\",\\"Failed\\",\*],[\\"failed\_to\_restart\\",\\"Failed to restart\\",\*],[\\"restarted\\",\\"Restarted\\",\*],[\\"changed\\",\\"Changed\\",\*],[\\"out\_of\_sync\\",\\"Out of sync\\",\*],[\\"scheduled\\",\\"Scheduled\\",\*],[\\"corrective\_change\\",\\"Corrective change\\",\*]]" as total\_res,skipped,failed,failed\_to\_restart,restarted,changed,out\_of\_sync,scheduled,corrective\_change<br />\| parse "resource\_list\\":\\"\*\\"}" as resourcelist<br />\| timeslice 1h<br />\| sum(changed) as changed\_resources, sum(failed) as failed\_resources, sum(out\_of\_sync) as out\_of\_sync, sum(skipped) as skipped\_resources,sum(restarted) as restarted\_resources by \_timeslice|
|Puppet|Skipped Resources|Logs|Installed Apps/Puppet/Puppet - Node Puppet Runs Analysis|\_sourceCategory={{ReportLogsDataSource}} <br />\| parse"\\"environment\\":\\"\*\\"" as runenvironment<br />\| where runenvironment matches "{{Environment}}"<br />\| parse "\\"resources\\":{\\"name\\":\\"resources\\",\\"label\\":\\"Resources\\",\\"values\\":[[\\"total\\",\\"Total\\",\*],[\\"skipped\\",\\"Skipped\\",\*],[\\"failed\\",\\"Failed\\",\*],[\\"failed\_to\_restart\\",\\"Failed to restart\\",\*],[\\"restarted\\",\\"Restarted\\",\*],[\\"changed\\",\\"Changed\\",\*],[\\"out\_of\_sync\\",\\"Out of sync\\",\*],[\\"scheduled\\",\\"Scheduled\\",\*],[\\"corrective\_change\\",\\"Corrective change\\",\*]]" as total\_res,skipped,failed,failed\_to\_restart,restarted,changed,out\_of\_sync,scheduled,corrective\_change<br />\| parse "resource\_list\\":\\"\*\\"}" as resourcelist<br />\| sum(total\_res) as total\_resources, sum(skipped) as skipped\_resources<br />\| skipped\_resources/total\_resources\*100 as skipped\_res\_pct<br />\| fields skipped\_res\_pct|
|Puppet|Slowest Nodes by Catalog Application Time|Logs|Installed Apps/Puppet/Puppet - Node Puppet Runs Analysis|\_sourceCategory={{ReportLogsDataSource}} <br />\| parse"\\"environment\\":\\"\*\\"" as runenvironment<br />\| where runenvironment matches "{{Environment}}"<br />\| parse "\\"host\\":\\"\*\\"" as node<br />\| parse regex "(?:Applied\|Finished)\\s(?:catalog\|catalog\\srun)\\sin\\s(?\<processing\_time\>.\*?)\\s.\*" <br />\| avg(processing\_time) as avg\_process\_time by node <br />\| sort by avg\_process\_time<br />\| limit 10|
|Puppet|Top 10 Errors|Logs|Installed Apps/Puppet/Puppet - Error Analysis|\_sourceCategory={{ ServerLogsDataSource}}  and " ERROR "<br />\| parse regex "\\sERROR\\s.\*\\]\\s\\[.\*?\\]\\s(?\<err\_msg\>.\*)\$"<br />\| count by err\_msg<br />\| sort by \_count<br />\| limit 10|
|Puppet|Top 5 Nodes by Puppet Runs|Logs|Installed Apps/Puppet/Puppet - Node Puppet Runs Analysis|\_sourceCategory={{ReportLogsDataSource}} <br />\| parse"\\"environment\\":\\"\*\\"" as runenvironment<br />\| where runenvironment matches "{{Environment}}"<br />\| parse "\\"host\\":\\"\*\\"" as node<br />\| count\_frequent node<br />\| limit 5|
|Puppet|Top Erroneous Nodes|Logs|Installed Apps/Puppet/Puppet - Error Analysis|\_sourceCategory={{ ServerLogsDataSource}}  and " ERROR " and " on node "<br />\| parse regex "\\son node\\s(?\<node\_name\>.\*)\$"<br />\| count by node\_name<br />\| sort by \_count<br />\| limit 10<br />|

