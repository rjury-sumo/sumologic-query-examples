# Couchbase - OpenTelemetry

## Searches

### Log Searches

- **Add/Remove Node Events**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - Events 
- **Average Latency of All HTTP Requests**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - HTTP Access 
- **Average Latency of All HTTP Requests**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - Overview 
- **Bucket Selected Events**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - Events 
- **Buckets Not Ready**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - Errors 
- **Create/Delete Bucket Events**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - Events 
- **Error Queries**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - Errors 
- **Group Events**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - Events 
- **HTTP Method**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - HTTP Access 
- **HTTP Response Code**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - Overview 
- **HTTP Response Code**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - HTTP Access 
- **Last 10 Error Queries**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - Overview 
- **Last 10 Logs for HTTP Access**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - HTTP Access 
- **Last 100 Error Logs**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - Overview 
- **Last 100 Error Logs**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - Errors 
- **Login Failure on Management Portal**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - Events 
- **Login Success on Management Portal**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - Events 
- **Node Down**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - Errors 
- **Nodes Not Respond**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - Errors 
- **Rebalance Events**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - Events 
- **Top 10 client IP addresses**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - HTTP Access 
- **Top 10 User Agent Accessed**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - HTTP Access 
- **Top 10 Username Accessed**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - HTTP Access 
- **Top URLs with 4XX response codes**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - HTTP Access 
- **Top URLs with 5XX response codes**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - HTTP Access 
- **URLs Experiencing with 5XX Response Code**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - Overview 
- **User Events**: from Dashboard: Installed Apps/Couchbase - OpenTelemetry/Couchbase - Events

### Metric Searches


## Search Table

|app\_topic|search\_name|type|origin|search|
|:--|:--|:--|:--|:--|
|Couchbase - OpenTelemetry|Add/Remove Node Events|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - Events| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase" "node"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| json "name" as event\_name<br />\| where event\_name matches "\*node\*"<br />\| json "timestamp" as time<br />\| json "description" as description \| json "hostname" as node\_name<br />\| count by time,event\_name,node\_name,description <br />\| sort by time<br />\| limit 100<br />\|fields time,event\_name,node\_name,description|
|Couchbase - OpenTelemetry|Average Latency of All HTTP Requests|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - HTTP Access| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| parse regex "(?\<src\_ip\>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\s+\\-\\s+(?\<username\>\\S+)\\s+\\[(?\<time\>.+)\\]\\s+\\"(?:(?\<method\>\\w+)\\s+(?\<path\>\\S+)\\sHTTP\\/1.1)\\"\\s+(?\<code\>\\d+)\\s(?\<bytes\>\\d+)\\s(?\<origin\_url\>\\S+) \\"(?\<agent\>.+)\\"\\s(?\<latency\>\\d+)"<br />\| avg(latency)|
|Couchbase - OpenTelemetry|Average Latency of All HTTP Requests|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - Overview| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| parse regex "(?\<src\_ip\>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\s+\\-\\s+(?\<username\>\\S+)\\s+\\[(?\<time\>.+)\\]\\s+\\"(?:(?\<method\>\\w+)\\s+(?\<path\>\\S+)\\sHTTP\\/1.1)\\"\\s+(?\<code\>\\d+)\\s(?\<bytes\>\\d+)\\s(?\<origin\_url\>\\S+) \\"(?\<agent\>.+)\\"\\s(?\<latency\>\\d+)"<br />\| avg(latency)|
|Couchbase - OpenTelemetry|Bucket Selected Events|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - Events| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase" "select bucket"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| json "name" as event\_name<br />\| where event\_name matches "select bucket"<br />\| json "bucket"<br />\| count as count by bucket|
|Couchbase - OpenTelemetry|Buckets Not Ready|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - Errors| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase" "buckets became not ready on node" "error"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\|replace (\_raw,/\\s+/," ") as \_raw<br />\| parse regex "\\'\\S+@(?\<node\>\\S+)\\'\\:\\s+\\[(?\<buckets\>.+)\\]," \| parse regex field=buckets "\\"(?\<bucket\>[^,]+)\\"" multi<br />\| parse regex "ns\_server:error,(?\<time\>\\S+)," \| \_raw as msg<br />\| count by time,bucket,node,msg  \|sort by time\| limit 100 \| fields time,bucket,node,msg<br />|
|Couchbase - OpenTelemetry|Create/Delete Bucket Events|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - Events| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase" "bucket"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| json "name" as event\_name<br />\| where event\_name matches "\*bucket\*"<br />\| json "timestamp" as time<br />\| json "description" as description<br />\| json "bucket\_name" as bucket\_name<br />\| json "real\_userid.user" as action\_by\_user<br />\| count by time,event\_name,description,bucket\_name,action\_by\_user<br />\| sort by time<br />\| limit 100 <br />\|fields time,event\_name,description,bucket\_name,action\_by\_user |
|Couchbase - OpenTelemetry|Error Queries|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - Errors| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase" ("ERROR" or "Error")<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| parse regex "\_time=(?\<time\>\\S+)"<br />\| parse regex "\_msg=(?\<msg\>.+)"<br />\| parse regex field=msg "Keyspace\\s\\w+:(?\<bucket\>.+)\\."<br />\| parse regex field=msg "Failed to perform (?\<method\>\\w+)"<br />\|count by time,bucket,method,msg<br />\| sort by time<br />\| fields time,bucket,method,msg<br />\| limit 100<br />|
|Couchbase - OpenTelemetry|Group Events|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - Events| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase" "group"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| json "name" as event\_name<br />\| where event\_name matches "\*group\*"<br />\| where event\_name matches /set user group\|delete user group/<br />\| json "timestamp" as time<br />\| json "description" as description<br />\| json "group\_name" as group\_name<br />\| json "real\_userid.user" as action\_by\_user<br />\| count by time,event\_name,description,group\_name,action\_by\_user<br />\| sort by time<br />\| limit 100 <br />\|fields time,event\_name,description,group\_name,action\_by\_user |
|Couchbase - OpenTelemetry|HTTP Method|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - HTTP Access| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| parse regex "(?\<src\_ip\>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\s+\\-\\s+(?\<username\>\\S+)\\s+\\[(?\<time\>.+)\\]\\s+\\"(?:(?\<method\>\\w+)\\s+(?\<path\>\\S+)\\sHTTP\\/1.1)\\"\\s+(?\<code\>\\d+)\\s(?\<bytes\>\\d+)\\s(?\<origin\_url\>\\S+) \\"(?\<agent\>.+)\\"\\s(?\<latency\>\\d+)"<br />\| count by method|
|Couchbase - OpenTelemetry|HTTP Response Code|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - Overview| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| parse regex "(?\<src\_ip\>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\s+\\-\\s+(?\<username\>\\S+)\\s+\\[(?\<time\>.+)\\]\\s+\\"(?:(?\<method\>\\w+)\\s+(?\<path\>\\S+)\\sHTTP\\/1.1)\\"\\s+(?\<code\>\\d+)\\s(?\<bytes\>\\d+)\\s(?\<origin\_url\>\\S+) \\"(?\<agent\>.+)\\"\\s(?\<latency\>\\d+)"<br />\| count by code|
|Couchbase - OpenTelemetry|HTTP Response Code|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - HTTP Access| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| parse regex "(?\<src\_ip\>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\s+\\-\\s+(?\<username\>\\S+)\\s+\\[(?\<time\>.+)\\]\\s+\\"(?:(?\<method\>\\w+)\\s+(?\<path\>\\S+)\\sHTTP\\/1.1)\\"\\s+(?\<code\>\\d+)\\s(?\<bytes\>\\d+)\\s(?\<origin\_url\>\\S+) \\"(?\<agent\>.+)\\"\\s(?\<latency\>\\d+)"<br />\| count by code|
|Couchbase - OpenTelemetry|Last 10 Error Queries|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - Overview| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase" ("ERROR" or "Error")<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| parse regex "\_time=(?\<time\>\\S+)"<br />\| parse regex "\_msg=(?\<msg\>.+)"<br />\| parse regex field=msg "Keyspace\\s\\w+:(?\<bucket\>.+)\\."<br />\|count by time,bucket,msg<br />\| sort by time<br />\| limit 10<br />\| fields time,bucket,msg<br />|
|Couchbase - OpenTelemetry|Last 10 Logs for HTTP Access|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - HTTP Access| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase" <br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| parse regex "(?\<src\_ip\>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\s+\\-\\s+(?\<username\>\\S+)\\s+\\[(?\<time\>.+)\\]\\s+\\"(?:(?\<method\>\\w+)\\s+(?\<path\>\\S+)\\sHTTP\\/1.1)\\"\\s+(?\<code\>\\d+)\\s(?\<bytes\>\\d+)\\s(?\<origin\_url\>\\S+) \\"(?\<agent\>.+)\\"\\s(?\<latency\>\\d+)" \|\_raw as message<br />\| count as count by time,message \| sort by time,count \| limit 10\| fields time,message|
|Couchbase - OpenTelemetry|Last 100 Error Logs|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - Overview| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase" "ns\_server:error" <br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\|replace (\_raw,/\\s+/," ") as \_raw<br />\| parse regex "ns\_server:error,(?\<time\>\\S+),"\|\_raw as msg  \| count by time,msg \| sort by time \| limit 100\| fields time,msg<br />|
|Couchbase - OpenTelemetry|Last 100 Error Logs|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - Errors| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase" "ns\_server:error" <br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\|replace (\_raw,/\\s+/," ") as \_raw<br />\| parse regex "ns\_server:error,(?\<time\>\\S+),"\|\_raw as msg  \| count by time,msg \| sort by time \| limit 100\| fields time,msg<br />|
|Couchbase - OpenTelemetry|Login Failure on Management Portal|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - Events| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase" "login failure"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| json "name" as event\_name<br />\| where event\_name="login failure"<br />\| json "remote.ip" as client\_ip <br />\| json "local.ip" as couchbase\_server<br />\| count as count by client\_ip,couchbase\_server \| sort by count|
|Couchbase - OpenTelemetry|Login Success on Management Portal|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - Events| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase" "login success"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| json "name" as event\_name<br />\| where event\_name="login success"<br />\| json "remote.ip" as client\_ip <br />\| json "local.ip" as couchbase\_server<br />\| json "real\_userid.user" as user<br />\| count as count by user,client\_ip,couchbase\_server \| sort by count|
|Couchbase - OpenTelemetry|Node Down|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - Errors| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase" "error" "nodedown"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\|replace (\_raw,/\\s+/," ") as \_raw<br />\|parse regex "nodedown,\\s'\\S+@(?\<node\>\\S+)\\'"<br />\| parse regex "ns\_server:error,(?\<time\>\\S+),"\|\_raw as msg \| count by time,node,msg\| sort by time \| limit 100 \| fields time,node,msg<br />|
|Couchbase - OpenTelemetry|Nodes Not Respond|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - Errors| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase" "error" "Some nodes didn't respond" <br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\|replace (\_raw,/\\s+/," ") as \_raw<br />\| parse regex "stats:error,(?\<time\>\\S+),"<br />\| parse regex "Some nodes didn't respond: \\[(?\<temp\_nodes\>.+)\\]" \| parse regex field=temp\_nodes "\\'(?\<node\_temp\>[^,]+)\\'" multi \| parse regex field=node\_temp "@(?\<node\>.+)"\| \_raw as msg \| count by time,node,msg\|sort by time\| limit 100\|fields time,node,msg |
|Couchbase - OpenTelemetry|Rebalance Events|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - Events| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase" "rebalance"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| json "name" as event\_name<br />\| where event\_name matches "\*rebalance\*"<br />\| json "timestamp" as time<br />\| json "description" as description<br />\| count by time,event\_name,description \| sort by time\| limit 100<br />\|fields time,event\_name,description|
|Couchbase - OpenTelemetry|Top 10 client IP addresses|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - HTTP Access| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| parse regex "(?\<src\_ip\>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\s+\\-\\s+(?\<username\>\\S+)\\s+\\[(?\<time\>.+)\\]\\s+\\"(?:(?\<method\>\\w+)\\s+(?\<path\>\\S+)\\sHTTP\\/1.1)\\"\\s+(?\<code\>\\d+)\\s(?\<bytes\>\\d+)\\s(?\<origin\_url\>\\S+) \\"(?\<agent\>.+)\\"\\s(?\<latency\>\\d+)"<br />\| count as count by src\_ip \| sort by count \| limit 10|
|Couchbase - OpenTelemetry|Top 10 User Agent Accessed|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - HTTP Access| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| parse regex "(?\<src\_ip\>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\s+\\-\\s+(?\<username\>\\S+)\\s+\\[(?\<time\>.+)\\]\\s+\\"(?:(?\<method\>\\w+)\\s+(?\<path\>\\S+)\\sHTTP\\/1.1)\\"\\s+(?\<code\>\\d+)\\s(?\<bytes\>\\d+)\\s(?\<origin\_url\>\\S+) \\"(?\<agent\>.+)\\"\\s(?\<latency\>\\d+)"<br />\| count as count by agent \| sort by count \| limit 10|
|Couchbase - OpenTelemetry|Top 10 Username Accessed|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - HTTP Access| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| parse regex "(?\<src\_ip\>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\s+\\-\\s+(?\<username\>\\S+)\\s+\\[(?\<time\>.+)\\]\\s+\\"(?:(?\<method\>\\w+)\\s+(?\<path\>\\S+)\\sHTTP\\/1.1)\\"\\s+(?\<code\>\\d+)\\s(?\<bytes\>\\d+)\\s(?\<origin\_url\>\\S+) \\"(?\<agent\>.+)\\"\\s(?\<latency\>\\d+)"<br />\| count as count by username \| sort by count \| limit 10|
|Couchbase - OpenTelemetry|Top URLs with 4XX response codes|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - HTTP Access| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| parse regex "(?\<src\_ip\>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\s+\\-\\s+(?\<username\>\\S+)\\s+\\[(?\<time\>.+)\\]\\s+\\"(?:(?\<method\>\\w+)\\s+(?\<path\>\\S+)\\sHTTP\\/1.1)\\"\\s+(?\<code\>\\d+)\\s(?\<bytes\>\\d+)\\s(?\<origin\_url\>\\S+) \\"(?\<agent\>.+)\\"\\s(?\<latency\>\\d+)"<br />\| where code matches "4\*"<br />\| count as eventCount by path, code<br />\| sort by code, eventCount, path|
|Couchbase - OpenTelemetry|Top URLs with 5XX response codes|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - HTTP Access| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| parse regex "(?\<src\_ip\>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\s+\\-\\s+(?\<username\>\\S+)\\s+\\[(?\<time\>.+)\\]\\s+\\"(?:(?\<method\>\\w+)\\s+(?\<path\>\\S+)\\sHTTP\\/1.1)\\"\\s+(?\<code\>\\d+)\\s(?\<bytes\>\\d+)\\s(?\<origin\_url\>\\S+) \\"(?\<agent\>.+)\\"\\s(?\<latency\>\\d+)"<br />\| where code matches "5\*"<br />\| count as eventCount by path, code<br />\| sort by code, eventCount, path|
|Couchbase - OpenTelemetry|URLs Experiencing with 5XX Response Code|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - Overview| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| parse regex "(?\<src\_ip\>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\s+\\-\\s+(?\<username\>\\S+)\\s+\\[(?\<time\>.+)\\]\\s+\\"(?:(?\<method\>\\w+)\\s+(?\<path\>\\S+)\\sHTTP\\/1.1)\\"\\s+(?\<code\>\\d+)\\s(?\<bytes\>\\d+)\\s(?\<origin\_url\>\\S+) \\"(?\<agent\>.+)\\"\\s(?\<latency\>\\d+)"<br />\| where code matches "5\*"<br />\| count as eventCount by path, code<br />\| sort by code, eventCount, path|
|Couchbase - OpenTelemetry|User Events|Logs|Installed Apps/Couchbase - OpenTelemetry/Couchbase - Events| db.cluster.name={{db.cluster.name}} deployment.environment={{deployment.environment}} sumo.datasource="couchbase" "user"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| json "name" as event\_name<br />\| where event\_name matches "\*user\*"<br />\| json "remote.ip" as src\_ip <br />\| json "local.ip" as couchbase\_server<br />\| json "timestamp" as time<br />\|json "identity.user" as username<br />\| json "description" as description<br />\| count by time,event\_name,username,description<br />\| sort by time<br />\| fields time,event\_name,username,description<br />\| limit 100|

