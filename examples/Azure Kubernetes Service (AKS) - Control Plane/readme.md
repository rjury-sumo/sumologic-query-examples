# Azure Kubernetes Service (AKS) - Control Plane

## Searches

### Log Searches

- **API Server Request Latency by Method**: from Dashboard: Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server 
- **API Server Request Latency by Method**: from Dashboard: Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server 
- **API Server Request Rates by Clients**: from Dashboard: Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server 
- **API Server Request Rates by Clients**: from Dashboard: Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server 
- **API Server Success Request Rates**: from Dashboard: Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server 
- **API Server Success Request Rates**: from Dashboard: Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server 
- **API Server Successful vs Failure Request Rates**: from Dashboard: Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server 
- **API Server Successful vs Failure Request Rates**: from Dashboard: Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server 
- **Autoscaler Status Code Trend this Period**: from Dashboard: Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server 
- **Autoscaler Status Code Trend this Period**: from Dashboard: Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server 
- **Autoscaler URLs with Problem Status Codes**: from Dashboard: Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server 
- **Autoscaler URLs with Problem Status Codes**: from Dashboard: Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server 
- **Error Log Events**: from Dashboard: Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server 
- **Error Log Events**: from Dashboard: Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server 
- **Error Log Stream**: from Dashboard: Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager 
- **Error Log Stream**: from Dashboard: Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager 
- **Error Message Count**: from Dashboard: Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager 
- **Error Message Count**: from Dashboard: Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager 
- **Error Messages**: from Dashboard: Azure Kubernetes Service (AKS) - Control Plane/AKS - Scheduler 
- **Error Messages**: from Dashboard: Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - Scheduler 
- **Pods Created**: from Dashboard: Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager 
- **Pods Created**: from Dashboard: Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager 
- **Pods Deleted**: from Dashboard: Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager 
- **Pods Deleted**: from Dashboard: Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager 
- **Scale Operations**: from Dashboard: Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager 
- **Scale Operations**: from Dashboard: Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager 
- **Severity Breakdown**: from Dashboard: Azure Kubernetes Service (AKS) - Control Plane/AKS - Scheduler 
- **Severity Breakdown**: from Dashboard: Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - Scheduler 
- **Severity Breakdown**: from Dashboard: Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager 
- **Severity Breakdown**: from Dashboard: Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager 
- **Severity Breakdown**: from Dashboard: Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server 
- **Severity Breakdown**: from Dashboard: Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server 
- **Severity Over Time**: from Dashboard: Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager 
- **Severity Over Time**: from Dashboard: Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server 
- **Severity Over Time**: from Dashboard: Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server 
- **Severity Over Time**: from Dashboard: Azure Kubernetes Service (AKS) - Control Plane/AKS - Scheduler 
- **Severity Over Time**: from Dashboard: Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager 
- **Severity Over Time**: from Dashboard: Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - Scheduler 
- **Status Code Over Time**: from Dashboard: Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server 
- **Status Code Over Time**: from Dashboard: Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server 
- **Top 10 URLS with Problem Status Codes**: from Dashboard: Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server 
- **Top 10 URLS with Problem Status Codes**: from Dashboard: Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server 
- **Top URLS with Non-200**: from Dashboard: Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server 
- **Top URLS with Non-200**: from Dashboard: Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server

### Metric Searches


## Search Table

|app\_topic|search\_name|type|origin|search|
|:--|:--|:--|:--|:--|
|Azure Kubernetes Service (AKS) - Control Plane|API Server Request Latency by Method|Logs|Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server|\_sourceCategory = Labs/azure/aks "kube-apiserver"	<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-apiserver"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| parse regex field=log\_msg "(?\<method\>\\S+)\\s(?\<url\>\\S+)\\s\\((?\<latency\>\\S+)ms\\)\\s(?\<status\_code\>\\d+)\\s\\[(?\<k8\_resource\>.\*)\\s(?\<ip\>.+):(?\<port\>\\d+)\\]"<br />\| timeslice 100 buckets<br />\| avg(latency) as milli\_seconds by \_timeslice, method <br />\| transpose row \_timeslice column method|
|Azure Kubernetes Service (AKS) - Control Plane|API Server Request Latency by Method|Logs|Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server|\_sourceCategory={{Logsdatasource}}  "kube-apiserver"	<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-apiserver"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| parse regex field=log\_msg "(?\<method\>\\S+)\\s(?\<url\>\\S+)\\s\\((?\<latency\>\\S+)ms\\)\\s(?\<status\_code\>\\d+)\\s\\[(?\<k8\_resource\>.\*)\\s(?\<ip\>.+):(?\<port\>\\d+)\\]"<br />\| timeslice 15m <br />\| avg(latency) as milli\_seconds by \_timeslice, method <br />\| transpose row \_timeslice column method|
|Azure Kubernetes Service (AKS) - Control Plane|API Server Request Rates by Clients|Logs|Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server|\_sourceCategory={{Logsdatasource}}  "kube-apiserver" <br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-apiserver"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| parse regex field=log\_msg "(?\<method\>\\S+)\\s(?\<url\>\\S+)\\s\\((?\<latency\>\\S+)ms\\)\\s(?\<status\_code\>\\d+)\\s\\[(?\<user\_agent\>.\*)\\s(?\<ip\>.+):(?\<port\>\\d+)\\]"<br />\| where !isEmpty(user\_agent)<br />\| timeslice 15m<br />\| count by \_timeslice, user\_agent<br />\| transpose row \_timeslice column user\_agent|
|Azure Kubernetes Service (AKS) - Control Plane|API Server Request Rates by Clients|Logs|Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server|\_sourceCategory = Labs/azure/aks "kube-apiserver" <br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-apiserver"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| parse regex field=log\_msg "(?\<method\>\\S+)\\s(?\<url\>\\S+)\\s\\((?\<latency\>\\S+)ms\\)\\s(?\<status\_code\>\\d+)\\s\\[(?\<user\_agent\>.\*)\\s(?\<ip\>.+):(?\<port\>\\d+)\\]"<br />\| where !isEmpty(user\_agent)<br />\| timeslice 100 buckets<br />\| count by \_timeslice, user\_agent<br />\| transpose row \_timeslice column user\_agent|
|Azure Kubernetes Service (AKS) - Control Plane|API Server Success Request Rates|Logs|Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server|<br />\_sourceCategory={{Logsdatasource}}  "kube-apiserver" <br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-apiserver"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| parse regex field=log\_msg "(?\<method\>\\S+)\\s(?\<url\>\\S+)\\s\\((?\<latency\>\\S+)ms\\)\\s(?\<status\_code\>\\d+)\\s\\[(?\<k8\_resource\>.\*)\\s(?\<ip\>.+):(?\<port\>\\d+)\\]"<br />\| where status\_code matches "2\*"<br />\| count by cluster|
|Azure Kubernetes Service (AKS) - Control Plane|API Server Success Request Rates|Logs|Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server|<br />\_sourceCategory = Labs/azure/aks "kube-apiserver" <br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-apiserver"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| parse regex field=log\_msg "(?\<method\>\\S+)\\s(?\<url\>\\S+)\\s\\((?\<latency\>\\S+)ms\\)\\s(?\<status\_code\>\\d+)\\s\\[(?\<k8\_resource\>.\*)\\s(?\<ip\>.+):(?\<port\>\\d+)\\]"<br />\| where status\_code matches "2\*"<br />\| count by cluster|
|Azure Kubernetes Service (AKS) - Control Plane|API Server Successful vs Failure Request Rates|Logs|Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server|\_sourceCategory={{Logsdatasource}}  "kube-apiserver"	<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-apiserver"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| parse regex field=log\_msg "(?\<method\>\\S+)\\s(?\<url\>\\S+)\\s\\((?\<latency\>\\S+)ms\\)\\s(?\<status\_code\>\\d+)\\s\\[(?\<k8\_resource\>.\*)\\s(?\<ip\>.+):(?\<port\>\\d+)\\]"<br />\| if(status\_code matches "2\*", "success" , if(!(status\_code matches "2\*"), "failure","n/a" ) ) as status <br />\| timeslice 15m <br />\| count by \_timeslice, status <br />\| transpose row \_timeslice column status|
|Azure Kubernetes Service (AKS) - Control Plane|API Server Successful vs Failure Request Rates|Logs|Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server|\_sourceCategory = Labs/azure/aks "kube-apiserver"	<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-apiserver"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| parse regex field=log\_msg "(?\<method\>\\S+)\\s(?\<url\>\\S+)\\s\\((?\<latency\>\\S+)ms\\)\\s(?\<status\_code\>\\d+)\\s\\[(?\<k8\_resource\>.\*)\\s(?\<ip\>.+):(?\<port\>\\d+)\\]"<br />\| if(status\_code matches "2\*", "success" , if(!(status\_code matches "2\*"), "failure","n/a" ) ) as status <br />\| timeslice 100 buckets<br />\| count by \_timeslice, status <br />\| transpose row \_timeslice column status|
|Azure Kubernetes Service (AKS) - Control Plane|Autoscaler Status Code Trend this Period|Logs|Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server|\_sourceCategory={{Logsdatasource}}  "kube-apiserver"	<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-apiserver"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| parse regex field=log\_msg "(?\<method\>\\S+)\\s(?\<url\>\\S+)\\s\\((?\<perf\>\\S+)\\)\\s(?\<status\_code\>\\d+)\\s\\[(?\<k8\_resource\>.\*)\\s(?\<ip\>.+):(?\<port\>\\d+)\\]"<br />\| if(k8\_resource matches "\*autoscaler\*", 1, 0) as scale\_action<br />\| where scale\_action == 1<br />\| timeslice 1h \| count \_timeslice, status\_code \| transpose row \_timeslice column status\_code|
|Azure Kubernetes Service (AKS) - Control Plane|Autoscaler Status Code Trend this Period|Logs|Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server|\_sourceCategory = Labs/azure/aks "kube-apiserver"	<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-apiserver"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| parse regex field=log\_msg "(?\<method\>\\S+)\\s(?\<url\>\\S+)\\s\\((?\<perf\>\\S+)\\)\\s(?\<status\_code\>\\d+)\\s\\[(?\<k8\_resource\>.\*)\\s(?\<ip\>.+):(?\<port\>\\d+)\\]"<br />\| if(k8\_resource matches "\*autoscaler\*", 1, 0) as scale\_action<br />\| where scale\_action == 1<br />\| timeslice 100 buckets <br />\| count \_timeslice, status\_code <br />\| transpose row \_timeslice column status\_code|
|Azure Kubernetes Service (AKS) - Control Plane|Autoscaler URLs with Problem Status Codes|Logs|Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server|\_sourceCategory={{Logsdatasource}}  "kube-apiserver"	<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-apiserver"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| parse regex field=log\_msg "(?\<method\>\\S+)\\s(?\<url\>\\S+)\\s\\((?\<perf\>\\S+)\\)\\s(?\<status\_code\>\\d+)\\s\\[(?\<k8\_resource\>.\*)\\s(?\<ip\>.+):(?\<port\>\\d+)\\]"<br />\| if(k8\_resource matches "\*autoscaler\*", 1, 0) as scale\_action<br />\| where scale\_action == 1<br />\| count url, status\_code<br />\| sort by \_count|
|Azure Kubernetes Service (AKS) - Control Plane|Autoscaler URLs with Problem Status Codes|Logs|Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server|\_sourceCategory = Labs/azure/aks "kube-apiserver"	<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-apiserver"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| parse regex field=log\_msg "(?\<method\>\\S+)\\s(?\<url\>\\S+)\\s\\((?\<perf\>\\S+)\\)\\s(?\<status\_code\>\\d+)\\s\\[(?\<k8\_resource\>.\*)\\s(?\<ip\>.+):(?\<port\>\\d+)\\]"<br />\| if(k8\_resource matches "\*autoscaler\*", 1, 0) as scale\_action<br />\| where scale\_action == 1<br />\| count url, status\_code<br />\| sort by \_count|
|Azure Kubernetes Service (AKS) - Control Plane|Error Log Events|Logs|Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server|\_sourceCategory={{Logsdatasource}}  "kube-apiserver"	<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-apiserver"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| where severity in ("E", "F")<br />\| count by  pod, severity, log\_msg<br />\| sort by \_count|
|Azure Kubernetes Service (AKS) - Control Plane|Error Log Events|Logs|Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server|\_sourceCategory = Labs/azure/aks "kube-apiserver"	<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-apiserver"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| where severity in ("E", "F")<br />\| count by  pod, severity, log\_msg<br />\| sort by \_count|
|Azure Kubernetes Service (AKS) - Control Plane|Error Log Stream|Logs|Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager|\_sourceCategory={{Logsdatasource}}  ("kube-controller-manager") <br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-controller-manager"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| where severity in ("E", "F")<br />\| count by time, pod, severity, log\_msg<br />\| sort by time|
|Azure Kubernetes Service (AKS) - Control Plane|Error Log Stream|Logs|Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager|\_sourceCategory = Labs/azure/aks ("kube-controller-manager") <br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-controller-manager"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| where severity in ("E", "F")<br />\| count by time, pod, severity, log\_msg<br />\| sort by time|
|Azure Kubernetes Service (AKS) - Control Plane|Error Message Count|Logs|Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager|<br />\_sourceCategory={{Logsdatasource}}  ("kube-controller-manager") <br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-controller-manager"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| count by log\_msg<br />\| sort by \_count<br />\| limit 10|
|Azure Kubernetes Service (AKS) - Control Plane|Error Message Count|Logs|Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager|<br />\_sourceCategory = Labs/azure/aks ("kube-controller-manager") <br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-controller-manager"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| count by log\_msg<br />\| sort by \_count<br />\| limit 10|
|Azure Kubernetes Service (AKS) - Control Plane|Error Messages|Logs|Azure Kubernetes Service (AKS) - Control Plane/AKS - Scheduler|\_sourceCategory = Labs/azure/aks "kube-scheduler"<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-scheduler"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| where severity in ("E", "F")<br />\| count by  pod, severity, log\_msg<br />\| sort by \_count|
|Azure Kubernetes Service (AKS) - Control Plane|Error Messages|Logs|Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - Scheduler|\_sourceCategory={{Logsdatasource}}  "kube-scheduler"<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-scheduler"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| where severity in ("E", "F")<br />\| count by  pod, severity, log\_msg<br />\| sort by \_count|
|Azure Kubernetes Service (AKS) - Control Plane|Pods Created|Logs|Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager|\_sourceCategory={{Logsdatasource}}  "kube-controller-manager"	Created pod<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-controller-manager"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| parse regex field=log "(?\<misc\>.\*)  (?\<msg\>.\*)"<br />\| parse regex field=msg "Created pod: (?\<pod\_name\>.\*)"<br />\| count by time, pod\_name|
|Azure Kubernetes Service (AKS) - Control Plane|Pods Created|Logs|Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager|\_sourceCategory = Labs/azure/aks "kube-controller-manager"	Created pod<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-controller-manager"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| parse regex field=log "(?\<misc\>.\*)  (?\<msg\>.\*)"<br />\| parse regex field=msg "Created pod: (?\<pod\_name\>.\*)"<br />\| count by time, pod\_name|
|Azure Kubernetes Service (AKS) - Control Plane|Pods Deleted|Logs|Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager|\_sourceCategory={{Logsdatasource}}  "kube-controller-manager"	Deleted pod<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-controller-manager"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| parse regex field=log "(?\<misc\>.\*)  (?\<msg\>.\*)"<br />\| parse regex field=msg "Deleted pod: (?\<pod\_name\>.\*)"<br />\| count by time, pod\_name|
|Azure Kubernetes Service (AKS) - Control Plane|Pods Deleted|Logs|Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager|\_sourceCategory = Labs/azure/aks "kube-controller-manager"	Deleted pod<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-controller-manager"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| parse regex field=log "(?\<misc\>.\*)  (?\<msg\>.\*)"<br />\| parse regex field=msg "Deleted pod: (?\<pod\_name\>.\*)"<br />\| count by time, pod\_name|
|Azure Kubernetes Service (AKS) - Control Plane|Scale Operations|Logs|Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager|\_sourceCategory={{Logsdatasource}}   ("kube-controller-manager"	and ScalingReplicaSet and Scaled) <br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-controller-manager"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| timeslice 1h<br />\| parse regex field=log "(?\<misc\>.\*)  (?\<msg\>.\*)"<br />\| parse regex field=msg "(?\<misc\_1\>.\*)Scaled (?\<direction\>.\*) replica set (?\<replica\_set\>.\*) to (?\<scaled\_to\>[\\d]+)"<br />\| first(scaled\_to) as scaled\_to by  replica\_set |
|Azure Kubernetes Service (AKS) - Control Plane|Scale Operations|Logs|Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager|\_sourceCategory = Labs/azure/aks  ("kube-controller-manager"	and ScalingReplicaSet and Scaled) <br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-controller-manager"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| timeslice 1h<br />\| parse regex field=log "(?\<misc\>.\*)  (?\<msg\>.\*)"<br />\| parse regex field=msg "(?\<misc\_1\>.\*) Scaled (?\<direction\>.\*) replica set (?\<replica\_set\>.\*) to (?\<scaled\_to\>[\\d]+)"<br />\| first(scaled\_to) as scaled\_to by  replica\_set |
|Azure Kubernetes Service (AKS) - Control Plane|Severity Breakdown|Logs|Azure Kubernetes Service (AKS) - Control Plane/AKS - Scheduler|\_sourceCategory = Labs/azure/aks "kube-scheduler"<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-scheduler"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| count by severity<br />\| sort by \_count|
|Azure Kubernetes Service (AKS) - Control Plane|Severity Breakdown|Logs|Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - Scheduler|\_sourceCategory={{Logsdatasource}}  "kube-scheduler"<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-scheduler"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| count by severity<br />\| sort by \_count|
|Azure Kubernetes Service (AKS) - Control Plane|Severity Breakdown|Logs|Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager|\_sourceCategory = Labs/azure/aks ("kube-controller-manager") <br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-controller-manager"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| count by severity<br />\| sort by \_count|
|Azure Kubernetes Service (AKS) - Control Plane|Severity Breakdown|Logs|Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager|\_sourceCategory={{Logsdatasource}}  ("kube-controller-manager") <br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-controller-manager"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| count by severity<br />\| sort by \_count|
|Azure Kubernetes Service (AKS) - Control Plane|Severity Breakdown|Logs|Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server|\_sourceCategory={{Logsdatasource}}  "kube-apiserver"	<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-apiserver"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| count by severity<br />\| sort by \_count|
|Azure Kubernetes Service (AKS) - Control Plane|Severity Breakdown|Logs|Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server|\_sourceCategory = Labs/azure/aks "kube-apiserver"	<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-apiserver"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| count by severity<br />\| sort by \_count|
|Azure Kubernetes Service (AKS) - Control Plane|Severity Over Time|Logs|Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager|\_sourceCategory={{Logsdatasource}}  ("kube-controller-manager") <br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-controller-manager"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| timeslice 1h<br />\| count by \_timeslice, severity<br />\| transpose row \_timeslice column severity<br />\| fillmissing timeslice(1h)|
|Azure Kubernetes Service (AKS) - Control Plane|Severity Over Time|Logs|Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server|\_sourceCategory = Labs/azure/aks "kube-apiserver"	<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-apiserver"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| timeslice 100 buckets<br />\| count by \_timeslice, severity<br />\| transpose row \_timeslice column severity<br />\| fillmissing timeslice(1h)|
|Azure Kubernetes Service (AKS) - Control Plane|Severity Over Time|Logs|Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server|\_sourceCategory={{Logsdatasource}}  "kube-apiserver"	<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-apiserver"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| timeslice 1h<br />\| count by \_timeslice, severity<br />\| transpose row \_timeslice column severity<br />\| fillmissing timeslice(1h)|
|Azure Kubernetes Service (AKS) - Control Plane|Severity Over Time|Logs|Azure Kubernetes Service (AKS) - Control Plane/AKS - Scheduler|\_sourceCategory = Labs/azure/aks "kube-scheduler"<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-scheduler"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| timeslice 100 buckets<br />\| count by \_timeslice, severity<br />\| transpose row \_timeslice column severity<br />\| fillmissing timeslice(1h)|
|Azure Kubernetes Service (AKS) - Control Plane|Severity Over Time|Logs|Azure Kubernetes Service (AKS) - Control Plane/AKS - Controller Manager|\_sourceCategory = Labs/azure/aks ("kube-controller-manager") <br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-controller-manager"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| timeslice 100 buckets<br />\| count by \_timeslice, severity<br />\| transpose row \_timeslice column severity<br />\| fillmissing timeslice(1h)|
|Azure Kubernetes Service (AKS) - Control Plane|Severity Over Time|Logs|Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - Scheduler|\_sourceCategory={{Logsdatasource}}  "kube-scheduler"<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-scheduler"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| timeslice 1h<br />\| count by \_timeslice, severity<br />\| transpose row \_timeslice column severity<br />\| fillmissing timeslice(1h)|
|Azure Kubernetes Service (AKS) - Control Plane|Status Code Over Time|Logs|Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server|\_sourceCategory = Labs/azure/aks "kube-apiserver"	<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-apiserver"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| parse regex field=log\_msg "(?\<method\>\\S+)\\s(?\<url\>\\S+)\\s\\((?\<perf\>\\S+)\\)\\s(?\<status\_code\>\\d+)\\s\\[(?\<k8\_resource\>.\*)\\s(?\<ip\>.+):(?\<port\>\\d+)\\]"<br />\| timeslice 100 buckets <br />\| count \_timeslice, status\_code <br />\| transpose row \_timeslice column status\_code<br />|
|Azure Kubernetes Service (AKS) - Control Plane|Status Code Over Time|Logs|Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server|\_sourceCategory={{Logsdatasource}}  "kube-apiserver"	<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-apiserver"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| parse regex field=log\_msg "(?\<method\>\\S+)\\s(?\<url\>\\S+)\\s\\((?\<perf\>\\S+)\\)\\s(?\<status\_code\>\\d+)\\s\\[(?\<k8\_resource\>.\*)\\s(?\<ip\>.+):(?\<port\>\\d+)\\]"<br />\| timeslice 1h <br />\| count \_timeslice, status\_code <br />\| transpose row \_timeslice column status\_code<br />|
|Azure Kubernetes Service (AKS) - Control Plane|Top 10 URLS with Problem Status Codes|Logs|Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server|\_sourceCategory={{Logsdatasource}}  "kube-apiserver"	<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-apiserver"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| parse regex field=log\_msg "(?\<method\>\\S+)\\s(?\<url\>\\S+)\\s\\((?\<perf\>\\S+)\\)\\s(?\<status\_code\>\\d+)\\s\\[(?\<k8\_resource\>.\*)\\s(?\<ip\>.+):(?\<port\>\\d+)\\]"<br />\| where !(status\_code matches "2\*")<br />\| count as url\_count by status\_code, url<br />\| sort by url\_count<br />\| limit 10|
|Azure Kubernetes Service (AKS) - Control Plane|Top 10 URLS with Problem Status Codes|Logs|Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server|\_sourceCategory = Labs/azure/aks "kube-apiserver"	<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-apiserver"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| parse regex field=log\_msg "(?\<method\>\\S+)\\s(?\<url\>\\S+)\\s\\((?\<perf\>\\S+)\\)\\s(?\<status\_code\>\\d+)\\s\\[(?\<k8\_resource\>.\*)\\s(?\<ip\>.+):(?\<port\>\\d+)\\]"<br />\| where !(status\_code matches "2\*")<br />\| count as url\_count by status\_code, url<br />\| sort by url\_count<br />\| limit 10|
|Azure Kubernetes Service (AKS) - Control Plane|Top URLS with Non-200|Logs|Installed Apps/Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server|\_sourceCategory={{Logsdatasource}}  "kube-apiserver"	<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-apiserver"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| parse regex field=log\_msg "(?\<method\>\\S+)\\s(?\<url\>\\S+)\\s\\((?\<perf\>\\S+)\\)\\s(?\<status\_code\>\\d+)\\s\\[(?\<k8\_resource\>.\*)\\s(?\<ip\>.+):(?\<port\>\\d+)\\]"<br />\| where !(status\_code matches "2\*")<br />\| count url<br />\| top 10 url by \_count|
|Azure Kubernetes Service (AKS) - Control Plane|Top URLS with Non-200|Logs|Azure Kubernetes Service (AKS) - Control Plane/AKS - API Server|\_sourceCategory = Labs/azure/aks "kube-apiserver"	<br />\| json "properties.log", "category", "time", "properties.pod", "resourceId" as log, category, time, pod, resourceId<br />\| where category ="kube-apiserver"<br />\| parse regex field=log "(?\<severity\>W\|I\|F\|E)(?\<tt\>[\\S]+) (?\<times\>[\\d:.]+)[\\s]+(?\<log\_msg\>.\*)"<br />\| parse regex field=resourceId "RESOURCEGROUPS\\/(?\<resource\_grp\>[\\S]+)\\/PROVIDERS\\/MICROSOFT\\.CONTAINERSERVICE\\/MANAGEDCLUSTERS\\/(?\<cluster\>[\\S]+)"<br />\| parse regex field=log\_msg "(?\<method\>\\S+)\\s(?\<url\>\\S+)\\s\\((?\<perf\>\\S+)\\)\\s(?\<status\_code\>\\d+)\\s\\[(?\<k8\_resource\>.\*)\\s(?\<ip\>.+):(?\<port\>\\d+)\\]"<br />\| where !(status\_code matches "2\*")<br />\| count url<br />\| top 10 url by \_count|

