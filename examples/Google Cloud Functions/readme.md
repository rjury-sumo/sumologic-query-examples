# Google Cloud Functions
## Sumo Logic App For: Google Cloud Functions
The Sumo Logic app for Google Cloud Functions helps you monitor your usage of Google Cloud Functions. The preconfigured dashboards provide insight into function executions, operations, latency, errors, and failures.
Docs Link: [Google Cloud Functions](https://help.sumologic.com/?cid=22674)

## Searches

### Log Searches

- **Audit Events Over Time**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions - Audit Logs 
- **Audit Logs - Actions Performed**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions - Audit Logs 
- **Execution Status**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions - Platform Logs 
- **Function Statistics by Project**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions - Platform Logs 
- **Google Cloud Function - Failures**: from Search: Installed Apps/Google Cloud Functions/Google Cloud Function - Failures 
- **Google Cloud Function - Operations**: from Search: Installed Apps/Google Cloud Functions/Google Cloud Function - Operations 
- **Google Cloud Function - Statistics by Project**: from Search: Installed Apps/Google Cloud Functions/Google Cloud Function - Statistics by Project 
- **Google Cloud Functions - Failures**: from Search: Google Cloud Functions/Google Cloud Functions - Failures 
- **Google Cloud Functions - Operations**: from Search: Google Cloud Functions/Google Cloud Functions - Operations 
- **Google Cloud Functions - Statistics by Project**: from Search: Google Cloud Functions/Google Cloud Functions - Statistics by Project 
- **Recent Error Audit Events**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions - Audit Logs 
- **Recent Failures**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions - Platform Logs 
- **Top 10 Functions by Average Latency (ms)**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions - Platform Logs 
- **Top 10 Functions by Error Status**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions - Platform Logs 
- **Top 10 Functions by Executions**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions - Platform Logs 
- **Unauthorized Audit Events**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions - Audit Logs

### Metric Searches

- **Active Functions**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions -  Performance Overview 
- **Active Instances**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions -  Performance Overview 
- **Error %**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions -  Performance Overview 
- **Execution by Status**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions - Performance Details 
- **Execution Count**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions -  Performance Overview 
- **Execution Count by Error Status**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions -  Performance Overview 
- **Execution Count by Status, TriggerType**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions -  Performance Overview 
- **Execution Time**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions - Performance Details 
- **Execution Time - Today vs Yesterday vs Last week**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions - Performance Details 
- **Function by Average Execution Time**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions -  Performance Overview 
- **Function distribution by Trigger Type**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions -  Performance Overview 
- **Functions by Memory Consumption**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions -  Performance Overview 
- **Instance Count - Active vs Idle**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions - Performance Details 
- **Number of Errors**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions -  Performance Overview 
- **Number of Errors by Function**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions -  Performance Overview 
- **Number of Executions**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions - Performance Details 
- **Number of Executions - Today vs Yesterday vs Last week**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions - Performance Details 
- **Number of Function Execution**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions -  Performance Overview 
- **Outgoing Traffic by Function (in Bytes)**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions - Performance Details 
- **User Memory**: from Dashboard: Installed Apps/Google Cloud Functions/Google Cloud Functions - Performance Details

## Search Table

|app\_topic|search\_name|type|origin|search|
|:--|:--|:--|:--|:--|
|Google Cloud Functions|Active Functions|Metrics|Installed Apps/Google Cloud Functions/Google Cloud Functions -  Performance Overview|project\_id={{project\_id}} region={{region}} cloud.platform={{cloud.platform}} metric=function/active\_instances statistic=average  \| count|
|Google Cloud Functions|Active Instances|Metrics|Installed Apps/Google Cloud Functions/Google Cloud Functions -  Performance Overview|project\_id={{project\_id}} region={{region}} cloud.platform={{cloud.platform}}  function\_name =\* metric=function/active\_instances statistic=average |
|Google Cloud Functions|Audit Events Over Time|Logs|Installed Apps/Google Cloud Functions/Google Cloud Functions - Audit Logs|\_sourceCategory={{Logsdatasource}}  logName authorizationInfo "\\"type\\":\\"cloud\_function\\"" <br />\| json "message.data.logName" as log\_name<br />\| where log\_name matches "projects/\*/logs/cloudaudit.googleapis.com%2Factivity"<br />\| json "message.data.resource.labels", "message.data.protoPayload.authorizationInfo[\*]" as labels, permissions<br />\| json field=labels "function\_name", "project\_id", "region" as function\_name, project\_id, region<br />\| where toLowerCase(project\_id) matches "{{project\_id}}" AND toLowerCase(region) matches "{{region}}" AND toLowerCase(function\_name) matches "{{function\_name}}"<br />\| parse regex field=permissions "\\"permission\\":\\"(?\<actionstring\>[a-zA-Z\\\\.]+)" multi<br />\| parse regex field=actionstring "(?\<action\>\\w+)\$" multi<br />\| json "message.data.operation","message.data.operation.last" as operation,islast nodrop<br />\| where (islast="true" or isNull(operation))<br />\| timeslice 1h<br />\|count as operations by \_timeslice, action<br />\| transpose row \_timeslice column action|
|Google Cloud Functions|Audit Logs - Actions Performed|Logs|Installed Apps/Google Cloud Functions/Google Cloud Functions - Audit Logs|\_sourceCategory={{Logsdatasource}}  logName principalEmail authorizationInfo "\\"type\\":\\"cloud\_function\\"" <br />\| json "message.data.logName" as log\_name<br />\| where log\_name matches "projects/\*/logs/cloudaudit.googleapis.com%2Factivity"<br />\| json "message.data.timestamp", "message.data.resource.labels", "message.data.protoPayload" as timestamp, labels, payload<br />\| json "message.data.severity" as severity<br />\| json field=labels "function\_name", "project\_id", "region" as function\_name, project\_id, region<br />\| where toLowerCase(project\_id) matches "{{project\_id}}" AND toLowerCase(region) matches "{{region}}" AND toLowerCase(function\_name) matches "{{function\_name}}"<br />\| json field=payload "authenticationInfo.principalEmail", "authorizationInfo[\*]" as user, permissions<br />\| json "message.data.operation","message.data.operation.last" as operation,islast nodrop<br />\| parse regex field=permissions "\\"permission\\":\\"(?\<actionstring\>[a-zA-Z\\\\.]+)" multi<br />\| parse regex field=actionstring "(?\<action\>\\w+)\$" multi<br />\| parse regex field=permissions "\\"granted\\":(?\<granted\>[a-z]+)" multi nodrop<br />\| where granted="true"<br />\| where (islast="true" or isNull(operation))<br />\| count as operations by timestamp,severity,project\_id, function\_name, action, user<br />\| fields -operations<br />\| sort by timestamp|
|Google Cloud Functions|Error %|Metrics|Installed Apps/Google Cloud Functions/Google Cloud Functions -  Performance Overview|project\_id=\* region=\* cloud.platform=gcp\_cloudfunctions function\_name =\* metric=function/execution\_count !status=ok statistic=average \| sum  by cloud.platform|
|Google Cloud Functions|Execution by Status|Metrics|Installed Apps/Google Cloud Functions/Google Cloud Functions - Performance Details|cloud.provider=gcp project\_id={{project\_id}} region={{region}} cloud.platform={{cloud.platform}} function\_name={{function\_name}} metric=function/execution\_count \| quantize using sum \| sum by status |
|Google Cloud Functions|Execution Count|Metrics|Installed Apps/Google Cloud Functions/Google Cloud Functions -  Performance Overview|project\_id={{project\_id}} region={{region}} cloud.platform={{cloud.platform}}  function\_name =\* metric=function/execution\_count statistic=average \| sum by project\_id, region, cloud.platform, function\_name |
|Google Cloud Functions|Execution Count by Error Status|Metrics|Installed Apps/Google Cloud Functions/Google Cloud Functions -  Performance Overview|project\_id={{project\_id}} region={{region}} cloud.platform={{cloud.platform}} function\_name =\* metric=function/execution\_count statistic=average !status=ok trigger\_type=\* \| sum by  function\_name,status|
|Google Cloud Functions|Execution Count by Status, TriggerType|Metrics|Installed Apps/Google Cloud Functions/Google Cloud Functions -  Performance Overview|project\_id={{project\_id}} region={{region}} cloud.platform={{cloud.platform}} function\_name =\* metric=function/execution\_count statistic=average status=\* trigger\_type=\* \| sum by  function\_name , status, trigger\_type |
|Google Cloud Functions|Execution Status|Logs|Installed Apps/Google Cloud Functions/Google Cloud Functions - Platform Logs|\_sourceCategory={{Logsdatasource}}  logName function\_name textPayload "\\"type\\":\\"cloud\_function\\"" <br />\| json "message.data.logName" as log\_name<br />\| where log\_name matches "projects/\*/logs/cloudfunctions.googleapis.com%2Fcloud-functions"<br />\| parse regex "\\"textPayload\\":\\"Function execution took[^\\"]\*status[^\\"]\*: ?(?\<status\>[^\\"]+)\\""<br />\| json "message.data.resource.labels" as labels<br />\| json field=labels "function\_name", "project\_id", "region" as function\_name, project\_id, region<br />\| where toLowerCase(project\_id) matches "{{project\_id}}" AND toLowerCase(region) matches "{{region}}" AND toLowerCase(function\_name) matches "{{function\_name}}"<br />\|count by function\_name, project\_id, region, status<br />\| transpose row function\_name, project\_id, region column status|
|Google Cloud Functions|Execution Time|Metrics|Installed Apps/Google Cloud Functions/Google Cloud Functions - Performance Details|cloud.provider=gcp project\_id={{project\_id}} region={{region}} cloud.platform={{cloud.platform}} function\_name={{function\_name}} metric=function/execution\_times statistic=average  \| avg by project\_id,region,function\_name|
|Google Cloud Functions|Execution Time - Today vs Yesterday vs Last week|Metrics|Installed Apps/Google Cloud Functions/Google Cloud Functions - Performance Details|cloud.provider=gcp project\_id={{project\_id}} region={{region}} cloud.platform={{cloud.platform}} function\_name={{function\_name}} metric=function/execution\_times statistic=average  \| avg by project\_id,region,function\_name|
|Google Cloud Functions|Function by Average Execution Time|Metrics|Installed Apps/Google Cloud Functions/Google Cloud Functions -  Performance Overview|project\_id={{project\_id}} region={{region}} cloud.platform={{cloud.platform}} function\_name =\* metric=function/execution\_times \| eval \_value/1000000 \| avg by function\_name |
|Google Cloud Functions|Function distribution by Trigger Type|Metrics|Installed Apps/Google Cloud Functions/Google Cloud Functions -  Performance Overview|project\_id={{project\_id}} region={{region}} cloud.platform={{cloud.platform}} function\_name =\* metric=function/execution\_count \| sum by trigger\_type |
|Google Cloud Functions|Function Statistics by Project|Logs|Installed Apps/Google Cloud Functions/Google Cloud Functions - Platform Logs|\_sourceCategory={{Logsdatasource}}  logName function\_name textPayload "\\"type\\":\\"cloud\_function\\"" <br />\| json "message.data.logName" as log\_name<br />\| where log\_name matches "projects/\*/logs/cloudfunctions.googleapis.com%2Fcloud-functions"<br />\| parse regex "\\"textPayload\\":\\"Function execution took (?\<latency\>[0-9]+) ms[^\\"]\*status[^\\"]\*: ?(?\<status\>[^\\"]+)\\""<br />\| json "message.data.resource.labels" as labels<br />\| json field=labels "function\_name", "project\_id", "region" as function\_name, project\_id, region<br />\| if (status in ("'ok'", "200"), 0, 1) as error<br />\| where toLowerCase(project\_id) matches "{{project\_id}}" AND toLowerCase(region) matches "{{region}}" AND toLowerCase(function\_name) matches "{{function\_name}}"<br />\|count as executions, avg(latency) as execution\_time\_ms, sum(error) as error\_statuses by project\_id<br />\| error\_statuses / executions \* 100 as error\_pct|
|Google Cloud Functions|Functions by Memory Consumption|Metrics|Installed Apps/Google Cloud Functions/Google Cloud Functions -  Performance Overview|project\_id={{project\_id}} region={{region}} cloud.platform={{cloud.platform}} function\_name =\* metric=function/user\_memory\_bytes \| eval \_value/(1024\*1024) \| avg by function\_name |
|Google Cloud Functions|Google Cloud Function - Failures|Logs|Installed Apps/Google Cloud Functions/Google Cloud Function - Failures|\_sourceCategory={{Logsdatasource}}  logName textPayload ("\\"severity\\":\\"WARNING\\"" or "\\"severity\\":\\"ERROR\\"" or "\\"severity\\":\\"CRITICAL\\"" or "\\"severity\\":\\"ALERT\\"" or "\\"severity\\":\\"EMERGENCY\\"")<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/cloudfunctions\*"<br />\| json "message.data.resource.labels", "message.data.severity", "message.data.timestamp", "message.data.textPayload" as labels, severity, timestamp, text<br />\| json field=labels "function\_name", "project\_id", "region" as function, project, region<br />\| count as failures by timestamp, function, project, region, severity, text<br />\| sort by timestamp asc<br />\| 1 as error<br />\| accum error as function\_errors by function, project<br />\| fields timestamp, function, project, severity, text, function\_errors<br />\| sort by timestamp|
|Google Cloud Functions|Google Cloud Function - Operations|Logs|Installed Apps/Google Cloud Functions/Google Cloud Function - Operations|\_sourceCategory={{Logsdatasource}}  logName principalEmail authorizationInfo "\\"type\\":\\"cloud\_function\\"" <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/cloudaudit.googleapis.com%2Factivity"<br />\| json "message.data.timestamp", "message.data.resource.labels", "message.data.protoPayload" as timestamp, labels, payload<br />\| json field=labels "function\_name", "project\_id", "region" as function, project, region<br />\| json field=payload "authenticationInfo.principalEmail", "authorizationInfo[\*]" as user, permissions<br />\| parse regex field=permissions "\\"granted\\":(?\<granted\>(.\*(?=,))),\\"permission\\":\\"(?\<action\>(.\*?(?=\\")))" multi<br />\| count as operations by timestamp, function, region, project, action, granted, user<br />\| fields -operations<br />\| sort by timestamp|
|Google Cloud Functions|Google Cloud Function - Statistics by Project|Logs|Installed Apps/Google Cloud Functions/Google Cloud Function - Statistics by Project|\_sourceCategory={{Logsdatasource}}  logName function\_name textPayload "\\"type\\":\\"cloud\_function\\"" <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/cloudfunctions.googleapis.com%2Fcloud-functions"<br />\| parse regex "\\"textPayload\\":\\"Function execution took (?\<latency\>[0-9]+) ms[^\\"]\*status[^\\"]\*: ?(?\<status\>[^\\"]+)\\""<br />\| json "message.data.resource.labels" as labels<br />\| json field=labels "function\_name", "project\_id", "region" as function, project, region<br />\| if (status in ("'ok'", "200"), 0, 1) as error <br />\| count as executions, avg(latency) as avg\_ms, sum(error) as error\_statuses by project<br />\| error\_statuses / executions \* 100 as error\_pct|
|Google Cloud Functions|Google Cloud Functions - Failures|Logs|Google Cloud Functions/Google Cloud Functions - Failures|\_sourceCategory = Labs/GCP/functions logName textPayload ("\\"severity\\":\\"WARNING\\"" or "\\"severity\\":\\"ERROR\\"" or "\\"severity\\":\\"CRITICAL\\"" or "\\"severity\\":\\"ALERT\\"" or "\\"severity\\":\\"EMERGENCY\\"")<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/cloudfunctions\*"<br />\| json "message.data.resource.labels", "message.data.severity", "message.data.timestamp", "message.data.textPayload" as labels, severity, timestamp, text<br />\| json field=labels "function\_name", "project\_id", "region" as function, project, region<br />\| count as failures by timestamp, function, project, region, severity, text<br />\| sort by timestamp asc<br />\| 1 as error<br />\| accum error as function\_errors by function, project<br />\| fields timestamp, function, project, severity, text, function\_errors<br />\| sort by timestamp|
|Google Cloud Functions|Google Cloud Functions - Operations|Logs|Google Cloud Functions/Google Cloud Functions - Operations|\_sourceCategory = Labs/GCP/functions logName principalEmail authorizationInfo "\\"type\\":\\"cloud\_function\\"" <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/cloudaudit.googleapis.com%2Factivity"<br />\| json "message.data.timestamp", "message.data.resource.labels", "message.data.protoPayload" as timestamp, labels, payload<br />\| json field=labels "function\_name", "project\_id", "region" as function, project, region<br />\| json field=payload "authenticationInfo.principalEmail", "authorizationInfo[\*]" as user, permissions<br />\| parse regex field=permissions "\\"permission\\":\\"(?\<action\>[a-zA-Z\\.]+)\\",\\"granted\\":(?\<granted\>[a-z]+)}" multi<br />\| count as operations by timestamp, function, region, project, action, granted, user<br />\| fields -operations<br />\| sort by timestamp|
|Google Cloud Functions|Google Cloud Functions - Statistics by Project|Logs|Google Cloud Functions/Google Cloud Functions - Statistics by Project|\_sourceCategory = Labs/GCP/functions logName function\_name textPayload "\\"type\\":\\"cloud\_function\\"" <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/cloudfunctions.googleapis.com%2Fcloud-functions"<br />\| parse regex "\\"textPayload\\":\\"Function execution took (?\<latency\>[0-9]+) ms[^\\"]\*status[^\\"]\*: ?(?\<status\>[^\\"]+)\\""<br />\| json "message.data.resource.labels" as labels<br />\| json field=labels "function\_name", "project\_id", "region" as function, project, region<br />\| if (status in ("'ok'", "200"), 0, 1) as error <br />\| count as executions, avg(latency) as avg\_ms, sum(error) as error\_statuses by project<br />\| error\_statuses / executions \* 100 as error\_pct|
|Google Cloud Functions|Instance Count - Active vs Idle|Metrics|Installed Apps/Google Cloud Functions/Google Cloud Functions - Performance Details|project\_id={{project\_id}} region={{region}} cloud.platform={{cloud.platform}} function\_name={{function\_name}} metric=function/instance\_count statistic=average state=active  \| sum by project\_id, region, function\_name |
|Google Cloud Functions|Number of Errors|Metrics|Installed Apps/Google Cloud Functions/Google Cloud Functions -  Performance Overview|cloud.provider=gcp project\_id={{project\_id}} region={{region}} cloud.platform={{cloud.platform}} function\_name =\* metric=function/execution\_count statistic=average !status=ok \| sum |
|Google Cloud Functions|Number of Errors by Function|Metrics|Installed Apps/Google Cloud Functions/Google Cloud Functions -  Performance Overview|project\_id={{project\_id}} region={{region}} function\_name =\* cloud.platform={{cloud.platform}} metric=function/execution\_count !status=ok \| quantize using sum \|sum by function\_name |
|Google Cloud Functions|Number of Executions|Metrics|Installed Apps/Google Cloud Functions/Google Cloud Functions - Performance Details|cloud.provider=gcp project\_id={{project\_id}} region={{region}} cloud.platform={{cloud.platform}} function\_name={{function\_name}} metric=function/execution\_count statistic=average \| quantize using sum \| sum by project\_id, region, function\_name |
|Google Cloud Functions|Number of Executions - Today vs Yesterday vs Last week|Metrics|Installed Apps/Google Cloud Functions/Google Cloud Functions - Performance Details|cloud.provider=gcp project\_id={{project\_id}} region={{region}} cloud.platform={{cloud.platform}} function\_name={{function\_name}} metric=function/execution\_count statistic=average  \| sum by project\_id, region, function\_name |
|Google Cloud Functions|Number of Function Execution|Metrics|Installed Apps/Google Cloud Functions/Google Cloud Functions -  Performance Overview|cloud.provider=gcp project\_id={{project\_id}} region={{region}} cloud.platform={{cloud.platform}} function\_name =\* metric=function/execution\_count statistic=average  \| sum |
|Google Cloud Functions|Outgoing Traffic by Function (in Bytes)|Metrics|Installed Apps/Google Cloud Functions/Google Cloud Functions - Performance Details|cloud.provider=gcp project\_id={{project\_id}} region={{region}} cloud.platform={{cloud.platform}} function\_name={{function\_name}} metric=function/network\_egress  statistic=average  \| sum by project\_id, region, function\_name|
|Google Cloud Functions|Recent Error Audit Events|Logs|Installed Apps/Google Cloud Functions/Google Cloud Functions - Audit Logs|\_sourceCategory={{Logsdatasource}}  logName principalEmail authorizationInfo "\\"type\\":\\"cloud\_function\\"" <br />\| json "message.data.logName" as log\_name<br />\| where log\_name matches "projects/\*/logs/cloudaudit.googleapis.com%2Factivity"<br />\| json "message.data.timestamp", "message.data.resource.labels", "message.data.protoPayload" as timestamp, labels, payload<br />\| json "message.data.severity" as severity<br />\| json field=labels "function\_name", "project\_id", "region" as function\_name, project\_id, region<br />\| where toLowerCase(project\_id) matches "{{project\_id}}" AND toLowerCase(region) matches "{{region}}" AND toLowerCase(function\_name) matches "{{function\_name}}"<br />\| json field=payload "authenticationInfo.principalEmail", "authorizationInfo[\*]" as user, permissions<br />\| parse regex field=permissions "\\"granted\\":(?\<granted\>[a-z]+)" multi nodrop<br />\| where granted="true"<br />\| parse regex field=permissions "\\"permission\\":\\"(?\<actionstring\>[a-zA-Z\\\\.]+)" multi<br />\| parse regex field=actionstring "(?\<action\>\\w+)\$" multi<br />\| where severity="ERROR"<br />\| json "message.data.protoPayload.status.code", "message.data.protoPayload.status.message" as errCode,errMsg<br />\| count as operations by timestamp,project\_id, function\_name, action, user,errCode,errMsg<br />\| fields -operations<br />\| sort by timestamp|
|Google Cloud Functions|Recent Failures|Logs|Installed Apps/Google Cloud Functions/Google Cloud Functions - Platform Logs|\_sourceCategory={{Logsdatasource}}  logName textPayload ("\\"severity\\":\\"WARNING\\"" or "\\"severity\\":\\"ERROR\\"" or "\\"severity\\":\\"CRITICAL\\"" or "\\"severity\\":\\"ALERT\\"" or "\\"severity\\":\\"EMERGENCY\\"")<br />\| json "message.data.logName" as log\_name<br />\| where log\_name matches "projects/\*/logs/cloudfunctions\*"<br />\| json "message.data.resource.labels", "message.data.severity", "message.data.timestamp", "message.data.textPayload" as labels, severity, timestamp, text<br />\| where !isEmpty(text)<br />\| json field=labels "function\_name", "project\_id", "region" as function\_name, project\_id, region<br />\| where toLowerCase(project\_id) matches "{{project\_id}}" AND toLowerCase(region) matches "{{region}}" AND toLowerCase(function\_name) matches "{{function\_name}}"<br />\|count as failures by timestamp, function\_name, project\_id, region, severity, text<br />\| fields timestamp,project\_id, function\_name, severity, text<br />\| sort by timestamp|
|Google Cloud Functions|Top 10 Functions by Average Latency (ms)|Logs|Installed Apps/Google Cloud Functions/Google Cloud Functions - Platform Logs|\_sourceCategory={{Logsdatasource}}  logName function\_name textPayload "\\"type\\":\\"cloud\_function\\"" <br />\| json "message.data.logName" as log\_name<br />\| where log\_name matches "projects/\*/logs/cloudfunctions.googleapis.com%2Fcloud-functions"<br />\| parse regex "\\"textPayload\\":\\"Function execution took (?\<latency\>[0-9]+) ms[^\\"]\*status"<br />\| json "message.data.resource.labels" as labels<br />\| json field=labels "function\_name", "project\_id", "region" as function\_name, project\_id, region<br />\| where toLowerCase(project\_id) matches "{{project\_id}}" AND toLowerCase(region) matches "{{region}}" AND toLowerCase(function\_name) matches "{{function\_name}}"<br />\| avg(latency) as avg\_ms, count as executions by function\_name, project\_id, region<br />\| top 10 function\_name, project\_id, region by avg\_ms, executions<br />\| fields project\_id,region,function\_name, avg\_ms|
|Google Cloud Functions|Top 10 Functions by Error Status|Logs|Installed Apps/Google Cloud Functions/Google Cloud Functions - Platform Logs|\_sourceCategory={{Logsdatasource}}  logName function\_name textPayload "\\"type\\":\\"cloud\_function\\"" <br />\| json "message.data.logName" as log\_name<br />\| where log\_name matches "projects/\*/logs/cloudfunctions.googleapis.com%2Fcloud-functions"<br />\| parse regex "\\"textPayload\\":\\"Function execution took (?\<latency\>[0-9]+) ms[^\\"]\*status[^\\"]\*: ?(?\<status\>[^\\"]+)\\""<br />\| json "message.data.resource.labels" as labels<br />\| json field=labels "function\_name", "project\_id", "region" as function\_name, project\_id, region<br />\| where toLowerCase(project\_id) matches "{{project\_id}}" AND toLowerCase(region) matches "{{region}}" AND toLowerCase(function\_name) matches "{{function\_name}}"<br />\| if (status in ("'ok'", "200"), 0, 1) as error<br />\|sum(error) as errors, count as executions by function\_name, project\_id, region<br />\| errors / executions \* 100 as error\_pct<br />\| top 10 function\_name, project\_id, region by errors, error\_pct, executions<br />\| fields project\_id, region, function\_name, errors, error\_pct |
|Google Cloud Functions|Top 10 Functions by Executions|Logs|Installed Apps/Google Cloud Functions/Google Cloud Functions - Platform Logs|\_sourceCategory={{Logsdatasource}}  logName function\_name "\\"type\\":\\"cloud\_function\\"" "\\"textPayload\\":\\"Function execution took"<br />\| json "message.data.logName" as log\_name<br />\| where log\_name matches "projects/\*/logs/cloudfunctions.googleapis.com%2Fcloud-functions"<br />\| json "message.data.resource.labels" as labels<br />\| json field=labels "function\_name", "project\_id", "region" as function\_name, project\_id, region<br />\| where toLowerCase(project\_id) matches "{{project\_id}}" AND toLowerCase(region) matches "{{region}}" AND toLowerCase(function\_name) matches "{{function\_name}}"<br />\|count as executions by function\_name, project\_id, region<br />\| top 10 function\_name, project\_id, region by executions<br />\| fields  project\_id, region,function\_name,executions|
|Google Cloud Functions|Unauthorized Audit Events|Logs|Installed Apps/Google Cloud Functions/Google Cloud Functions - Audit Logs|\_sourceCategory={{Logsdatasource}}  logName principalEmail authorizationInfo "\\"type\\":\\"cloud\_function\\"" <br />\| json "message.data.logName" as log\_name<br />\| where log\_name matches "projects/\*/logs/cloudaudit.googleapis.com%2Factivity"<br />\| json "message.data.timestamp", "message.data.resource.labels", "message.data.protoPayload" as timestamp, labels, payload<br />\| json field=labels "function\_name", "project\_id", "region" as function\_name, project\_id, region<br />\| json field=payload "authenticationInfo.principalEmail", "authorizationInfo[\*]" as user, permissions<br />\| parse regex field=permissions "\\"granted\\":(?\<granted\>[a-z]+)" multi nodrop<br />\| where granted="false"<br />\| parse regex field=permissions "\\"permission\\":\\"(?\<action\>[a-zA-Z\\\\.]+)" multi<br />\| where toLowerCase(project\_id) matches "{{project\_id}}" AND toLowerCase(region) matches "{{region}}" AND toLowerCase(function\_name) matches "{{function\_name}}"<br />\|count as operations by timestamp,project\_id,region, function\_name, action, user<br />\| fields -operations<br />\| sort by timestamp|
|Google Cloud Functions|User Memory|Metrics|Installed Apps/Google Cloud Functions/Google Cloud Functions - Performance Details|project\_id={{project\_id}} region={{region}} cloud.platform={{cloud.platform}} function\_name={{function\_name}} metric=function/user\_memory\_bytes  statistic=average  \| sum by project\_id, region, function\_name|

