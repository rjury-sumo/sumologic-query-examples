# Azure Service Bus

## Searches

### Log Searches

- **Activity by Location**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Overview 
- **Distribution  by Operation Type (Read, Write and Delete)**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Administrative Operations 
- **Distribution by Operations**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Administrative Operations 
- **Distribution by Status**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Administrative Operations 
- **Failed Policy Events**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Policy and Recommendation 
- **Failures by Entity Type**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Errors 
- **IP Filtering actions**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Overview 
- **Operation Result Distribution**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Errors 
- **Recent Delete Operations**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Administrative Operations 
- **Recent Recommendation Events**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Policy and Recommendation 
- **Recent Write Operations**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Administrative Operations 
- **Requests by Caller**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Overview 
- **Requests by Event Type**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Overview 
- **Top 10 Failed Operations**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Errors 
- **Top 10 Failed Queues**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Errors 
- **Top 10 Failed Topics**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Errors 
- **Top 10 IPs  with Deny Connection**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Overview 
- **Top 10 Operations That Caused The Most Errors**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Administrative Operations 
- **Top 3 Common Error Messages by Entity**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Errors 
- **Total Failed Policy Events**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Policy and Recommendation 
- **Total Recommendation Events**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Policy and Recommendation 
- **Total Success Policy Events**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Policy and Recommendation 
- **Total Success Policy Events**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Policy and Recommendation 
- **Users / Applications by Operation type**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Administrative Operations

### Metric Searches

- **Abandon Message**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Messages 
- **Abandon Message**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Messages 
- **Active Connections**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Traffic 
- **Active Connections**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Traffic 
- **Active Messages**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Messages 
- **Average Connections Closed**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Traffic 
- **Average Connections Opened**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Traffic 
- **Average Scheduled Messages**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Messages 
- **Average Server Send Latency**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Traffic 
- **Average Server Send Latency(ms)**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Traffic 
- **Average Server Send Latency(ms)**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Traffic 
- **Average Server Send Latency(ms)**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Overview 
- **Completed Messages**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Messages 
- **Completed Messages**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Messages 
- **Connections Closed**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Traffic 
- **Connections Opened**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Traffic 
- **Dead Lettered Messages**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Messages 
- **Incoming Message Rate**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Traffic 
- **Incoming Messages**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Messages 
- **Incoming Messages**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Messages 
- **Incoming Requests**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Traffic 
- **Incoming Requests**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Traffic 
- **Incoming vs Outgoing Message Difference**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Overview 
- **Max Namespace Cpu Usage (%)**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Overview 
- **Max Namespace Cpu Usage (%)**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Overview 
- **Max Namespace Memory Usage (%)**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Overview 
- **Max Namespace Memory Usage (%)**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Overview 
- **Maximum Active Messages**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Messages 
- **Maximum Dead Lettered Messages**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Messages 
- **Maximum Total Messages**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Messages 
- **Outgoing Messages**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Messages 
- **Outgoing Messages**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Messages 
- **Outgoing Messages Rate**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Traffic 
- **Scheduled Messages**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Messages 
- **Size by Entity**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Traffic 
- **Total Abandon Messages**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Errors 
- **Total Abandon Messages**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Errors 
- **Total Dead Lettered Messages**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Errors 
- **Total Dead Lettered Messages**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Errors 
- **Total Errors**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Traffic 
- **Total Errors**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Overview 
- **Total Messages**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Messages 
- **Total Server Errors**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Errors 
- **Total Server Errors**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Errors 
- **Total User Errors**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Errors 
- **Total User Errors**: from Dashboard: Installed Apps/Azure Service Bus/Azure Service Bus - Errors

## Search Table

|app\_topic|search\_name|type|origin|search|
|:--|:--|:--|:--|:--|
|Azure Service Bus|Abandon Message|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Messages|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=AbandonMessage statistic=total \| quantize using sum \| sum by resource\_group, resource\_name, entityname|
|Azure Service Bus|Abandon Message|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Messages|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=AbandonMessage statistic=total \| quantize using sum \| sum by resource\_group, resource\_name, entityname|
|Azure Service Bus|Active Connections|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />metric=ActiveConnections statistic=total \| quantize using sum \| sum by resource\_group, resource\_name|
|Azure Service Bus|Active Connections|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />metric=ActiveConnections statistic=total \| quantize using sum \| sum by resource\_group, resource\_name|
|Azure Service Bus|Active Messages|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Messages|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=ActiveMessages statistic=maximum \| quantize using max \| max by resource\_group, resource\_name, entityname|
|Azure Service Bus|Activity by Location|Logs|Installed Apps/Azure Service Bus/Azure Service Bus - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} RuntimeAuditLogs<br />\| json "category", "ClientIp" as category, ipAddress<br />\| where category="RuntimeAuditLogs"<br />\| count by ipAddress<br />\| lookup latitude, longitude from geo://location on ip = ipAddress<br />\| where !isNull(latitude)<br />\| sum(\_count) as count by latitude, longitude|
|Azure Service Bus|Average Connections Closed|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}}<br />// !(entityname=-NamespaceOnlyMetric-)<br />metric=ConnectionsClosed statistic=average \| quantize using avg \| avg by resource\_group, resource\_name, entityname|
|Azure Service Bus|Average Connections Opened|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}}<br />// !(entityname=-NamespaceOnlyMetric-)<br />metric=ConnectionsOpened statistic=average \| quantize using avg \| avg by resource\_group, resource\_name, entityname|
|Azure Service Bus|Average Scheduled Messages|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Messages|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=ScheduledMessages statistic=average \| quantize using avg \| avg by resource\_group, resource\_name, entityname|
|Azure Service Bus|Average Server Send Latency|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}}<br />metric=ServerSendLatency statistic=average \| quantize using avg \| avg by resource\_group, resource\_name, entityname|
|Azure Service Bus|Average Server Send Latency(ms)|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} !(entityname=-NamespaceOnlyMetric-)<br />metric=ServerSendLatency statistic=average \| quantize using avg \| avg by resource\_group, resource\_name, entityname|
|Azure Service Bus|Average Server Send Latency(ms)|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} !(entityname=-NamespaceOnlyMetric-)<br />metric=ServerSendLatency statistic=average \| quantize using avg \| avg by resource\_group, resource\_name, entityname|
|Azure Service Bus|Average Server Send Latency(ms)|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />metric=ServerSendLatency statistic=average \| quantize using avg \| avg by resource\_group, resource\_name, entityname|
|Azure Service Bus|Completed Messages|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Messages|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=CompleteMessage statistic=total \| quantize using sum \| sum by resource\_group, resource\_name, entityname|
|Azure Service Bus|Completed Messages|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Messages|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=CompleteMessage statistic=total \| quantize using sum \| sum by resource\_group, resource\_name, entityname|
|Azure Service Bus|Connections Closed|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}}<br />// !(entityname=-NamespaceOnlyMetric-)<br />metric=ConnectionsClosed statistic=average \| quantize using avg \| avg by resource\_group, resource\_name, entityname|
|Azure Service Bus|Connections Opened|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}}<br />// !(entityname=-NamespaceOnlyMetric-)<br />metric=ConnectionsOpened statistic=average \| quantize using avg \| avg by resource\_group, resource\_name, entityname|
|Azure Service Bus|Dead Lettered Messages|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Messages|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=DeadletteredMessages statistic=maximum  \| quantize using max \| max by resource\_group, resource\_name, entityname|
|Azure Service Bus|Distribution  by Operation Type (Read, Write and Delete)|Logs|Installed Apps/Azure Service Bus/Azure Service Bus - Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} provider\_name={{provider\_name}} resource\_type={{resource\_type}} Administrative <br />\| json "resultType", "category", "operationName", "resourceId" as resultType, category, operationName, resourceid<br />\| where (resultType="Accept" or resultType="Success") and category="Administrative"<br />\| "OTHERS" as operationType<br />\| if (toUppercase(operationName) matches /WRITE/, "WRITE", operationType) as operationType <br />\| if (toUppercase(operationName) matches /READ/, "READ", operationType) as operationType <br />\| if (toUppercase(operationName) matches /DELETE/, "DELETE", operationType) as operationType <br />\| count by operationType<br />\| sort by \_count, operationType asc|
|Azure Service Bus|Distribution by Operations|Logs|Installed Apps/Azure Service Bus/Azure Service Bus - Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} provider\_name={{provider\_name}} resource\_type={{resource\_type}} Administrative <br />\| json "resultType", "category", "operationName", "resourceId" as resultType, category, operationName, resourceid<br />\| where (resultType="Accept" or resultType="Success") and category="Administrative" <br />\| parse field=operationName "\*/\*/\*" as provider\_name, resource\_type, operation\_name<br />\| count by operation\_name<br />\| order by \_count, operation\_name asc|
|Azure Service Bus|Distribution by Status|Logs|Installed Apps/Azure Service Bus/Azure Service Bus - Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} provider\_name={{provider\_name}} resource\_type={{resource\_type}} Administrative <br />\| json "resultType", "category" as resultType, category<br />\| where category="Administrative" <br />\| count by resultType<br />\| order by \_count, resultType asc|
|Azure Service Bus|Failed Policy Events|Logs|Installed Apps/Azure Service Bus/Azure Service Bus - Policy and Recommendation|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Policy Failure<br />\| JSON "category", "resultType", "properties.message", "properties.resourceLocation", "properties.entity", "properties.policies" as category, resultType, message, resourceLocation, entity, policies<br />\| where category="Policy" and resultType="Failure"<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count as Count by time, level, resultType, providers, resource\_group, resource\_name, location, policies|
|Azure Service Bus|Failures by Entity Type|Logs|Installed Apps/Azure Service Bus/Azure Service Bus - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} DiagnosticErrorLogs<br />\| json "category", "EntityType", "EntityName" as category, EntityType, EntityName<br />\| where category = "DiagnosticErrorLogs"  and EntityName matches "{{entityname}}"<br />\| count as Count by EntityType<br />\| sort by Count, EntityType|
|Azure Service Bus|Incoming Message Rate|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}}<br />metric=IncomingMessages statistic=total \| quantize using sum \| sum by resource\_group, resource\_name, entityname \| rate|
|Azure Service Bus|Incoming Messages|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Messages|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=IncomingMessages statistic=total \| quantize using sum \| sum by resource\_group, resource\_name, entityname|
|Azure Service Bus|Incoming Messages|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Messages|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=IncomingMessages statistic=total \| quantize using sum \| sum by resource\_group, resource\_name, entityname|
|Azure Service Bus|Incoming Requests|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=IncomingRequests statistic=total \| quantize using sum \| sum by resource\_group, resource\_name, entityname|
|Azure Service Bus|Incoming Requests|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=IncomingRequests statistic=total \| quantize using sum \| sum by resource\_group, resource\_name, entityname|
|Azure Service Bus|Incoming vs Outgoing Message Difference|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} <br />metric=OutgoingMessages statistic=total \| quantize using sum \| sum by resource\_group, resource\_name, entityname |
|Azure Service Bus|IP Filtering actions|Logs|Installed Apps/Azure Service Bus/Azure Service Bus - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} VNetAndIPFilteringLogs<br />\| json "category", "action" as category, action<br />\| where category="VNetAndIPFilteringLogs"<br />\| count by action<br />\| sort by \_count, action|
|Azure Service Bus|Max Namespace Cpu Usage (%)|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />metric=NamespaceCpuUsage statistic=maximum \| quantize using max \| max by resource\_group, resource\_name|
|Azure Service Bus|Max Namespace Cpu Usage (%)|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />metric=NamespaceCpuUsage statistic=maximum \| quantize using max \| max by resource\_group, resource\_name|
|Azure Service Bus|Max Namespace Memory Usage (%)|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />metric=NamespaceMemoryUsage statistic=maximum \| quantize using max \| max by resource\_group, resource\_name|
|Azure Service Bus|Max Namespace Memory Usage (%)|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />metric=NamespaceMemoryUsage statistic=maximum \| quantize using max \| max by resource\_group, resource\_name|
|Azure Service Bus|Maximum Active Messages|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Messages|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=ActiveMessages statistic=maximum \| quantize using max \| max by resource\_group, resource\_name, entityname|
|Azure Service Bus|Maximum Dead Lettered Messages|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Messages|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=DeadletteredMessages statistic=maximum  \| quantize using max \| max by resource\_group, resource\_name, entityname|
|Azure Service Bus|Maximum Total Messages|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Messages|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=Messages statistic=maximum \| quantize using max \| max by resource\_group, resource\_name, entityname|
|Azure Service Bus|Operation Result Distribution|Logs|Installed Apps/Azure Service Bus/Azure Service Bus - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} DiagnosticErrorLogs<br />\| json "category", "OperationResult", "EntityName" as category, OperationResult, EntityName<br />\| where category = "DiagnosticErrorLogs"  and EntityName matches "{{entityname}}"<br />\| count by OperationResult<br />\| sort by \_count, OperationResult|
|Azure Service Bus|Outgoing Messages|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Messages|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=OutgoingMessages statistic=total \| quantize using sum \| sum by resource\_group, resource\_name, entityname|
|Azure Service Bus|Outgoing Messages|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Messages|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=OutgoingMessages statistic=total \| quantize using sum \| sum by resource\_group, resource\_name, entityname|
|Azure Service Bus|Outgoing Messages Rate|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}}<br />metric=OutgoingMessages statistic=total \| quantize using sum \| sum by resource\_group, resource\_name, entityname \| rate|
|Azure Service Bus|Recent Delete Operations|Logs|Installed Apps/Azure Service Bus/Azure Service Bus - Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name = {{resource\_name}} provider\_name={{provider\_name}} resource\_type={{resource\_type}}  Administrative <br />\| JSON "properties.statusCode", "properties.message", "resultType", "category", "operationName", "callerIpAddress", "resultSignature", "level", "identity.claims.idtyp", "identity.claims.name", "identity.claims.appid", "properties.entity", "\$['identity']['claims']['http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name']","\$['identity']['claims']['http://schemas.microsoft.com/claims/authnmethodsreferences']" as statusCode, message, resultType, category, operationName, callerIpAddress, resultSignature, level, idtyp, name, appid, entity, identity\_claims\_name, authmethods nodrop<br />\| where resultType in ("Accept", "Success") and category="Administrative" and toUppercase(operationName) matches /DELETE/ <br />\| if (idtyp =="user", name, appid) as name<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count by \_messageTime, time, resource\_name, callerIpAddress, name, identity\_claims\_name, authmethods, resultSignature, statusCode, message, entity<br />\| sort by \_messageTime desc<br />\| limit 20 <br />\| fields -\_count,\_messageTime|
|Azure Service Bus|Recent Recommendation Events|Logs|Installed Apps/Azure Service Bus/Azure Service Bus - Policy and Recommendation|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Recommendation<br />\| JSON "category", "operationName", "resultType", "properties.recommendationName", "properties.recommendationCategory", "properties.recommendationImpact", "properties.recommendationResourceLink" as category, operationName, resultType, recommendationName, recommendationCategory, recommendationImpact, recommendationResourceLink <br />\| where category="Recommendation"<br />\| parse field=operationName "\*/\*/\*/\*" as provider, category, operation\_name, action nodrop<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count as Count by time, operation\_name, resource\_name, resultType, recommendationName, recommendationCategory, recommendationImpact, recommendationResourceLink|
|Azure Service Bus|Recent Write Operations|Logs|Installed Apps/Azure Service Bus/Azure Service Bus - Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name = {{resource\_name}} provider\_name={{provider\_name}} resource\_type={{resource\_type}}  Administrative <br />\| JSON "properties.statusCode", "properties.message", "resultType", "category", "operationName", "callerIpAddress", "resultSignature", "level", "identity.claims.idtyp", "identity.claims.name", "identity.claims.appid", "\$['identity']['claims']['http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name']","\$['identity']['claims']['http://schemas.microsoft.com/claims/authnmethodsreferences']"  as statusCode, message, resultType, category, operationName, callerIpAddress, resultSignature, level, idtyp, name, appid, identity\_claims\_name, authmethods nodrop<br />\| where category="Administrative" and resultType in ("Accept", "Success") and toUppercase(operationName) matches /WRITE/<br />\| if (idtyp =="user", name, appid) as name<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count by \_messageTime, time, resource\_name, callerIpAddress, name, identity\_claims\_name, authmethods, resultSignature, statusCode, message<br />\| sort by \_messageTime desc<br />\| limit 20 <br />\| fields -\_count,\_messageTime|
|Azure Service Bus|Requests by Caller|Logs|Installed Apps/Azure Service Bus/Azure Service Bus - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} OperationalLogs<br />\| json "category", "Caller" as category, Caller<br />\| where category="OperationalLogs"<br />\| count by Caller<br />\| sort by \_count, Caller|
|Azure Service Bus|Requests by Event Type|Logs|Installed Apps/Azure Service Bus/Azure Service Bus - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} OperationalLogs<br />\| json "category", "EventName" as category, EventName<br />\| where category="OperationalLogs"<br />\| count by EventName<br />\| sort by \_count, EventName|
|Azure Service Bus|Scheduled Messages|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Messages|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=ScheduledMessages statistic=average \| quantize using avg \| avg by resource\_group, resource\_name, entityname|
|Azure Service Bus|Size by Entity|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=Size  statistic=maximum  \| quantize using max \| max by resource\_group, resource\_name, entityname|
|Azure Service Bus|Top 10 Failed Operations|Logs|Installed Apps/Azure Service Bus/Azure Service Bus - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} DiagnosticErrorLogs<br />\| json "category", "ActivityName", "EntityName" as category, ActivityName, EntityName<br />\| where category = "DiagnosticErrorLogs" and EntityName matches "{{entityname}}"<br />\| count by activityName<br />\| sort by \_count, activityName<br />\| limit 10|
|Azure Service Bus|Top 10 Failed Queues|Logs|Installed Apps/Azure Service Bus/Azure Service Bus - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} DiagnosticErrorLogs<br />\| json "category", "EntityType", "EntityName" as category, EntityType, topic\_name<br />\| where category = "DiagnosticErrorLogs" and EntityType="Queue" and topic\_name matches "{{entityname}}"<br />\| count by resource\_group, resource\_name, topic\_name<br />\| sort by \_count<br />\| limit 10|
|Azure Service Bus|Top 10 Failed Topics|Logs|Installed Apps/Azure Service Bus/Azure Service Bus - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} DiagnosticErrorLogs<br />\| json "category", "EntityType", "EntityName" as category, EntityType, topic\_name<br />\| where category = "DiagnosticErrorLogs" and EntityType="Topic" and topic\_name matches "{{entityname}}"<br />\| count by resource\_group, resource\_name, topic\_name<br />\| sort by \_count<br />\| limit 10|
|Azure Service Bus|Top 10 IPs  with Deny Connection|Logs|Installed Apps/Azure Service Bus/Azure Service Bus - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} VNetAndIPFilteringLogs<br />\| json "category", "action", "ipAddress" as category, action, ipAddress<br />\| where category="VNetAndIPFilteringLogs" and action="Deny Connection"<br />\| count by ipAddress \| sort by \_count desc \| limit 10|
|Azure Service Bus|Top 10 Operations That Caused The Most Errors|Logs|Installed Apps/Azure Service Bus/Azure Service Bus - Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name = {{resource\_name}} provider\_name={{provider\_name}} resource\_type={{resource\_type}}  Administrative<br />\| json "resultType", "operationName", "properties.statusMessage", "category"  as resultType, operationName, failureMessage, category nodrop<br />\| parse field=operationname "\*/\*/\*" as provider\_name, resource\_type, operation nodrop<br />\| where category="Administrative" and (resultType="Failure" or resultType="Unknown")<br />\| if (isBlank(failureMessage), "Unknown Error", failureMessage) as failureMessage<br />\| count as Count by resource\_name, operation, failureMessage<br />\| order by Count <br />\| limit 10|
|Azure Service Bus|Top 3 Common Error Messages by Entity|Logs|Installed Apps/Azure Service Bus/Azure Service Bus - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} DiagnosticErrorLogs<br />\| json "category", "EntityType", "EntityName", "ErrorMessage" as category, EntityType, EntityName, ErrorMessage<br />\| where category = "DiagnosticErrorLogs" and EntityName matches "{{entityname}}"<br />\| count by resource\_group, resource\_name, EntityType, EntityName, ErrorMessage<br />\| topk(3, \_count) by resource\_group, resource\_name, EntityType, EntityName|
|Azure Service Bus|Total Abandon Messages|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=AbandonMessage statistic=total \| quantize using sum \| sum by resource\_group, resource\_name, entityname |
|Azure Service Bus|Total Abandon Messages|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=AbandonMessage statistic=total \| quantize using sum \| avg by resource\_group, resource\_name, entityname |
|Azure Service Bus|Total Dead Lettered Messages|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=DeadletteredMessages statistic=total \| quantize using sum \| sum by resource\_group, resource\_name, entityname |
|Azure Service Bus|Total Dead Lettered Messages|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=DeadletteredMessages statistic=maximum \| quantize using max \| avg by resource\_group, resource\_name, entityname |
|Azure Service Bus|Total Errors|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />(metric=UserErrors or metric=ServerErrors) statistic=total \| quantize using sum \| sum by resource\_group, resource\_name, entityname|
|Azure Service Bus|Total Errors|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}}<br />(metric=UserErrors or metric=ServerErrors)  statistic=total \| quantize using sum \| sum by resource\_group, resource\_name, entityname|
|Azure Service Bus|Total Failed Policy Events|Logs|Installed Apps/Azure Service Bus/Azure Service Bus - Policy and Recommendation|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} location={{location}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Policy Failure<br />\| JSON "category", "resultType" as category, resultType<br />\| where category="Policy" and resultType="Failure"<br />\| count as Count|
|Azure Service Bus|Total Messages|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Messages|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=Messages statistic=maximum \| quantize using max \| max by resource\_group, resource\_name, entityname|
|Azure Service Bus|Total Recommendation Events|Logs|Installed Apps/Azure Service Bus/Azure Service Bus - Policy and Recommendation|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Recommendation<br />\| JSON "category"<br />\| where category="Recommendation"<br />\| count |
|Azure Service Bus|Total Server Errors|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=ServerErrors statistic=total \| quantize using sum \| sum by resource\_group, resource\_name, entityname|
|Azure Service Bus|Total Server Errors|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=ServerErrors statistic=total \| quantize using sum \| sum by resource\_group, resource\_name, entityname |
|Azure Service Bus|Total Success Policy Events|Logs|Installed Apps/Azure Service Bus/Azure Service Bus - Policy and Recommendation|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Policy Success<br />\| JSON "category", "resultType", "properties.message", "properties.resourceLocation", "properties.entity", "properties.policies" as category, resultType, message, resourceLocation, entity, policies<br />\| parse field=entity "/subscriptions/\*/resourceGroups/\*/providers/\*/\*/\*" as subscription\_id, resource\_group, providers, virtualMachineScaleSets, aks nodrop<br />\| where category="Policy" and (resultType="Success" or resultType="Accept")<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count as Count by time, level, resultType, resource\_group, resource\_name, location, policies|
|Azure Service Bus|Total Success Policy Events|Logs|Installed Apps/Azure Service Bus/Azure Service Bus - Policy and Recommendation|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} location={{location}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Policy <br />\| JSON "category", "resultType" as category, resultType<br />\| where category="Policy" and (resultType="Success" or resultType="Accept")<br />\| count as Count|
|Azure Service Bus|Total User Errors|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=UserErrors statistic=total \| quantize using sum \| sum by resource\_group, resource\_name, entityname|
|Azure Service Bus|Total User Errors|Metrics|Installed Apps/Azure Service Bus/Azure Service Bus - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} entityname={{entityname}} !(entityname=-NamespaceOnlyMetric-)<br />metric=UserErrors statistic=total \| quantize using sum \| sum by resource\_group, resource\_name, entityname|
|Azure Service Bus|Users / Applications by Operation type|Logs|Installed Apps/Azure Service Bus/Azure Service Bus - Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} provider\_name={{provider\_name}} resource\_type={{resource\_type}} Administrative <br />\| JSON "properties.statusCode", "properties.message", "resultType", "category", "operationName", "callerIpAddress", "resultSignature", "level", "identity.claims.idtyp", "identity.claims.name", "identity.claims.appid" as statusCode, message, resultType, category, operationName, callerIpAddress, resultSignature, level, idtyp, name, appid nodrop<br />\| where resultType in ("Accept", "Success") and category="Administrative" <br />\| if (idtyp =="user", name, appid) as name<br />\| "Others" as operationType<br />\| if (toUppercase(operationName) matches /WRITE/, "WRITE", operationType) as operationType <br />\| if (toUppercase(operationName) matches /READ/, "READ", operationType) as operationType <br />\| if (toUppercase(operationName) matches /DELETE/, "DELETE", operationType) as operationType <br />\| count by name, operationType<br />\| transpose row name column operationType|

