# Azure Cache for Redis

## Searches

### Log Searches

- **Connections by Location**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Non-Enterprise) 
- **Connections by Location**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Enterprise) 
- **Connections by Resource Name**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Non-Enterprise) 
- **Disconnection Events**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Enterprise) 
- **Distribution  by Operation Type (Read, Write and Delete)**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Administrative Operations 
- **Distribution by Operations**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Administrative Operations 
- **Distribution by Status**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Administrative Operations 
- **Event Types**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Enterprise) 
- **Failed Policy Events**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Policy and Recommendations 
- **Failure by Operation**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Enterprise) 
- **Failure by Operation**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Enterprise) 
- **MSEntra Authentication Audit Details**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - MSEntra Authentication Audit 
- **Recent Delete Operations**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Administrative Operations 
- **Recent Recommendation Events**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Policy and Recommendations 
- **Recent Write Operations**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Administrative Operations 
- **Requests by Location**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - MSEntra Authentication Audit 
- **Requests by Resource Name**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - MSEntra Authentication Audit 
- **Requests by Username**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - MSEntra Authentication Audit 
- **Top 10 IPs by Connection Count**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Non-Enterprise) 
- **Top 10 operations that caused the most errors**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Administrative Operations 
- **Total Connections**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Enterprise) 
- **Total Connections**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Non-Enterprise) 
- **Total Failed Policy Events**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Policy and Recommendations 
- **Total Recommendation Events**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Policy and Recommendations 
- **Total Success Policy Events**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Policy and Recommendations 
- **Total Success Policy Events**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Policy and Recommendations 
- **Total Unique Connected Clients**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Enterprise) 
- **Total Unique Connected Clients**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Non-Enterprise) 
- **Users / Applications by Operation type**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Administrative Operations

### Metric Searches

- **Average Cache Latency (microseconds)**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Performance 
- **Cache Hit vs Miss**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Enterprise) 
- **Cache Hit vs Miss**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Non-Enterprise) 
- **Cache Hits**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Performance 
- **Cache Hits**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Performance 
- **Cache Misses**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Performance 
- **Cache Misses**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Performance 
- **Cache Read Rate**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Performance 
- **Cache Read vs Write**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Enterprise) 
- **Cache Read vs Write**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Non-Enterprise) 
- **Cache Write Rate**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Performance 
- **Connected Clients**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Enterprise) 
- **Connected Clients**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Non-Enterprise) 
- **Connected Clients (Instance Based)**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Non-Enterprise) 
- **Geo-replication Connectivity Lag - fetched from Geo-Secondary Cache**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Geo Replication 
- **Geo-replication Data Sync Offset - fetched from Geo-Primary Cache**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Geo Replication 
- **Geo-replication Full Sync Events - fetched from Geo-Secondary Cache**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Geo Replication 
- **Geo-replication Healthy - fetched from Geo-Secondary Cache**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Geo Replication 
- **Gets**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Operations 
- **Gets**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Operations 
- **Max 99th percentile latency (microseconds)**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Performance 
- **Max 99th percentile latency (microseconds)**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Performance 
- **Max Cache Read (Bytes / sec)**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Performance 
- **Max Cache Write (Bytes / sec)**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Performance 
- **Max CPU (%)**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Overview 
- **Max CPU Utilisation (%)**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Overview 
- **Max Number of Connected Clients**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Overview 
- **Max Number of Connected Clients**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Overview 
- **Max Number of Errors**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Overview 
- **Max Number of Errors**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Overview 
- **Max Operations (/seconds)**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Operations 
- **Max Operations (/seconds)**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Operations 
- **Max Server Load (%)**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Overview 
- **Max Server Load (%)**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Overview 
- **Max Used Memory (Bytes)**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Overview 
- **Max Used Memory (Bytes)**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Overview 
- **Max Used Memory Utilisation (%)**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Overview 
- **Max Used Memory Utilisation (%)**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Overview 
- **Number of  Evicted Keys**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Operations 
- **Number of  Expired Keys**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Operations 
- **Number of Evicted Keys**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Operations 
- **Number of Expired Keys**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Operations 
- **Sets**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Operations 
- **Sets**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Operations 
- **Total Operations**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Operations 
- **Total Operations**: from Dashboard: Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Operations

## Search Table

|app\_topic|search\_name|type|origin|search|
|:--|:--|:--|:--|:--|
|Azure Cache for Redis|Average Cache Latency (microseconds)|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} provider\_name={{provider\_name}} location={{location}} resource\_type={{resource\_type}} metric=cacheLatency statistic=average \| quantize using avg \| avg by resource\_group, resource\_name |
|Azure Cache for Redis|Cache Hit vs Miss|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Non-Enterprise)|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=cachehits statistic=total \| quantize using sum \| sum|
|Azure Cache for Redis|Cache Hit vs Miss|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Enterprise)|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=cachehits statistic=total \| quantize using sum \| sum|
|Azure Cache for Redis|Cache Hits|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=cachehits statistic=total \| quantize using sum \| sum by resource\_group, resource\_name|
|Azure Cache for Redis|Cache Hits|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}  metric=cachehits statistic=total \| quantize using avg \| avg by resource\_group, resource\_name |
|Azure Cache for Redis|Cache Misses|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=cachemisses statistic=total \| quantize using avg \| avg by resource\_group, resource\_name |
|Azure Cache for Redis|Cache Misses|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=cachemisses statistic=total \| quantize using sum \| sum by resource\_group, resource\_name|
|Azure Cache for Redis|Cache Read Rate|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=cacheRead statistic=maximum \| quantize using max \| max by resource\_group, resource\_name |
|Azure Cache for Redis|Cache Read vs Write|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Non-Enterprise)|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=cacheRead statistic=maximum \| quantize using max \| avg|
|Azure Cache for Redis|Cache Read vs Write|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Enterprise)|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=cacheRead statistic=maximum \| quantize using max \| max|
|Azure Cache for Redis|Cache Write Rate|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=cacheWrite statistic=maximum \| quantize using max \| max by resource\_group, resource\_name |
|Azure Cache for Redis|Connected Clients|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Enterprise)|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=connectedclients statistic=maximum \| quantize using max \| max by resource\_group, resource\_name|
|Azure Cache for Redis|Connected Clients|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Non-Enterprise)|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=connectedclients statistic=maximum \| quantize using max \| max by resource\_group, resource\_name|
|Azure Cache for Redis|Connected Clients (Instance Based)|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Non-Enterprise)|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=allconnectedclients statistic=maximum \| quantize using max \| max by resource\_group, resource\_name|
|Azure Cache for Redis|Connections by Location|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Enterprise)|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} ConnectionEvents clientIP<br />\| json "category", "properties.clientIP" as category, clientIP<br />\| where category="ConnectionEvents"<br />\| count by clientIP<br />\| lookup latitude, longitude from geo://location on ip = clientIP<br />\| where !isNull(latitude)<br />\| sum(\_count) as count by latitude, longitude|
|Azure Cache for Redis|Connections by Location|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Non-Enterprise)|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} ConnectedClientList<br />\| json "category", "properties.connectedClients" as category, connectedClients<br />\| where category="ConnectedClientList"<br />\| json "properties.connectedClients[\*]" as client\_obj<br />\| parse regex field=client\_obj "(?\<client\_conn\_info\>\\{[^\\{]+\\})" multi<br />\| json field=client\_conn\_info "ip", "count" as client\_ip, client\_count<br />\| count by client\_ip, client\_count<br />\| lookup latitude, longitude from geo://location on ip = client\_ip<br />\| where !isNull(latitude)<br />\| sum(client\_count) as count by latitude, longitude|
|Azure Cache for Redis|Connections by Resource Name|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Non-Enterprise)|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} ConnectedClientList<br />\| json "category", "properties.connectedClients" as category, connectedClients<br />\| where category="ConnectedClientList"<br />\| json "properties.connectedClients[\*]" as client\_obj<br />\| parse regex field=client\_obj "(?\<client\_conn\_info\>\\{[^\\{]+\\})" multi<br />\| json field=client\_conn\_info "ip", "count" as client\_ip, client\_count<br />\| sum(client\_count) as client\_count by resource\_name<br />\| sort by client\_count, resource\_name asc|
|Azure Cache for Redis|Disconnection Events|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Enterprise)|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} ConnectionEvents eventType close\_conn<br />\| JSON "category", "properties.eventType", "properties.clientIP" as category, eventType, clientIP<br />\| where category="ConnectionEvents" and eventType="close\_conn"<br />\| count as Count by time, clientIP, resource\_name, resource\_group|
|Azure Cache for Redis|Distribution  by Operation Type (Read, Write and Delete)|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} provider\_name={{provider\_name}} resource\_type={{resource\_type}} Administrative <br />\| json "resultType", "category", "operationName", "resourceId" as resultType, category, operationName, resourceid<br />\| where (resultType="Accept" or resultType="Success") and category="Administrative"<br />\| "OTHERS" as operationType<br />\| if (toUppercase(operationName) matches /WRITE/, "WRITE", operationType) as operationType <br />\| if (toUppercase(operationName) matches /READ/, "READ", operationType) as operationType <br />\| if (toUppercase(operationName) matches /DELETE/, "DELETE", operationType) as operationType <br />\| count by operationType<br />\| sort by \_count, operationType asc|
|Azure Cache for Redis|Distribution by Operations|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} provider\_name={{provider\_name}} resource\_type={{resource\_type}} Administrative <br />\| json "resultType", "category", "operationName", "resourceId" as resultType, category, operationName, resourceid<br />\| where (resultType="Accept" or resultType="Success") and category="Administrative" <br />\| count by operationName<br />\| order by \_count, operationName asc|
|Azure Cache for Redis|Distribution by Status|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} provider\_name={{provider\_name}} resource\_type={{resource\_type}} Administrative <br />\| json "resultType", "category" as resultType, category<br />\| where category="Administrative" <br />\| count by resultType<br />\| order by \_count, resultType asc|
|Azure Cache for Redis|Event Types|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Enterprise)|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} ConnectionEvents eventType<br />\| JSON "category", "properties.eventType", "properties.clientIP" as category, eventType, clientIP<br />\| where category="ConnectionEvents"<br />\| count as Count by eventType<br />\| sort by Count, eventType asc|
|Azure Cache for Redis|Failed Policy Events|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Policy and Recommendations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Policy Failure<br />\| JSON "category", "resultType", "properties.message", "properties.resourceLocation", "properties.entity", "properties.policies" as category, resultType, message, resourceLocation, entity, policies<br />\| where category="Policy" and resultType="Failure"<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count as Count by time, level, resultType, providers, resource\_group, resource\_name, location, policies|
|Azure Cache for Redis|Failure by Operation|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Enterprise)|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} ConnectionEvents operationName<br />\| JSON "category", "operationName", "properties.eventType", "properties.eventStatus", "properties.clientIP" as category, operationName, eventType, eventStatus, clientIP<br />\| where category="ConnectionEvents" and eventType="auth" and eventStatus != 2 and eventStatus != 8 and eventStatus != 7<br />\| parse field=operationName "Microsoft.Cache/redisEnterprise/databases/ConnectionEvents/\*" as operation<br />\| count as Count by operation<br />\| sort by Count, operation asc|
|Azure Cache for Redis|Failure by Operation|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Enterprise)|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} ConnectionEvents operationName<br />\| JSON "category", "operationName", "properties.eventType", "properties.eventStatus", "properties.clientIP" as category, operationName, eventType, eventStatus, clientIP<br />\| where category="ConnectionEvents" and eventType="auth" and eventStatus != 2 and eventStatus != 8 and eventStatus != 7<br />\| parse field=operationName "Microsoft.Cache/redisEnterprise/databases/ConnectionEvents/\*" as operation<br />\| count as Count by operation<br />\| sort by Count, operation asc|
|Azure Cache for Redis|Geo-replication Connectivity Lag - fetched from Geo-Secondary Cache|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Geo Replication|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=GeoReplicationConnectivityLag statistic=average  \| quantize using avg \| avg by resource\_group, resource\_name |
|Azure Cache for Redis|Geo-replication Data Sync Offset - fetched from Geo-Primary Cache|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Geo Replication|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=GeoReplicationDataSyncOffset statistic=average  \| quantize using avg \| avg by resource\_group, resource\_name |
|Azure Cache for Redis|Geo-replication Full Sync Events - fetched from Geo-Secondary Cache|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Geo Replication|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=GeoReplicationFullSyncEventStarted statistic=count \| quantize using count \| avg by resource\_group, resource\_name|
|Azure Cache for Redis|Geo-replication Healthy - fetched from Geo-Secondary Cache|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Geo Replication|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=GeoReplicationHealthy statistic=minimum \| quantize using min \| min by resource\_group, resource\_name |
|Azure Cache for Redis|Gets|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=getcommands statistic=total \| quantize using sum \| sum by resource\_group, resource\_name|
|Azure Cache for Redis|Gets|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=getcommands statistic=total \| quantize using sum \| sum by resource\_group, resource\_name|
|Azure Cache for Redis|Max 99th percentile latency (microseconds)|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=LatencyP99 statistic=maximum \| quantize using max \| max by resource\_group, resource\_name |
|Azure Cache for Redis|Max 99th percentile latency (microseconds)|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} provider\_name={{provider\_name}} location={{location}} resource\_type={{resource\_type}} metric=LatencyP99 statistic=maximum \| quantize using max \| max by resource\_group, resource\_name |
|Azure Cache for Redis|Max Cache Read (Bytes / sec)|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=cacheRead statistic=maximum \| quantize using max \| max by resource\_group, resource\_name |
|Azure Cache for Redis|Max Cache Write (Bytes / sec)|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=cacheWrite statistic=maximum \| quantize using max \| max by resource\_group, resource\_name |
|Azure Cache for Redis|Max CPU (%)|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=percentProcessorTime statistic=maximum \| quantize using max \| max by resource\_group, resource\_name |
|Azure Cache for Redis|Max CPU Utilisation (%)|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=percentProcessorTime statistic=maximum \| quantize using max \| max by resource\_group, resource\_name |
|Azure Cache for Redis|Max Number of Connected Clients|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=connectedclients statistic=maximum \| quantize using max \| max by resource\_group, resource\_name |
|Azure Cache for Redis|Max Number of Connected Clients|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=connectedclients statistic=maximum \| quantize using max \| max by resource\_group, resource\_name |
|Azure Cache for Redis|Max Number of Errors|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=errors statistic=maximum \| quantize using max \| max by resource\_group, resource\_name |
|Azure Cache for Redis|Max Number of Errors|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=errors statistic=maximum \| quantize using max \| max by resource\_group, resource\_name |
|Azure Cache for Redis|Max Operations (/seconds)|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=operationsPerSecond statistic=maximum \| quantize using max \| max by resource\_group, resource\_name|
|Azure Cache for Redis|Max Operations (/seconds)|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=operationsPerSecond statistic=maximum \| quantize using max \| max by resource\_group, resource\_name|
|Azure Cache for Redis|Max Server Load (%)|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=serverLoad statistic=maximum \| quantize using max \| max by resource\_group, resource\_name |
|Azure Cache for Redis|Max Server Load (%)|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=serverLoad statistic=maximum \| quantize using max \| max by resource\_group, resource\_name |
|Azure Cache for Redis|Max Used Memory (Bytes)|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=usedmemory statistic=maximum \| quantize using max \| max by resource\_group, resource\_name |
|Azure Cache for Redis|Max Used Memory (Bytes)|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=usedmemory statistic=maximum \| quantize using max \| max by resource\_group, resource\_name |
|Azure Cache for Redis|Max Used Memory Utilisation (%)|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=usedmemorypercentage statistic=maximum \| quantize using max \| max by resource\_group, resource\_name |
|Azure Cache for Redis|Max Used Memory Utilisation (%)|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=usedmemorypercentage statistic=maximum \| quantize using max \| max by resource\_group, resource\_name |
|Azure Cache for Redis|MSEntra Authentication Audit Details|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - MSEntra Authentication Audit|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} MSEntraAuthenticationAuditLog<br />\| json "category", "properties.auditLog.username", "properties.auditLog.authentication", "properties.auditLog.ipAddress", "properties.auditLog.clientName", "properties.auditLog.message" as category, username, authentication, ipAddress, clientName, message nodrop<br />\| where category="MSEntraAuthenticationAuditLog"<br />\| count as Count by time, location, resource\_name, username, authentication, ipAddress, clientId, clientName, message|
|Azure Cache for Redis|Number of  Evicted Keys|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=evictedkeys statistic=total \| quantize using sum \| sum by resource\_group, resource\_name |
|Azure Cache for Redis|Number of  Expired Keys|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=expiredkeys statistic=total \| quantize using sum \| sum by resource\_group, resource\_name|
|Azure Cache for Redis|Number of Evicted Keys|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=evictedkeys statistic=total \| quantize using sum \| sum by resource\_group, resource\_name |
|Azure Cache for Redis|Number of Expired Keys|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=expiredkeys statistic=total \| quantize using sum \| sum by resource\_group, resource\_name|
|Azure Cache for Redis|Recent Delete Operations|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name = {{resource\_name}} provider\_name={{provider\_name}} resource\_type={{resource\_type}}  Administrative <br />\| JSON "properties.statusCode", "properties.message", "resultType", "category", "operationName", "callerIpAddress", "resultSignature", "level", "identity.claims.idtyp", "identity.claims.name", "identity.claims.appid", "properties.entity", "\$['identity']['claims']['http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name']","\$['identity']['claims']['http://schemas.microsoft.com/claims/authnmethodsreferences']" as statusCode, message, resultType, category, operationName, callerIpAddress, resultSignature, level, idtyp, name, appid, entity, identity\_claims\_name, authmethods nodrop<br />\| where resultType in ("Accept", "Success") and category="Administrative" and toUppercase(operationName) matches /DELETE/ <br />\| if (idtyp =="user", name, appid) as name<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count by \_messageTime, time, resource\_name, callerIpAddress, name, identity\_claims\_name, authmethods, resultSignature, statusCode, message, entity<br />\| sort by \_messageTime desc<br />\| limit 20 <br />\| fields -\_count,\_messageTime|
|Azure Cache for Redis|Recent Recommendation Events|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Policy and Recommendations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Recommendation<br />\| JSON "category", "operationName", "resultType", "properties.recommendationName", "properties.recommendationCategory", "properties.recommendationImpact", "properties.recommendationResourceLink" as category, operationName, resultType, recommendationName, recommendationCategory, recommendationImpact, recommendationResourceLink <br />\| where category="Recommendation"<br />\| parse field=operationName "\*/\*/\*/\*" as provider, category, operation\_name, action nodrop<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count as Count by time, operation\_name, resource\_name, resultType, recommendationName, recommendationCategory, recommendationImpact, recommendationResourceLink|
|Azure Cache for Redis|Recent Write Operations|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name = {{resource\_name}} provider\_name={{provider\_name}} resource\_type={{resource\_type}}  Administrative <br />\| JSON "properties.statusCode", "properties.message", "resultType", "category", "operationName", "callerIpAddress", "resultSignature", "level", "identity.claims.idtyp", "identity.claims.name", "identity.claims.appid", "\$['identity']['claims']['http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name']","\$['identity']['claims']['http://schemas.microsoft.com/claims/authnmethodsreferences']"  as statusCode, message, resultType, category, operationName, callerIpAddress, resultSignature, level, idtyp, name, appid, identity\_claims\_name, authmethods nodrop<br />\| where category="Administrative" and resultType in ("Accept", "Success") and toUppercase(operationName) matches /WRITE/<br />\| if (idtyp =="user", name, appid) as name<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count by \_messageTime, time, resource\_name, callerIpAddress, name, identity\_claims\_name, authmethods, resultSignature, statusCode, message<br />\| sort by \_messageTime desc<br />\| limit 20 <br />\| fields -\_count,\_messageTime|
|Azure Cache for Redis|Requests by Location|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - MSEntra Authentication Audit|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} MSEntraAuthenticationAuditLog ipAddress<br />\| json "properties.auditLog.ipAddress" as ipAddress<br />\| split ipAddress delim=':' extract 1 as ipAddress<br />\| count as Count by ipAddress<br />\| lookup latitude, longitude from geo://location on ip = ipAddress<br />\| where !isNull(latitude)<br />\| sum(Count) as count by latitude, longitude|
|Azure Cache for Redis|Requests by Resource Name|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - MSEntra Authentication Audit|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} MSEntraAuthenticationAuditLog tenant<br />\| json "category", "properties.tenant" as category, tenant<br />\| where category="MSEntraAuthenticationAuditLog"<br />\| count as Count by tenant<br />\| sort by Count, tenant asc|
|Azure Cache for Redis|Requests by Username|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - MSEntra Authentication Audit|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} MSEntraAuthenticationAuditLog <br />\| json "category", "properties.auditLog.username" as category, username<br />\| where category="MSEntraAuthenticationAuditLog"<br />\| count as Count by username|
|Azure Cache for Redis|Sets|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=setcommands statistic=total \| quantize using sum \| sum by resource\_group, resource\_name|
|Azure Cache for Redis|Sets|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=setcommands statistic=total \| quantize using sum \| sum by resource\_group, resource\_name|
|Azure Cache for Redis|Top 10 IPs by Connection Count|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Non-Enterprise)|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} ConnectedClientList<br />\| json "category", "properties.connectedClients" as category, connectedClients<br />\| where category="ConnectedClientList"<br />\| json "properties.connectedClients[\*]" as client\_obj<br />\| parse regex field=client\_obj "(?\<client\_conn\_info\>\\{[^\\{]+\\})" multi<br />\| json field=client\_conn\_info "ip", "count" as client\_ip, client\_count<br />\| sum(client\_count) as total\_connections by client\_ip<br />\| top 10 client\_ip by total\_connections|
|Azure Cache for Redis|Top 10 operations that caused the most errors|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name = {{resource\_name}} provider\_name={{provider\_name}} resource\_type={{resource\_type}}  Administrative Failure<br />\| json "resultType", "operationName", "properties.statusMessage", "category"  as resultType, operationName, failureMessage, category nodrop<br />\| parse field=operationname "\*/\*/\*" as provider\_name, resource\_type, operation nodrop<br />\| where category="Administrative" and resultType="Failure"<br />\| count as Count by resource\_name, operation, failureMessage<br />\| order by Count <br />\| limit 10|
|Azure Cache for Redis|Total Connections|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Non-Enterprise)|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} ConnectedClientList<br />\| json "category", "properties.connectedClients" as category, connectedClients<br />\| where category="ConnectedClientList"<br />\| json "properties.connectedClients[\*]" as client\_obj<br />\| parse regex field=client\_obj "(?\<client\_conn\_info\>\\{[^\\{]+\\})" multi<br />\| json field=client\_conn\_info "ip", "count" as client\_ip, client\_count<br />\| sum(client\_count)|
|Azure Cache for Redis|Total Connections|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Enterprise)|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} ConnectionEvents clientIP<br />\| json "category", "properties.clientIP" as category, clientIP<br />\| where category="ConnectionEvents"<br />\| count|
|Azure Cache for Redis|Total Failed Policy Events|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Policy and Recommendations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} location={{location}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Policy Failure<br />\| JSON "category", "resultType" as category, resultType<br />\| where category="Policy" and resultType="Failure"<br />\| count as Count|
|Azure Cache for Redis|Total Operations|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=totalcommandsprocessed statistic=total \| quantize using sum \| sum by resource\_group, resource\_name|
|Azure Cache for Redis|Total Operations|Metrics|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Resource Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} metric=totalcommandsprocessed statistic=total \| quantize using sum \| sum by resource\_group, resource\_name|
|Azure Cache for Redis|Total Recommendation Events|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Policy and Recommendations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Recommendation<br />\| JSON "category"<br />\| where category="Recommendation"<br />\| count |
|Azure Cache for Redis|Total Success Policy Events|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Policy and Recommendations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} location={{location}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Policy <br />\| JSON "category", "resultType" as category, resultType<br />\| where category="Policy" and (resultType="Success" or resultType="Accept")<br />\| count as Count|
|Azure Cache for Redis|Total Success Policy Events|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Policy and Recommendations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Policy Success<br />\| JSON "category", "resultType", "properties.message", "properties.resourceLocation", "properties.entity", "properties.policies" as category, resultType, message, resourceLocation, entity, policies<br />\| parse field=entity "/subscriptions/\*/resourceGroups/\*/providers/\*/\*/\*" as subscription\_id, resource\_group, providers, virtualMachineScaleSets, aks nodrop<br />\| where category="Policy" and (resultType="Success" or resultType="Accept")<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count as Count by time, level, resultType, resource\_group, resource\_name, location, policies|
|Azure Cache for Redis|Total Unique Connected Clients|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Enterprise)|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} ConnectionEvents clientIP<br />\| json "category", "properties.clientIP" as category, clientIP<br />\| where category="ConnectionEvents"<br />\| count by ClientIP<br />\| count|
|Azure Cache for Redis|Total Unique Connected Clients|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Connections(Non-Enterprise)|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} ConnectedClientList<br />\| json "category", "properties.connectedClients" as category, connectedClients<br />\| where category="ConnectedClientList"<br />\| json "properties.connectedClients[\*]" as client\_obj<br />\| parse regex field=client\_obj "(?\<client\_conn\_info\>\\{[^\\{]+\\})" multi<br />\| json field=client\_conn\_info "ip", "count" as client\_ip, client\_count<br />\| count by client\_ip<br />\| count|
|Azure Cache for Redis|Users / Applications by Operation type|Logs|Installed Apps/Azure Cache for Redis/Azure Cache for Redis - Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} provider\_name={{provider\_name}} resource\_type={{resource\_type}} Administrative <br />\| JSON "properties.statusCode", "properties.message", "resultType", "category", "operationName", "callerIpAddress", "resultSignature", "level", "identity.claims.idtyp", "identity.claims.name", "identity.claims.appid" as statusCode, message, resultType, category, operationName, callerIpAddress, resultSignature, level, idtyp, name, appid nodrop<br />\| where resultType in ("Accept", "Success") and category="Administrative" <br />\| if (idtyp =="user", name, appid) as name<br />\| "Others" as operationType<br />\| if (toUppercase(operationName) matches /WRITE/, "WRITE", operationType) as operationType <br />\| if (toUppercase(operationName) matches /READ/, "READ", operationType) as operationType <br />\| if (toUppercase(operationName) matches /DELETE/, "DELETE", operationType) as operationType <br />\| count by name, operationType<br />\| transpose row name column operationType|

