# Azure Application Gateway

## Searches

### Log Searches

- **Backend Pool Details**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Backend 
- **Backend Pool Details**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Backend 
- **Backend Response Status 2xx**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Backend 
- **Backend Response Status 2xx**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Backend 
- **Backend Response Status 3xx**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Backend 
- **Backend Response Status 3xx**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Backend 
- **Backend Response Status 4xx**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Backend 
- **Backend Response Status 4xx**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Backend 
- **Backend Response Status 5xx**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Backend 
- **Backend Response Status 5xx**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Backend 
- **Chart by Backend Status Code**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Backend 
- **Chart by Backend Status Code**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Backend 
- **Distribution  by Operation Type (Read, Write and Delete)**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway -  Administrative Operations 
- **Distribution  by Operation Type (Read, Write and Delete)**: from Dashboard: Azure Application Gateway/Azure Application Gateway -  Administrative Operations 
- **Distribution by Operations**: from Dashboard: Azure Application Gateway/Azure Application Gateway -  Administrative Operations 
- **Distribution by Operations**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway -  Administrative Operations 
- **Downtime Causes**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Health 
- **Downtime Causes**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Health 
- **Failed Policy Events**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Security and Policy 
- **Failed Policy Events**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Security and Policy 
- **Failed Requests  by Error Code**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Failures 
- **Failed Requests  by Error Code**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Failures 
- **Failed Requests by HTTP Method**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Failures 
- **Failed Requests by HTTP Method**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Failures 
- **Failed Requests by User Agent**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Failures 
- **Failed Requests by User Agent**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Failures 
- **HTTP Server Status Trend**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Failures 
- **HTTP Server Status Trend**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Failures 
- **HTTP Status Trend**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Failures 
- **HTTP Status Trend**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Failures 
- **Recent Alerts**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Health 
- **Recent Alerts**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Health 
- **Recent Delete Operations**: from Dashboard: Azure Application Gateway/Azure Application Gateway -  Administrative Operations 
- **Recent Delete Operations**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway -  Administrative Operations 
- **Recent Recommendation Events**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Security and Policy 
- **Recent Recommendation Events**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Security and Policy 
- **Recent Resource Health Incidents**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Health 
- **Recent Resource Health Incidents**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Health 
- **Recent Resource Health Status by Resource Name**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Health 
- **Recent Resource Health Status by Resource Name**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Health 
- **Recent Security Events**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Security and Policy 
- **Recent Security Events**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Security and Policy 
- **Recent Write Operations**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway -  Administrative Operations 
- **Recent Write Operations**: from Dashboard: Azure Application Gateway/Azure Application Gateway -  Administrative Operations 
- **Requests by HTTP Status Code**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Traffic 
- **Requests by HTTP Status Code**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Traffic 
- **Requests by Location**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Overview 
- **Requests by Location**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Traffic 
- **Requests by Location**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Traffic 
- **Requests by Location**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Overview 
- **Requests by TLS Version**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Traffic 
- **Requests by TLS Version**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Traffic 
- **Resource Health by Event Type**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Health 
- **Resource Health by Event Type**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Health 
- **Resource Health Trend**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Health 
- **Resource Health Trend**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Health 
- **Response Status 2xx**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Traffic 
- **Response Status 2xx**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Traffic 
- **Response Status 3xx**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Traffic 
- **Response Status 3xx**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Traffic 
- **Response Status 4xx**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Traffic 
- **Response Status 4xx**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Traffic 
- **Response Status 5xx**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Traffic 
- **Response Status 5xx**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Traffic 
- **Top 10 Application Gateways with Error**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Failures 
- **Top 10 Application Gateways with Error**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Failures 
- **Top 10 Backend Pool Names with Errors**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Failures 
- **Top 10 Backend Pool Names with Errors**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Failures 
- **Top 10 Errors by Error Info**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Failures 
- **Top 10 Errors by Error Info**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Failures 
- **Top 10 operations that caused the most errors**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway -  Administrative Operations 
- **Top 10 operations that caused the most errors**: from Dashboard: Azure Application Gateway/Azure Application Gateway -  Administrative Operations 
- **Top 10 Rule Names with Error**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Failures 
- **Top 10 Rule Names with Error**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Failures 
- **Total Failed Policy Events**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Security and Policy 
- **Total Failed Policy Events**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Security and Policy 
- **Total Recommendation Events**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Security and Policy 
- **Total Recommendation Events**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Security and Policy 
- **Total Security Events**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Security and Policy 
- **Total Security Events**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Security and Policy 
- **Total Success Policy Events**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Security and Policy 
- **Total Success Policy Events**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Security and Policy 
- **Total Success Policy Events**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Security and Policy 
- **Total Success Policy Events**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Security and Policy 
- **Users / Applications by Operation type**: from Dashboard: Azure Application Gateway/Azure Application Gateway -  Administrative Operations 
- **Users / Applications by Operation type**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway -  Administrative Operations

### Metric Searches

- **Application Gateway Total Time**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Latency 
- **Application Gateway Total Time**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Latency 
- **Application Gateway Total Time vs Backend Last Byte Response Time**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Latency 
- **Application Gateway Total Time vs Backend Last Byte Response Time**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Latency 
- **Average Failure Rate [per sec]**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Performance 
- **Average Failure Rate [per sec]**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Performance 
- **Average Latency [ms]**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Performance 
- **Average Latency [ms]**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Performance 
- **Average Latency [ms]**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Performance 
- **Average Latency [ms]**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Performance 
- **Average New Connections Per Second**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Overview 
- **Average New Connections Per Second**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Overview 
- **Average Request Rate [per sec]**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Performance 
- **Average Request Rate [per sec]**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Performance 
- **Backend Connect Time vs Backend First Byte Response Time**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Latency 
- **Backend Connect Time vs Backend First Byte Response Time**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Latency 
- **Backend First Byte Response Time vs Backend Last Byte Response Time**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Latency 
- **Backend First Byte Response Time vs Backend Last Byte Response Time**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Latency 
- **Capacity Units**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Performance 
- **Capacity Units**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Performance 
- **Connection Details**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Performance 
- **Connection Details**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Performance 
- **Connections Per Second**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Overview 
- **Connections Per Second**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Overview 
- **Current Capacity Units**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Billing 
- **Current Capacity Units**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Billing 
- **Current Capacity Units**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Billing 
- **Current Capacity Units**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Billing 
- **Current Capacity Units**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Overview 
- **Current Capacity Units**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Overview 
- **Current Connections**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Performance 
- **Current Connections**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Performance 
- **Current Connections**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Overview 
- **Current Connections**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Overview 
- **Estimated Billed Capacity Units**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Billing 
- **Estimated Billed Capacity Units**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Billing 
- **Failed Requests**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Overview 
- **Failed Requests**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Traffic 
- **Failed Requests**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Traffic 
- **Failed Requests**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Overview 
- **Failure Rate [per sec]**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Performance 
- **Failure Rate [per sec]**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Performance 
- **Fixed Billable Capacity Units**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Billing 
- **Fixed Billable Capacity Units**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Billing 
- **Fixed Capacity Units**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Billing 
- **Fixed Capacity Units**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Billing 
- **Healthy Host Count**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Backend 
- **Healthy Host Count**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Backend 
- **Received Bytes**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Performance 
- **Received Bytes**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Performance 
- **Request Rate [per sec]**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Performance 
- **Request Rate [per sec]**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Performance 
- **Sent Bytes**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Performance 
- **Sent Bytes**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Performance 
- **Server Response**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Backend 
- **Server Response**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Backend 
- **Throughput**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Overview 
- **Throughput**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Performance 
- **Throughput**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Overview 
- **Throughput**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Performance 
- **Total Requests**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Traffic 
- **Total Requests**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Traffic 
- **UnHealthy Host Count**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Backend 
- **UnHealthy Host Count**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Backend 
- **Unhealthy Host Count**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Overview 
- **UnHealthy Host Count**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Backend 
- **UnHealthy Host Count**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Backend 
- **Unhealthy Host Count**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Overview 
- **Variable Capacity Units**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Billing 
- **Variable Capacity Units**: from Dashboard: Installed Apps/Azure Application Gateway/Azure Application Gateway - Billing 
- **Variable Capacity Units**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Billing 
- **Variable Capacity Units**: from Dashboard: Azure Application Gateway/Azure Application Gateway - Billing

## Search Table

|app\_topic|search\_name|type|origin|search|
|:--|:--|:--|:--|:--|
|Azure Application Gateway|Application Gateway Total Time|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Latency|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=ApplicationGatewayTotalTime statistic=average \| quantize using avg \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Application Gateway Total Time|Metrics|Azure Application Gateway/Azure Application Gateway - Latency|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=ApplicationGatewayTotalTime statistic=average \| quantize using avg \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Application Gateway Total Time vs Backend Last Byte Response Time|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Latency|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=ApplicationGatewayTotalTime statistic=average \| quantize using avg \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Application Gateway Total Time vs Backend Last Byte Response Time|Metrics|Azure Application Gateway/Azure Application Gateway - Latency|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=ApplicationGatewayTotalTime statistic=average \| quantize using avg|
|Azure Application Gateway|Average Failure Rate [per sec]|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=FailedRequests statistic=total \| quantize using sum \| sum by resource\_group, resource\_name \| accum \| rate|
|Azure Application Gateway|Average Failure Rate [per sec]|Metrics|Azure Application Gateway/Azure Application Gateway - Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=FailedRequests statistic=total \| quantize using sum \| sum by resource\_group, resource\_name \| accum \| rate|
|Azure Application Gateway|Average Latency [ms]|Metrics|Azure Application Gateway/Azure Application Gateway - Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=ApplicationGatewayTotalTime statistic=average \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Average Latency [ms]|Metrics|Azure Application Gateway/Azure Application Gateway - Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=ApplicationGatewayTotalTime statistic=average \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Average Latency [ms]|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=ApplicationGatewayTotalTime statistic=average \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Average Latency [ms]|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=ApplicationGatewayTotalTime statistic=average \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Average New Connections Per Second|Metrics|Azure Application Gateway/Azure Application Gateway - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=NewConnectionsPerSecond statistic=average \| quantize using avg \| avg |
|Azure Application Gateway|Average New Connections Per Second|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=NewConnectionsPerSecond statistic=average \| quantize using avg \| avg |
|Azure Application Gateway|Average Request Rate [per sec]|Metrics|Azure Application Gateway/Azure Application Gateway - Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=TotalRequests statistic=total \| quantize using sum \| sum by resource\_group, resource\_name \| accum \| rate|
|Azure Application Gateway|Average Request Rate [per sec]|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=TotalRequests statistic=total \| quantize using sum \| sum by resource\_group, resource\_name \| accum \| rate|
|Azure Application Gateway|Backend Connect Time vs Backend First Byte Response Time|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Latency|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=BackendConnectTime statistic=average \| quantize using avg \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Backend Connect Time vs Backend First Byte Response Time|Metrics|Azure Application Gateway/Azure Application Gateway - Latency|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=BackendConnectTime statistic=average \| quantize using avg \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Backend First Byte Response Time vs Backend Last Byte Response Time|Metrics|Azure Application Gateway/Azure Application Gateway - Latency|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=BackendFirstByteResponseTime statistic=average \| quantize using avg \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Backend First Byte Response Time vs Backend Last Byte Response Time|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Latency|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=BackendFirstByteResponseTime statistic=average \| quantize using avg \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Backend Pool Details|Logs|Azure Application Gateway/Azure Application Gateway - Backend|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} ApplicationGatewayAccessLog<br />\| json "category", "backendPoolName", "properties.clientResponseTime", "properties.serverResponseLatency", "properties.WAFEvaluationTime", "properties.error\_info" as category, backendPoolName, clientResponseTime, serverResponseLatency, WAFEvaluationTime, error\_info nodrop<br />\| where category="ApplicationGatewayAccessLog" and !isBlank(backendPoolName)<br />\| if (error\_info != "ERRORINFO\_NO\_ERROR", 1, 0) as total\_errors<br />\| count as total\_requests, avg(clientResponseTime) as AvgClientResponseTimeMs, avg(serverResponseLatency) as AvgServerResponseLatencyMs, avg(WAFEvaluationTime) as AvgWAFEvaluationTimeMs, sum(total\_errors) as total\_errors by resource\_name, backendPoolName|
|Azure Application Gateway|Backend Pool Details|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Backend|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} ApplicationGatewayAccessLog<br />\| json "category", "backendPoolName", "properties.clientResponseTime", "properties.serverResponseLatency", "properties.WAFEvaluationTime", "properties.error\_info" as category, backendPoolName, clientResponseTime, serverResponseLatency, WAFEvaluationTime, error\_info nodrop<br />\| where category="ApplicationGatewayAccessLog" and !isBlank(backendPoolName)<br />\| if (error\_info != "ERRORINFO\_NO\_ERROR", 1, 0) as total\_errors<br />\| count as total\_requests, avg(clientResponseTime) as AvgClientResponseTimeMs, avg(serverResponseLatency) as AvgServerResponseLatencyMs, avg(WAFEvaluationTime) as AvgWAFEvaluationTimeMs, sum(total\_errors) as total\_errors by resource\_name, backendPoolName|
|Azure Application Gateway|Backend Response Status 2xx|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Backend|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties serverStatus<br />\| json "properties.serverStatus" as serverStatus<br />\| where serverStatus matches "2\*"<br />\| timeslice 5m<br />\| count by \_timeslice|
|Azure Application Gateway|Backend Response Status 2xx|Logs|Azure Application Gateway/Azure Application Gateway - Backend|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties serverStatus<br />\| json "properties.serverStatus" as serverStatus<br />\| where serverStatus matches "2\*"<br />\| timeslice 5m<br />\| count by \_timeslice|
|Azure Application Gateway|Backend Response Status 3xx|Logs|Azure Application Gateway/Azure Application Gateway - Backend|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties serverStatus<br />\| json "properties.serverStatus" as serverStatus<br />\| where serverStatus matches "3\*"<br />\| timeslice 5m<br />\| count by \_timeslice|
|Azure Application Gateway|Backend Response Status 3xx|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Backend|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties serverStatus<br />\| json "properties.serverStatus" as serverStatus<br />\| where serverStatus matches "3\*"<br />\| timeslice 5m<br />\| count by \_timeslice|
|Azure Application Gateway|Backend Response Status 4xx|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Backend|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties serverStatus<br />\| json "properties.serverStatus" as serverStatus<br />\| where serverStatus matches "4\*"<br />\| timeslice 5m<br />\| count by \_timeslice|
|Azure Application Gateway|Backend Response Status 4xx|Logs|Azure Application Gateway/Azure Application Gateway - Backend|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties serverStatus<br />\| json "properties.serverStatus" as serverStatus<br />\| where serverStatus matches "4\*"<br />\| timeslice 5m<br />\| count by \_timeslice|
|Azure Application Gateway|Backend Response Status 5xx|Logs|Azure Application Gateway/Azure Application Gateway - Backend|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties serverStatus<br />\| json "properties.serverStatus" as serverStatus<br />\| where serverStatus matches "5\*"<br />\| timeslice 5m<br />\| count by \_timeslice|
|Azure Application Gateway|Backend Response Status 5xx|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Backend|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties serverStatus<br />\| json "properties.serverStatus" as serverStatus<br />\| where serverStatus matches "5\*"<br />\| timeslice 5m<br />\| count by \_timeslice|
|Azure Application Gateway|Capacity Units|Metrics|Azure Application Gateway/Azure Application Gateway - Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=CapacityUnits statistic=average \| quantize to 1h using sum \| sum by resource\_group, resource\_name|
|Azure Application Gateway|Capacity Units|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=CapacityUnits statistic=average \| quantize to 1h using sum \| sum by resource\_group, resource\_name|
|Azure Application Gateway|Chart by Backend Status Code|Logs|Azure Application Gateway/Azure Application Gateway - Backend|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties serverStatus<br />\| json "properties.serverStatus" as serverStatus<br />\| count by serverStatus<br />\| sort by \_count, serverStatus asc|
|Azure Application Gateway|Chart by Backend Status Code|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Backend|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties serverStatus<br />\| json "properties.serverStatus" as serverStatus<br />\| count by serverStatus<br />\| sort by \_count, serverStatus asc|
|Azure Application Gateway|Connection Details|Metrics|Azure Application Gateway/Azure Application Gateway - Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=CurrentConnections statistic=total \| avg by resource\_name|
|Azure Application Gateway|Connection Details|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=CurrentConnections statistic=total \| avg by resource\_name|
|Azure Application Gateway|Connections Per Second|Metrics|Azure Application Gateway/Azure Application Gateway - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=NewConnectionsPerSecond statistic=average \| quantize using avg \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Connections Per Second|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=NewConnectionsPerSecond statistic=average \| quantize using avg \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Current Capacity Units|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=CapacityUnits statistic=average \| quantize using avg \| avg|
|Azure Application Gateway|Current Capacity Units|Metrics|Azure Application Gateway/Azure Application Gateway - Billing|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=CapacityUnits statistic=average \| quantize using avg \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Current Capacity Units|Metrics|Azure Application Gateway/Azure Application Gateway - Billing|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=CapacityUnits statistic=average \| quantize using avg \| avg|
|Azure Application Gateway|Current Capacity Units|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Billing|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=CapacityUnits statistic=average \| quantize using avg \| avg|
|Azure Application Gateway|Current Capacity Units|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Billing|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=CapacityUnits statistic=average \| quantize using avg \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Current Capacity Units|Metrics|Azure Application Gateway/Azure Application Gateway - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=CapacityUnits statistic=average \| quantize using avg \| avg|
|Azure Application Gateway|Current Connections|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=CurrentConnections statistic=total \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Current Connections|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=CurrentConnections statistic=total \| quantize using sum \| sum by resource\_group, resource\_name|
|Azure Application Gateway|Current Connections|Metrics|Azure Application Gateway/Azure Application Gateway - Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=CurrentConnections statistic=total \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Current Connections|Metrics|Azure Application Gateway/Azure Application Gateway - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=CurrentConnections statistic=total \| quantize using sum \| sum by resource\_group, resource\_name|
|Azure Application Gateway|Distribution  by Operation Type (Read, Write and Delete)|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway -  Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} <br /> provider\_name={{provider\_name}} resource\_type={{resource\_type}} Administrative <br />\| json "resultType", "category", "operationName", "resourceId" as resultType, category, operationName, resourceid<br />\| where (resultType="Accept" or resultType="Success") and category="Administrative"<br />\| "OTHERS" as operationType<br />\| if (toUppercase(operationName) matches /WRITE/, "WRITE", operationType) as operationType <br />\| if (toUppercase(operationName) matches /READ/, "READ", operationType) as operationType <br />\| if (toUppercase(operationName) matches /DELETE/, "DELETE", operationType) as operationType <br />\| count by operationType<br />\| sort by \_count|
|Azure Application Gateway|Distribution  by Operation Type (Read, Write and Delete)|Logs|Azure Application Gateway/Azure Application Gateway -  Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} <br /> provider\_name={{provider\_name}} resource\_type={{resource\_type}} Administrative <br />\| json "resultType", "category", "operationName", "resourceId" as resultType, category, operationName, resourceid<br />\| where (resultType="Accept" or resultType="Success") and category="Administrative"<br />\| "OTHERS" as operationType<br />\| if (toUppercase(operationName) matches /WRITE/, "WRITE", operationType) as operationType <br />\| if (toUppercase(operationName) matches /READ/, "READ", operationType) as operationType <br />\| if (toUppercase(operationName) matches /DELETE/, "DELETE", operationType) as operationType <br />\| count by operationType<br />\| sort by \_count|
|Azure Application Gateway|Distribution by Operations|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway -  Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}}<br />provider\_name={{provider\_name}} resource\_type={{resource\_type}} Administrative <br />\| json "resultType", "category", "operationName", "resourceId" as resultType, category, operationName, resourceid<br />\| where (resultType="Accept" or resultType="Success") and category="Administrative" <br />\| count by operationName<br />\| order by \_count|
|Azure Application Gateway|Distribution by Operations|Logs|Azure Application Gateway/Azure Application Gateway -  Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}}<br />provider\_name={{provider\_name}} resource\_type={{resource\_type}} Administrative <br />\| json "resultType", "category", "operationName", "resourceId" as resultType, category, operationName, resourceid<br />\| where (resultType="Accept" or resultType="Success") and category="Administrative" <br />\| count by operationName<br />\| order by \_count|
|Azure Application Gateway|Downtime Causes|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Health|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} ResourceHealth Downtime<br />\| JSON "category", "properties.type", "properties.cause" as category, type, cause<br />\| where category="ResourceHealth" and type="Downtime"<br />\| count as Count by cause<br />\| sort by Count, cause asc|
|Azure Application Gateway|Downtime Causes|Logs|Azure Application Gateway/Azure Application Gateway - Health|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} ResourceHealth Downtime<br />\| JSON "category", "properties.type", "properties.cause" as category, type, cause<br />\| where category="ResourceHealth" and type="Downtime"<br />\| count as Count by cause<br />\| sort by Count, cause asc|
|Azure Application Gateway|Estimated Billed Capacity Units|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Billing|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=EstimatedBilledCapacityUnits statistic=average \| quantize using avg \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Estimated Billed Capacity Units|Metrics|Azure Application Gateway/Azure Application Gateway - Billing|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=EstimatedBilledCapacityUnits statistic=average \| quantize using avg \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Failed Policy Events|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Security and Policy|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Policy Failure<br />\| JSON "category", "resultType", "properties.message", "properties.resourceLocation", "properties.entity", "properties.policies" as category, resultType, message, resourceLocation, entity, policies<br />\| where category="Policy" and resultType="Failure"<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count as Count by time, level, resultType, providers, resource\_group, resource\_name, location, policies|
|Azure Application Gateway|Failed Policy Events|Logs|Azure Application Gateway/Azure Application Gateway - Security and Policy|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Policy Failure<br />\| JSON "category", "resultType", "properties.message", "properties.resourceLocation", "properties.entity", "properties.policies" as category, resultType, message, resourceLocation, entity, policies<br />\| where category="Policy" and resultType="Failure"<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count as Count by time, level, resultType, providers, resource\_group, resource\_name, location, policies|
|Azure Application Gateway|Failed Requests|Metrics|Azure Application Gateway/Azure Application Gateway - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=FailedRequests statistic=total \| quantize using sum \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Failed Requests|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=FailedRequests statistic=total \| quantize using sum \| avg|
|Azure Application Gateway|Failed Requests|Metrics|Azure Application Gateway/Azure Application Gateway - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=FailedRequests statistic=total \| quantize using sum \| avg|
|Azure Application Gateway|Failed Requests|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=FailedRequests statistic=total \| quantize using sum \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Failed Requests  by Error Code|Logs|Azure Application Gateway/Azure Application Gateway - Failures|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}}<br />properties error\_info httpStatus<br />\| json "properties.error\_info", "properties.httpStatus" as error\_info, httpStatus<br />\| WHERE !(error\_info="ERRORINFO\_NO\_ERROR")<br />\| count as Count by httpStatus, error\_info<br />\| sort by Count, httpStatus asc|
|Azure Application Gateway|Failed Requests  by Error Code|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Failures|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}}<br />properties error\_info httpStatus<br />\| json "properties.error\_info", "properties.httpStatus" as error\_info, httpStatus<br />\| WHERE !(error\_info="ERRORINFO\_NO\_ERROR")<br />\| count as Count by httpStatus, error\_info<br />\| sort by Count, httpStatus asc|
|Azure Application Gateway|Failed Requests by HTTP Method|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Failures|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties httpMethod<br />\| json "properties.httpMethod" as httpMethod<br />\| count as Count by httpMethod<br />\| sort by Count asc|
|Azure Application Gateway|Failed Requests by HTTP Method|Logs|Azure Application Gateway/Azure Application Gateway - Failures|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties httpMethod<br />\| json "properties.httpMethod" as httpMethod<br />\| count as Count by httpMethod<br />\| sort by Count asc|
|Azure Application Gateway|Failed Requests by User Agent|Logs|Azure Application Gateway/Azure Application Gateway - Failures|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties userAgent<br />\| json "properties.userAgent" as userAgent<br />\| count as Count by userAgent<br />\| sort by Count, userAgent asc|
|Azure Application Gateway|Failed Requests by User Agent|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Failures|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties userAgent<br />\| json "properties.userAgent" as userAgent<br />\| count as Count by userAgent<br />\| sort by Count, userAgent asc|
|Azure Application Gateway|Failure Rate [per sec]|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=FailedRequests statistic=total \| quantize using sum \| sum by resource\_group, resource\_name \| accum \| rate|
|Azure Application Gateway|Failure Rate [per sec]|Metrics|Azure Application Gateway/Azure Application Gateway - Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=FailedRequests statistic=total \| quantize using sum \| sum by resource\_group, resource\_name \| accum \| rate|
|Azure Application Gateway|Fixed Billable Capacity Units|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Billing|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=FixedBillableCapacityUnits statistic=average \| quantize using avg \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Fixed Billable Capacity Units|Metrics|Azure Application Gateway/Azure Application Gateway - Billing|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=FixedBillableCapacityUnits statistic=average \| quantize using avg \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Fixed Capacity Units|Metrics|Azure Application Gateway/Azure Application Gateway - Billing|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=FixedBillableCapacityUnits statistic=average \| quantize using avg \| avg|
|Azure Application Gateway|Fixed Capacity Units|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Billing|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=FixedBillableCapacityUnits statistic=average \| quantize using avg \| avg|
|Azure Application Gateway|Healthy Host Count|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Backend|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=HealthyHostCount statistic=average \| quantize using avg \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Healthy Host Count|Metrics|Azure Application Gateway/Azure Application Gateway - Backend|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=HealthyHostCount statistic=average \| quantize using avg \| avg by resource\_group, resource\_name|
|Azure Application Gateway|HTTP Server Status Trend|Logs|Azure Application Gateway/Azure Application Gateway - Failures|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}}<br />properties error\_info serverStatus<br />\| json "properties.error\_info", "properties.serverStatus" as error\_info, serverStatus<br />\| WHERE !(error\_info="ERRORINFO\_NO\_ERROR") and serverStatus != "-" and !isBlank(serverStatus)<br />\| timeslice 1h<br />\| count as Count by serverStatus, \_timeslice<br />\| transpose row \_timeslice column serverStatus|
|Azure Application Gateway|HTTP Server Status Trend|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Failures|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}}<br />properties error\_info serverStatus<br />\| json "properties.error\_info", "properties.serverStatus" as error\_info, serverStatus<br />\| WHERE !(error\_info="ERRORINFO\_NO\_ERROR") and serverStatus != "-" and !isBlank(serverStatus)<br />\| timeslice 1h<br />\| count as Count by serverStatus, \_timeslice<br />\| transpose row \_timeslice column serverStatus|
|Azure Application Gateway|HTTP Status Trend|Logs|Azure Application Gateway/Azure Application Gateway - Failures|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}}<br />properties error\_info httpStatus<br />\| json "properties.error\_info", "properties.httpStatus" as error\_info, httpStatus<br />\| WHERE !(error\_info="ERRORINFO\_NO\_ERROR")<br />\| timeslice 1h<br />\| count as Count by httpStatus, \_timeslice<br />\| transpose row \_timeslice column httpStatus|
|Azure Application Gateway|HTTP Status Trend|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Failures|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}}<br />properties error\_info httpStatus<br />\| json "properties.error\_info", "properties.httpStatus" as error\_info, httpStatus<br />\| WHERE !(error\_info="ERRORINFO\_NO\_ERROR")<br />\| timeslice 1h<br />\| count as Count by httpStatus, \_timeslice<br />\| transpose row \_timeslice column httpStatus|
|Azure Application Gateway|Received Bytes|Metrics|Azure Application Gateway/Azure Application Gateway - Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=BytesReceived statistic=total \| quantize using sum \| sum by resource\_group, resource\_name|
|Azure Application Gateway|Received Bytes|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=BytesReceived statistic=total \| quantize using sum \| sum by resource\_group, resource\_name|
|Azure Application Gateway|Recent Alerts|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Health|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}}  Alert<br />\| JSON "category", "resultType", "properties.eventTimestamp", "properties.operationName", "properties.status", "properties.resourceId" as category, resultType, eventTimestamp, operationName, status, resourceId<br />\| resource\_name as alert\_name<br />\| toUpperCase(resourceId) as resourceId<br />\| parse field=resourceId "/RESOURCEGROUPS/\*/" as resource\_group nodrop<br />\| parse regex field=resourceId "/PROVIDERS/(?\<provider\_name\>[^/]+)" nodrop<br />\| parse regex field=resourceId "/PROVIDERS/[^/]+(?:/LOCATIONS/[^/]+)?/(?\<resource\_type\>[^/]+)/(?\<resource\_name\>.+)" nodrop<br />\| where if (resource\_group=="\*", true, resource\_group matches "{{resource\_group}}")<br />\| where if(resource\_type=="\*", true, resource\_type matches "{{resource\_type}}") <br />\| where if(resource\_name=="\*", true, resource\_name matches "{{resource\_name}}")<br />\| where category="Alert"<br />\| parse field=operationName "\*/\*/\*" as category, operation\_name, action nodrop<br />\| count as Count by resourceId,level, resultType, alert\_name, resource\_name, provider\_name, operation\_name, eventTimestamp, status|
|Azure Application Gateway|Recent Alerts|Logs|Azure Application Gateway/Azure Application Gateway - Health|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}}  Alert<br />\| JSON "category", "resultType", "properties.eventTimestamp", "properties.operationName", "properties.status", "properties.resourceId" as category, resultType, eventTimestamp, operationName, status, resourceId<br />\| resource\_name as alert\_name<br />\| toUpperCase(resourceId) as resourceId<br />\| parse field=resourceId "/RESOURCEGROUPS/\*/" as resource\_group nodrop<br />\| parse regex field=resourceId "/PROVIDERS/(?\<provider\_name\>[^/]+)" nodrop<br />\| parse regex field=resourceId "/PROVIDERS/[^/]+(?:/LOCATIONS/[^/]+)?/(?\<resource\_type\>[^/]+)/(?\<resource\_name\>.+)" nodrop<br />\| where if (resource\_group=="\*", true, resource\_group matches "{{resource\_group}}")<br />\| where if(resource\_type=="\*", true, resource\_type matches "{{resource\_type}}") <br />\| where if(resource\_name=="\*", true, resource\_name matches "{{resource\_name}}")<br />\| where category="Alert"<br />\| parse field=operationName "\*/\*/\*" as category, operation\_name, action nodrop<br />\| count as Count by resourceId,level, resultType, alert\_name, resource\_name, provider\_name, operation\_name, eventTimestamp, status|
|Azure Application Gateway|Recent Delete Operations|Logs|Azure Application Gateway/Azure Application Gateway -  Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name = {{resource\_name}}<br />provider\_name={{provider\_name}} resource\_type={{resource\_type}}  Administrative <br />\| JSON "properties.statusCode", "properties.message", "resultType", "category", "operationName", "callerIpAddress", "resultSignature", "level", "identity.claims.idtyp", "identity.claims.name", "identity.claims.appid", "properties.entity", "\$['identity']['claims']['http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name']","\$['identity']['claims']['http://schemas.microsoft.com/claims/authnmethodsreferences']" as statusCode, message, resultType, category, operationName, callerIpAddress, resultSignature, level, idtyp, name, appid, entity, identity\_claims\_name, authmethods nodrop<br />\| where resultType in ("Accept", "Success") and category="Administrative" and toUppercase(operationName) matches /DELETE/ <br />\| if (idtyp =="user", name, appid) as name<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count by \_messageTime, time, resource\_name, callerIpAddress, name, identity\_claims\_name, authmethods, resultSignature, statusCode, message, entity<br />\| sort by \_messageTime desc<br />\| limit 20 <br />\| fields -\_count,\_messageTime|
|Azure Application Gateway|Recent Delete Operations|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway -  Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name = {{resource\_name}}<br />provider\_name={{provider\_name}} resource\_type={{resource\_type}}  Administrative <br />\| JSON "properties.statusCode", "properties.message", "resultType", "category", "operationName", "callerIpAddress", "resultSignature", "level", "identity.claims.idtyp", "identity.claims.name", "identity.claims.appid", "properties.entity", "\$['identity']['claims']['http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name']","\$['identity']['claims']['http://schemas.microsoft.com/claims/authnmethodsreferences']" as statusCode, message, resultType, category, operationName, callerIpAddress, resultSignature, level, idtyp, name, appid, entity, identity\_claims\_name, authmethods nodrop<br />\| where resultType in ("Accept", "Success") and category="Administrative" and toUppercase(operationName) matches /DELETE/ <br />\| if (idtyp =="user", name, appid) as name<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count by \_messageTime, time, resource\_name, callerIpAddress, name, identity\_claims\_name, authmethods, resultSignature, statusCode, message, entity<br />\| sort by \_messageTime desc<br />\| limit 20 <br />\| fields -\_count,\_messageTime|
|Azure Application Gateway|Recent Recommendation Events|Logs|Azure Application Gateway/Azure Application Gateway - Security and Policy|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Recommendation<br />\| JSON "category", "operationName", "resultType", "properties.recommendationName", "properties.recommendationCategory", "properties.recommendationImpact", "properties.recommendationResourceLink" as category, operationName, resultType, recommendationName, recommendationCategory, recommendationImpact, recommendationResourceLink <br />\| where category="Recommendation"<br />\| parse field=operationName "\*/\*/\*/\*" as provider, category, operation\_name, action nodrop<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count as Count by time, operation\_name, resource\_name, resultType, recommendationName, recommendationCategory, recommendationImpact, recommendationResourceLink|
|Azure Application Gateway|Recent Recommendation Events|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Security and Policy|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Recommendation<br />\| JSON "category", "operationName", "resultType", "properties.recommendationName", "properties.recommendationCategory", "properties.recommendationImpact", "properties.recommendationResourceLink" as category, operationName, resultType, recommendationName, recommendationCategory, recommendationImpact, recommendationResourceLink <br />\| where category="Recommendation"<br />\| parse field=operationName "\*/\*/\*/\*" as provider, category, operation\_name, action nodrop<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count as Count by time, operation\_name, resource\_name, resultType, recommendationName, recommendationCategory, recommendationImpact, recommendationResourceLink|
|Azure Application Gateway|Recent Resource Health Incidents|Logs|Azure Application Gateway/Azure Application Gateway - Health|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} ResourceHealth<br />\| JSON "category", "operationName", "time","level","resultType", "properties.title", "properties.details", "properties.currentHealthStatus", "properties.type", "properties.cause" as category, operationName, time,level,resultType, title, details, currentHealthStatus, type, cause nodrop<br />\| where category="ResourceHealth"<br />\| parse field=operationName "\*/\*/\*" as category, operation\_name, action nodrop<br />\| count as Count by time, level, resultType, resource\_name, operation\_name, title, details, currentHealthStatus, type, cause|
|Azure Application Gateway|Recent Resource Health Incidents|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Health|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} ResourceHealth<br />\| JSON "category", "operationName", "time","level","resultType", "properties.title", "properties.details", "properties.currentHealthStatus", "properties.type", "properties.cause" as category, operationName, time,level,resultType, title, details, currentHealthStatus, type, cause nodrop<br />\| where category="ResourceHealth"<br />\| parse field=operationName "\*/\*/\*" as category, operation\_name, action nodrop<br />\| count as Count by time, level, resultType, resource\_name, operation\_name, title, details, currentHealthStatus, type, cause|
|Azure Application Gateway|Recent Resource Health Status by Resource Name|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Health|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} ResourceHealth<br />\| JSON "category", "properties.currentHealthStatus" as category, currentHealthStatus<br />\| where category="ResourceHealth"<br />\| withtime currentHealthStatus<br />\| most\_recent(currentHealthStatus\_withtime) as currentHealthStatus by resource\_name|
|Azure Application Gateway|Recent Resource Health Status by Resource Name|Logs|Azure Application Gateway/Azure Application Gateway - Health|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} ResourceHealth<br />\| JSON "category", "properties.currentHealthStatus" as category, currentHealthStatus<br />\| where category="ResourceHealth"<br />\| withtime currentHealthStatus<br />\| most\_recent(currentHealthStatus\_withtime) as currentHealthStatus by resource\_name|
|Azure Application Gateway|Recent Security Events|Logs|Azure Application Gateway/Azure Application Gateway - Security and Policy|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Security<br />\| Json "category", "level", "resultType", "resultDescription", "properties.compromisedEntity", "properties.severity", "properties.intent", "properties.remediationSteps", "properties.attackedResourceType", "properties.eventName" as category, level, resultType, resultDescription, compromisedEntity, severity, intent, remediationSteps, attackedResourceType, eventName nodrop<br />\| where category="Security"<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count as Count by time, category, level, resultType, compromisedEntity, severity, intent, attackedResourceType, eventName|
|Azure Application Gateway|Recent Security Events|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Security and Policy|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Security<br />\| Json "category", "level", "resultType", "resultDescription", "properties.compromisedEntity", "properties.severity", "properties.intent", "properties.remediationSteps", "properties.attackedResourceType", "properties.eventName" as category, level, resultType, resultDescription, compromisedEntity, severity, intent, remediationSteps, attackedResourceType, eventName nodrop<br />\| where category="Security"<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count as Count by time, category, level, resultType, compromisedEntity, severity, intent, attackedResourceType, eventName|
|Azure Application Gateway|Recent Write Operations|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway -  Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name = {{resource\_name}}<br />provider\_name={{provider\_name}} resource\_type={{resource\_type}}  Administrative <br />\| JSON "properties.statusCode", "properties.message", "resultType", "category", "operationName", "callerIpAddress", "resultSignature", "level", "identity.claims.idtyp", "identity.claims.name", "identity.claims.appid", "\$['identity']['claims']['http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name']","\$['identity']['claims']['http://schemas.microsoft.com/claims/authnmethodsreferences']"  as statusCode, message, resultType, category, operationName, callerIpAddress, resultSignature, level, idtyp, name, appid, identity\_claims\_name, authmethods nodrop<br />\| where category="Administrative" and resultType in ("Accept", "Success") and toUppercase(operationName) matches /WRITE/<br />\| if (idtyp =="user", name, appid) as name<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count by \_messageTime, time, resource\_name, callerIpAddress, name, identity\_claims\_name, authmethods, resultSignature, statusCode, message<br />\| sort by \_messageTime desc<br />\| limit 20 <br />\| fields -\_count,\_messageTime|
|Azure Application Gateway|Recent Write Operations|Logs|Azure Application Gateway/Azure Application Gateway -  Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name = {{resource\_name}}<br />provider\_name={{provider\_name}} resource\_type={{resource\_type}}  Administrative <br />\| JSON "properties.statusCode", "properties.message", "resultType", "category", "operationName", "callerIpAddress", "resultSignature", "level", "identity.claims.idtyp", "identity.claims.name", "identity.claims.appid", "\$['identity']['claims']['http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name']","\$['identity']['claims']['http://schemas.microsoft.com/claims/authnmethodsreferences']"  as statusCode, message, resultType, category, operationName, callerIpAddress, resultSignature, level, idtyp, name, appid, identity\_claims\_name, authmethods nodrop<br />\| where category="Administrative" and resultType in ("Accept", "Success") and toUppercase(operationName) matches /WRITE/<br />\| if (idtyp =="user", name, appid) as name<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count by \_messageTime, time, resource\_name, callerIpAddress, name, identity\_claims\_name, authmethods, resultSignature, statusCode, message<br />\| sort by \_messageTime desc<br />\| limit 20 <br />\| fields -\_count,\_messageTime|
|Azure Application Gateway|Request Rate [per sec]|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=TotalRequests statistic=total \| quantize using sum \| sum by resource\_group, resource\_name \| accum \| rate|
|Azure Application Gateway|Request Rate [per sec]|Metrics|Azure Application Gateway/Azure Application Gateway - Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=TotalRequests statistic=total \| quantize using sum \| sum by resource\_group, resource\_name \| accum \| rate|
|Azure Application Gateway|Requests by HTTP Status Code|Logs|Azure Application Gateway/Azure Application Gateway - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties httpStatus<br />\| json "properties.httpStatus" as httpStatus<br />\| count as Count by httpStatus<br />\| sort by Count, httpStatus asc|
|Azure Application Gateway|Requests by HTTP Status Code|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties httpStatus<br />\| json "properties.httpStatus" as httpStatus<br />\| count as Count by httpStatus<br />\| sort by Count, httpStatus asc|
|Azure Application Gateway|Requests by Location|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} clientIP<br />\| json "properties.clientIP" as clientIP<br />\| where !isblank(clientIP)<br />\| split clientIP delim=':' extract 1 as src\_ip, 2 as port<br />\| count as ip\_count by src\_ip<br />\| lookup latitude, longitude from geo://location on ip = src\_ip<br />\| where !isNull(latitude)<br />\| sum(ip\_count) as count by latitude, longitude|
|Azure Application Gateway|Requests by Location|Logs|Azure Application Gateway/Azure Application Gateway - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} clientIP<br />\| json "properties.clientIP" as clientIP<br />\| where !isblank(clientIP)<br />\| split clientIP delim=':' extract 1 as src\_ip, 2 as port<br />\| count as ip\_count by clientIP<br />\| lookup latitude, longitude from geo://location on ip = clientIP<br />\| where !isNull(latitude)<br />\| sum(ip\_count) as count by latitude, longitude|
|Azure Application Gateway|Requests by Location|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} clientIP<br />\| json "properties.clientIP" as clientIP<br />\| where !isblank(clientIP)<br />\| split clientIP delim=':' extract 1 as src\_ip, 2 as port<br />\| count as ip\_count by clientIP<br />\| lookup latitude, longitude from geo://location on ip = clientIP<br />\| where !isNull(latitude)<br />\| sum(ip\_count) as count by latitude, longitude|
|Azure Application Gateway|Requests by Location|Logs|Azure Application Gateway/Azure Application Gateway - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} clientIP<br />\| json "properties.clientIP" as clientIP<br />\| where !isblank(clientIP)<br />\| split clientIP delim=':' extract 1 as src\_ip, 2 as port<br />\| count as ip\_count by src\_ip<br />\| lookup latitude, longitude from geo://location on ip = src\_ip<br />\| where !isNull(latitude)<br />\| sum(ip\_count) as count by latitude, longitude|
|Azure Application Gateway|Requests by TLS Version|Logs|Azure Application Gateway/Azure Application Gateway - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} sslProtocol<br />\| json "properties.sslProtocol" as sslProtocol <br />\| where !isBlank(sslProtocol)<br />\| count by sslProtocol|
|Azure Application Gateway|Requests by TLS Version|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} sslProtocol<br />\| json "properties.sslProtocol" as sslProtocol <br />\| where !isBlank(sslProtocol)<br />\| count by sslProtocol|
|Azure Application Gateway|Resource Health by Event Type|Logs|Azure Application Gateway/Azure Application Gateway - Health|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} ResourceHealth<br />\| JSON "category", "properties.currentHealthStatus" as category, currentHealthStatus<br />\| where category="ResourceHealth"<br />\| count as Count by currentHealthStatus|
|Azure Application Gateway|Resource Health by Event Type|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Health|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} ResourceHealth<br />\| JSON "category", "properties.currentHealthStatus" as category, currentHealthStatus<br />\| where category="ResourceHealth"<br />\| count as Count by currentHealthStatus|
|Azure Application Gateway|Resource Health Trend|Logs|Azure Application Gateway/Azure Application Gateway - Health|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} ResourceHealth<br />\| JSON "category", "properties.currentHealthStatus" as category, currentHealthStatus<br />\| where category="ResourceHealth"<br />\| -1 as current\_health\_status<br />\| if (currentHealthStatus =="Unavailable", 0, current\_health\_status) as current\_health\_status<br />\| if (currentHealthStatus =="Degraded", 1, current\_health\_status) as current\_health\_status<br />\| if (currentHealthStatus =="Available", 2, current\_health\_status) as current\_health\_status<br />\| where current\_health\_status!=-1<br />\| timeslice 1h<br />\| withtime current\_health\_status <br />\| most\_recent(current\_health\_status\_withtime) as current\_health\_status by resource\_name, \_timeslice<br />\| number(current\_health\_status) as current\_health\_status<br />\| transpose row \_timeslice column resource\_name|
|Azure Application Gateway|Resource Health Trend|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Health|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} ResourceHealth<br />\| JSON "category", "properties.currentHealthStatus" as category, currentHealthStatus<br />\| where category="ResourceHealth"<br />\| -1 as current\_health\_status<br />\| if (currentHealthStatus =="Unavailable", 0, current\_health\_status) as current\_health\_status<br />\| if (currentHealthStatus =="Degraded", 1, current\_health\_status) as current\_health\_status<br />\| if (currentHealthStatus =="Available", 2, current\_health\_status) as current\_health\_status<br />\| where current\_health\_status!=-1<br />\| timeslice 1h<br />\| withtime current\_health\_status <br />\| most\_recent(current\_health\_status\_withtime) as current\_health\_status by resource\_name, \_timeslice<br />\| number(current\_health\_status) as current\_health\_status<br />\| transpose row \_timeslice column resource\_name|
|Azure Application Gateway|Response Status 2xx|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties httpStatus<br />\| json "properties.httpStatus" as httpStatus<br />\| where httpStatus matches "2\*"<br />\| timeslice 5m<br />\| count by \_timeslice, resource\_name, resource\_group<br />\| format("resource\_group=%s resource\_name=%s", resource\_group, resource\_name) as resource\_fields<br />\| fields -resource\_name, resource\_group<br />\| transpose row \_timeslice column resource\_fields|
|Azure Application Gateway|Response Status 2xx|Logs|Azure Application Gateway/Azure Application Gateway - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties httpStatus<br />\| json "properties.httpStatus" as httpStatus<br />\| where httpStatus matches "2\*"<br />\| timeslice 5m<br />\| count by \_timeslice, resource\_name, resource\_group<br />\| format("resource\_group=%s resource\_name=%s", resource\_group, resource\_name) as resource\_fields<br />\| fields -resource\_name, resource\_group<br />\| transpose row \_timeslice column resource\_fields|
|Azure Application Gateway|Response Status 3xx|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties httpStatus<br />\| json "properties.httpStatus" as httpStatus<br />\| where httpStatus matches "3\*"<br />\| timeslice 5m<br />\| count by \_timeslice, resource\_name, resource\_group<br />\| format("resource\_group=%s resource\_name=%s", resource\_group, resource\_name) as resource\_fields<br />\| fields -resource\_name, resource\_group<br />\| transpose row \_timeslice column resource\_fields|
|Azure Application Gateway|Response Status 3xx|Logs|Azure Application Gateway/Azure Application Gateway - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties httpStatus<br />\| json "properties.httpStatus" as httpStatus<br />\| where httpStatus matches "3\*"<br />\| timeslice 5m<br />\| count by \_timeslice, resource\_name, resource\_group<br />\| format("resource\_group=%s resource\_name=%s", resource\_group, resource\_name) as resource\_fields<br />\| fields -resource\_name, resource\_group<br />\| transpose row \_timeslice column resource\_fields|
|Azure Application Gateway|Response Status 4xx|Logs|Azure Application Gateway/Azure Application Gateway - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties httpStatus<br />\| json "properties.httpStatus" as httpStatus<br />\| where httpStatus matches "4\*"<br />\| timeslice 5m<br />\| count by \_timeslice, resource\_name, resource\_group<br />\| format("resource\_group=%s resource\_name=%s", resource\_group, resource\_name) as resource\_fields<br />\| fields -resource\_name, resource\_group<br />\| transpose row \_timeslice column resource\_fields|
|Azure Application Gateway|Response Status 4xx|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties httpStatus<br />\| json "properties.httpStatus" as httpStatus<br />\| where httpStatus matches "4\*"<br />\| timeslice 5m<br />\| count by \_timeslice, resource\_name, resource\_group<br />\| format("resource\_group=%s resource\_name=%s", resource\_group, resource\_name) as resource\_fields<br />\| fields -resource\_name, resource\_group<br />\| transpose row \_timeslice column resource\_fields|
|Azure Application Gateway|Response Status 5xx|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties httpStatus<br />\| json "properties.httpStatus" as httpStatus<br />\| where httpStatus matches "5\*"<br />\| timeslice 5m<br />\| count by \_timeslice, resource\_name, resource\_group<br />\| format("resource\_group=%s resource\_name=%s", resource\_group, resource\_name) as resource\_fields<br />\| fields -resource\_name, resource\_group<br />\| transpose row \_timeslice column resource\_fields|
|Azure Application Gateway|Response Status 5xx|Logs|Azure Application Gateway/Azure Application Gateway - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties httpStatus<br />\| json "properties.httpStatus" as httpStatus<br />\| where httpStatus matches "5\*"<br />\| timeslice 5m<br />\| count by \_timeslice, resource\_name, resource\_group<br />\| format("resource\_group=%s resource\_name=%s", resource\_group, resource\_name) as resource\_fields<br />\| fields -resource\_name, resource\_group<br />\| transpose row \_timeslice column resource\_fields|
|Azure Application Gateway|Sent Bytes|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=BytesSent statistic=total \| quantize using sum \| sum by resource\_group, resource\_name|
|Azure Application Gateway|Sent Bytes|Metrics|Azure Application Gateway/Azure Application Gateway - Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=BytesSent statistic=total \| quantize using sum \| sum by resource\_group, resource\_name|
|Azure Application Gateway|Server Response|Metrics|Azure Application Gateway/Azure Application Gateway - Backend|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=ResponseStatus statistic=total \| quantize using sum \| sum by resource\_group, resource\_name|
|Azure Application Gateway|Server Response|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Backend|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=ResponseStatus statistic=total \| quantize using sum \| sum by resource\_group, resource\_name|
|Azure Application Gateway|Throughput|Metrics|Azure Application Gateway/Azure Application Gateway - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=Throughput statistic=average \| quantize using avg \| avg|
|Azure Application Gateway|Throughput|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=Throughput statistic=average \| quantize using avg \| avg|
|Azure Application Gateway|Throughput|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=Throughput statistic=average \| quantize using avg \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Throughput|Metrics|Azure Application Gateway/Azure Application Gateway - Performance|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=Throughput statistic=average \| quantize using avg \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Top 10 Application Gateways with Error|Logs|Azure Application Gateway/Azure Application Gateway - Failures|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties error\_info<br />\| json "properties.error\_info" as error\_info<br />\| WHERE !(error\_info="ERRORINFO\_NO\_ERROR")<br />\| count as Count by resource\_name<br />\| order by Count<br />\| limit 10|
|Azure Application Gateway|Top 10 Application Gateways with Error|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Failures|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} properties error\_info<br />\| json "properties.error\_info" as error\_info<br />\| WHERE !(error\_info="ERRORINFO\_NO\_ERROR")<br />\| count as Count by resource\_name<br />\| order by Count<br />\| limit 10|
|Azure Application Gateway|Top 10 Backend Pool Names with Errors|Logs|Azure Application Gateway/Azure Application Gateway - Failures|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}}<br />error\_info backendPoolName<br />\| json "properties.error\_info", "backendPoolName" as error\_info, backendPoolName<br />\| WHERE !(error\_info="ERRORINFO\_NO\_ERROR")<br />\| count as Count by backendPoolName<br />\| order by Count<br />\| limit 10|
|Azure Application Gateway|Top 10 Backend Pool Names with Errors|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Failures|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}}<br />error\_info backendPoolName<br />\| json "properties.error\_info", "backendPoolName" as error\_info, backendPoolName<br />\| WHERE !(error\_info="ERRORINFO\_NO\_ERROR")<br />\| count as Count by backendPoolName<br />\| order by Count<br />\| limit 10|
|Azure Application Gateway|Top 10 Errors by Error Info|Logs|Azure Application Gateway/Azure Application Gateway - Failures|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}}<br /> properties error\_info<br />\| json "operationName", "properties.error\_info", "properties.httpStatus", "backendPoolName", "listenerName" as operationName, error\_info, httpStatus, backendPoolName, listenerName<br />\| WHERE !(error\_info="ERRORINFO\_NO\_ERROR")<br />\| count as Count by operationName, provider\_name, resource\_name, resource\_type, error\_info, httpStatus, backendPoolName, listenerName<br />\| order by Count<br />\| limit 10|
|Azure Application Gateway|Top 10 Errors by Error Info|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Failures|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}}<br /> properties error\_info<br />\| json "operationName", "properties.error\_info", "properties.httpStatus", "backendPoolName", "listenerName" as operationName, error\_info, httpStatus, backendPoolName, listenerName<br />\| WHERE !(error\_info="ERRORINFO\_NO\_ERROR")<br />\| count as Count by operationName, provider\_name, resource\_name, resource\_type, error\_info, httpStatus, backendPoolName, listenerName<br />\| order by Count<br />\| limit 10|
|Azure Application Gateway|Top 10 operations that caused the most errors|Logs|Azure Application Gateway/Azure Application Gateway -  Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name = {{resource\_name}}   provider\_name={{provider\_name}} resource\_type={{resource\_type}}  Administrative <br />\| json "resultType", "operationName", "properties.statusMessage", "category"  as resultType, operationName, failureMessage, category<br />\| parse field=operationname "\*/\*/\*" as provider\_name, resource\_type, operation nodrop<br />\| where category="Administrative" and resultType="Failure"<br />\| count as Count by resource\_name, operation, failureMessage<br />\| order by Count <br />\| limit 10|
|Azure Application Gateway|Top 10 operations that caused the most errors|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway -  Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name = {{resource\_name}}   provider\_name={{provider\_name}} resource\_type={{resource\_type}}  Administrative <br />\| json "resultType", "operationName", "properties.statusMessage", "category"  as resultType, operationName, failureMessage, category<br />\| parse field=operationname "\*/\*/\*" as provider\_name, resource\_type, operation nodrop<br />\| where category="Administrative" and resultType="Failure"<br />\| count as Count by resource\_name, operation, failureMessage<br />\| order by Count <br />\| limit 10|
|Azure Application Gateway|Top 10 Rule Names with Error|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Failures|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}}<br />error\_info ruleName<br />\| json "properties.error\_info", "ruleName" as error\_info, ruleName<br />\| WHERE !(error\_info="ERRORINFO\_NO\_ERROR")<br />\| count as Count by ruleName<br />\| order by Count<br />\| limit 10|
|Azure Application Gateway|Top 10 Rule Names with Error|Logs|Azure Application Gateway/Azure Application Gateway - Failures|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}}<br />error\_info ruleName<br />\| json "properties.error\_info", "ruleName" as error\_info, ruleName<br />\| WHERE !(error\_info="ERRORINFO\_NO\_ERROR")<br />\| count as Count by ruleName<br />\| order by Count<br />\| limit 10|
|Azure Application Gateway|Total Failed Policy Events|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Security and Policy|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} location={{location}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Policy Failure<br />\| JSON "category", "resultType" as category, resultType<br />\| where category="Policy" and resultType="Failure"<br />\| count as Count|
|Azure Application Gateway|Total Failed Policy Events|Logs|Azure Application Gateway/Azure Application Gateway - Security and Policy|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} location={{location}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Policy Failure<br />\| JSON "category", "resultType" as category, resultType<br />\| where category="Policy" and resultType="Failure"<br />\| count as Count|
|Azure Application Gateway|Total Recommendation Events|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Security and Policy|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Recommendation<br />\| JSON "category"<br />\| where category="Recommendation"<br />\| count |
|Azure Application Gateway|Total Recommendation Events|Logs|Azure Application Gateway/Azure Application Gateway - Security and Policy|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Recommendation<br />\| JSON "category"<br />\| where category="Recommendation"<br />\| count |
|Azure Application Gateway|Total Requests|Metrics|Azure Application Gateway/Azure Application Gateway - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=TotalRequests statistic=total \| quantize using sum \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Total Requests|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Traffic|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=TotalRequests statistic=total \| quantize using sum \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Total Security Events|Logs|Azure Application Gateway/Azure Application Gateway - Security and Policy|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Security<br />\| JSON "category"<br />\| where category="Security"<br />\| count as Count by category|
|Azure Application Gateway|Total Security Events|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Security and Policy|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Security<br />\| JSON "category"<br />\| where category="Security"<br />\| count as Count by category|
|Azure Application Gateway|Total Success Policy Events|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Security and Policy|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} location={{location}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Policy <br />\| JSON "category", "resultType" as category, resultType<br />\| where category="Policy" and (resultType="Success" or resultType="Accept")<br />\| count as Count|
|Azure Application Gateway|Total Success Policy Events|Logs|Azure Application Gateway/Azure Application Gateway - Security and Policy|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Policy Success<br />\| JSON "category", "resultType", "properties.message", "properties.resourceLocation", "properties.entity", "properties.policies" as category, resultType, message, resourceLocation, entity, policies<br />\| parse field=entity "/subscriptions/\*/resourceGroups/\*/providers/\*/\*/\*" as subscription\_id, resource\_group, providers, virtualMachineScaleSets, aks nodrop<br />\| where category="Policy" and (resultType="Success" or resultType="Accept")<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count as Count by time, level, resultType, resource\_group, resource\_name, location, policies|
|Azure Application Gateway|Total Success Policy Events|Logs|Azure Application Gateway/Azure Application Gateway - Security and Policy|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} location={{location}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Policy <br />\| JSON "category", "resultType" as category, resultType<br />\| where category="Policy" and (resultType="Success" or resultType="Accept")<br />\| count as Count|
|Azure Application Gateway|Total Success Policy Events|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway - Security and Policy|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Policy Success<br />\| JSON "category", "resultType", "properties.message", "properties.resourceLocation", "properties.entity", "properties.policies" as category, resultType, message, resourceLocation, entity, policies<br />\| parse field=entity "/subscriptions/\*/resourceGroups/\*/providers/\*/\*/\*" as subscription\_id, resource\_group, providers, virtualMachineScaleSets, aks nodrop<br />\| where category="Policy" and (resultType="Success" or resultType="Accept")<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count as Count by time, level, resultType, resource\_group, resource\_name, location, policies|
|Azure Application Gateway|Unhealthy Host Count|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=UnhealthyHostCount statistic=average \| quantize using avg \| avg|
|Azure Application Gateway|UnHealthy Host Count|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Backend|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=UnhealthyHostCount statistic=average \| quantize using avg \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Unhealthy Host Count|Metrics|Azure Application Gateway/Azure Application Gateway - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=UnhealthyHostCount statistic=average \| quantize using avg \| avg|
|Azure Application Gateway|UnHealthy Host Count|Metrics|Azure Application Gateway/Azure Application Gateway - Backend|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=UnhealthyHostCount statistic=average \| quantize using avg \| avg by resource\_group, resource\_name|
|Azure Application Gateway|UnHealthy Host Count|Metrics|Azure Application Gateway/Azure Application Gateway - Backend|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=UnhealthyHostCount statistic=average \| avg by resource\_group, resource\_name|
|Azure Application Gateway|UnHealthy Host Count|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Backend|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=UnhealthyHostCount statistic=average \| avg by resource\_group, resource\_name|
|Azure Application Gateway|Users / Applications by Operation type|Logs|Azure Application Gateway/Azure Application Gateway -  Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}}<br />provider\_name={{provider\_name}} resource\_type={{resource\_type}} Administrative <br />\| JSON "properties.statusCode", "properties.message", "resultType", "category", "operationName", "callerIpAddress", "resultSignature", "level", "identity.claims.idtyp", "identity.claims.name", "identity.claims.appid" as statusCode, message, resultType, category, operationName, callerIpAddress, resultSignature, level, idtyp, name, appid nodrop<br />\| where resultType in ("Accept", "Success") and category="Administrative" <br />\| if (idtyp =="user", name, appid) as name<br />\| "Others" as operationType<br />\| if (toUppercase(operationName) matches /WRITE/, "WRITE", operationType) as operationType <br />\| if (toUppercase(operationName) matches /READ/, "READ", operationType) as operationType <br />\| if (toUppercase(operationName) matches /DELETE/, "DELETE", operationType) as operationType <br />\| count by name, operationType<br />\| transpose row name column operationType|
|Azure Application Gateway|Users / Applications by Operation type|Logs|Installed Apps/Azure Application Gateway/Azure Application Gateway -  Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}}<br />provider\_name={{provider\_name}} resource\_type={{resource\_type}} Administrative <br />\| JSON "properties.statusCode", "properties.message", "resultType", "category", "operationName", "callerIpAddress", "resultSignature", "level", "identity.claims.idtyp", "identity.claims.name", "identity.claims.appid" as statusCode, message, resultType, category, operationName, callerIpAddress, resultSignature, level, idtyp, name, appid nodrop<br />\| where resultType in ("Accept", "Success") and category="Administrative" <br />\| if (idtyp =="user", name, appid) as name<br />\| "Others" as operationType<br />\| if (toUppercase(operationName) matches /WRITE/, "WRITE", operationType) as operationType <br />\| if (toUppercase(operationName) matches /READ/, "READ", operationType) as operationType <br />\| if (toUppercase(operationName) matches /DELETE/, "DELETE", operationType) as operationType <br />\| count by name, operationType<br />\| transpose row name column operationType|
|Azure Application Gateway|Variable Capacity Units|Metrics|Azure Application Gateway/Azure Application Gateway - Billing|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=CapacityUnits statistic=average \| quantize using avg \| avg by metric |
|Azure Application Gateway|Variable Capacity Units|Metrics|Azure Application Gateway/Azure Application Gateway - Billing|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=CapacityUnits statistic=average\| quantize using avg \| avg by metric |
|Azure Application Gateway|Variable Capacity Units|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Billing|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=CapacityUnits statistic=average\| quantize using avg \| avg by metric |
|Azure Application Gateway|Variable Capacity Units|Metrics|Installed Apps/Azure Application Gateway/Azure Application Gateway - Billing|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} metric=CapacityUnits statistic=average \| quantize using avg \| avg by metric |

