# Couchbase
## Sumo Logic App For: Couchbase
Couchbase is a distributed document database with a powerful search engine and in-built operational and analytical capabilities. It brings the power of NoSQL to the edge and provides fast, efficient bidirectional synchronization of data between the edge and the cloud. The Sumo Logic app for Couchbase helps you monitor activity in Couchbase. The preconfigured dashboards provide insight into the Health of Cluster, The Status of The Buckets, I/O of Reading/Writing, Errors, Events of Couchbase Servers that help you understand your clusters
Docs Link: [Couchbase](https://help.sumologic.com/?cid=220202)

## Searches

### Log Searches

- **Add/Remove Node Events**: from Dashboard: Couchbase/Logs/Couchbase - Events 
- **Average Latency of All HTTP Requests**: from Dashboard: Couchbase/Logs/Couchbase - HTTP Access 
- **Bucket Selected Events**: from Dashboard: Couchbase/Logs/Couchbase - Events 
- **Buckets Not Ready**: from Dashboard: Couchbase/Logs/Couchbase - Errors 
- **Create/Delete Bucket Events**: from Dashboard: Couchbase/Logs/Couchbase - Events 
- **Error Queries**: from Dashboard: Couchbase/Logs/Couchbase - Errors 
- **Group Events**: from Dashboard: Couchbase/Logs/Couchbase - Events 
- **HTTP Method**: from Dashboard: Couchbase/Logs/Couchbase - HTTP Access 
- **HTTP Response Code**: from Dashboard: Couchbase/Logs/Couchbase - HTTP Access 
- **Last 10 Error Queries**: from Dashboard: Couchbase/Couchbase - Overview 
- **Last 10 Logs for HTTP Access**: from Dashboard: Couchbase/Logs/Couchbase - HTTP Access 
- **Last 100 Error Logs**: from Dashboard: Couchbase/Logs/Couchbase - Errors 
- **Login Failure on Management Portal**: from Dashboard: Couchbase/Logs/Couchbase - Events 
- **Login Success on Management Portal**: from Dashboard: Couchbase/Logs/Couchbase - Events 
- **Node Down**: from Dashboard: Couchbase/Logs/Couchbase - Errors 
- **Nodes Not Respond**: from Dashboard: Couchbase/Logs/Couchbase - Errors 
- **Rebalance Events**: from Dashboard: Couchbase/Logs/Couchbase - Events 
- **Top 10 Client Agent Accessed**: from Dashboard: Couchbase/Logs/Couchbase - HTTP Access 
- **Top 10 IP Client Accessed**: from Dashboard: Couchbase/Logs/Couchbase - HTTP Access 
- **Top 10 Username Accessed**: from Dashboard: Couchbase/Logs/Couchbase - HTTP Access 
- **URLs Experiencing with 4XX Response Code**: from Dashboard: Couchbase/Logs/Couchbase - HTTP Access 
- **URLs Experiencing with 5XX Response Code**: from Dashboard: Couchbase/Logs/Couchbase - HTTP Access 
- **User Events**: from Dashboard: Couchbase/Logs/Couchbase - Events

### Metric Searches

- **Amount of Memory Available**: from Dashboard: Couchbase/Metrics/Couchbase - Cluster Resources 
- **Amount of Swap Space in Use**: from Dashboard: Couchbase/Metrics/Couchbase - Cluster Resources 
- **Average Age of Active Items in the Queue**: from Dashboard: Couchbase/Metrics/Couchbase - Disk Queues 
- **Average Age of Pending Items in the Queue**: from Dashboard: Couchbase/Metrics/Couchbase - Disk Queues 
- **Average Age of Repica Items in the Queue**: from Dashboard: Couchbase/Metrics/Couchbase - Disk Queues 
- **Bytes Read Over Time**: from Dashboard: Couchbase/Metrics/Couchbase - Bucket I/O 
- **Bytes Written Over Time**: from Dashboard: Couchbase/Metrics/Couchbase - Bucket I/O 
- **CPU Usage Percent**: from Dashboard: Couchbase/Couchbase - Overview 
- **DCP Connections**: from Dashboard: Couchbase/Metrics/Couchbase - DCP Queues 
- **DCP Senders**: from Dashboard: Couchbase/Metrics/Couchbase - DCP Queues 
- **Delete Hits Over Time**: from Dashboard: Couchbase/Metrics/Couchbase - Bucket I/O 
- **Delete Misses Over Time**: from Dashboard: Couchbase/Metrics/Couchbase - Bucket I/O 
- **Disk Usage**: from Dashboard: Couchbase/Metrics/Couchbase - Cluster Resources 
- **Disk write queue**: from Dashboard: Couchbase/Couchbase - Overview 
- **Ejections**: from Dashboard: Couchbase/Metrics/Couchbase - Cluster Resources 
- **Ejections**: from Dashboard: Couchbase/Couchbase - Overview 
- **High and Low Water Mark**: from Dashboard: Couchbase/Metrics/Couchbase - Cluster Resources 
- **Items Remaining**: from Dashboard: Couchbase/Metrics/Couchbase - DCP Queues 
- **Memory Headroom**: from Dashboard: Couchbase/Metrics/Couchbase - Cluster Resources 
- **Memory Usage Percent**: from Dashboard: Couchbase/Couchbase - Overview 
- **Number of Active Items Being Put on the Active Item Disk Queue**: from Dashboard: Couchbase/Metrics/Couchbase - Disk Queues 
- **Number of Active Items Waiting to be Written to Disk**: from Dashboard: Couchbase/Metrics/Couchbase - Disk Queues 
- **Number of Bucket**: from Dashboard: Couchbase/Couchbase - Overview 
- **Number of Bytes Per Second Being Sent for Replication/XDCR DCP Connections**: from Dashboard: Couchbase/Metrics/Couchbase - DCP Queues 
- **Number of Bytes Sent**: from Dashboard: Couchbase/Metrics/Couchbase - XDCR 
- **Number of DCP XDCR Items Remaining**: from Dashboard: Couchbase/Metrics/Couchbase - XDCR 
- **Number of DCP XDCR Items Sent**: from Dashboard: Couchbase/Metrics/Couchbase - XDCR 
- **Number of Internal XDCR DCP Connections**: from Dashboard: Couchbase/Metrics/Couchbase - XDCR 
- **Number of Items Being Sent for a Producer**: from Dashboard: Couchbase/Metrics/Couchbase - DCP Queues 
- **Number of Items in "Active" vBuckets**: from Dashboard: Couchbase/Metrics/Couchbase - vBucket 
- **Number of Items in "Pending"  vBuckets**: from Dashboard: Couchbase/Metrics/Couchbase - vBucket 
- **Number of Items in Buckets**: from Dashboard: Couchbase/Couchbase - Overview 
- **Number of Items Updated on Disk Per Second**: from Dashboard: Couchbase/Metrics/Couchbase - Bucket I/O 
- **Number of Metadata Delete Operations for XDCR**: from Dashboard: Couchbase/Metrics/Couchbase - XDCR 
- **Number of Metadata Read Operations for XDCR**: from Dashboard: Couchbase/Metrics/Couchbase - XDCR 
- **Number of Nodes**: from Dashboard: Couchbase/Couchbase - Overview 
- **Number of Operations With a CAS id Per Second**: from Dashboard: Couchbase/Metrics/Couchbase - Bucket I/O 
- **Number of Pending Items Being Put on the Pending Item Disk Queue**: from Dashboard: Couchbase/Metrics/Couchbase - Disk Queues 
- **Number of Pending Items Waiting to be Written to Disk**: from Dashboard: Couchbase/Metrics/Couchbase - Disk Queues 
- **Number of Reads (Get Operations) Per Second**: from Dashboard: Couchbase/Metrics/Couchbase - Bucket I/O 
- **Number of Replica Items Being Put on the Replica Item Disk Queue**: from Dashboard: Couchbase/Metrics/Couchbase - Disk Queues 
- **Number of Replica Items Waiting to be Written to Disk**: from Dashboard: Couchbase/Metrics/Couchbase - Disk Queues 
- **Number of Set Operations for XDCR**: from Dashboard: Couchbase/Metrics/Couchbase - XDCR 
- **Number of vBuckets in the "Active" State**: from Dashboard: Couchbase/Metrics/Couchbase - vBucket 
- **Number of vBuckets in the "Pending" State**: from Dashboard: Couchbase/Metrics/Couchbase - vBucket 
- **Number of vBuckets in the "Replica" State**: from Dashboard: Couchbase/Metrics/Couchbase - vBucket 
- **Number of Writes (Set Operations) Per Second**: from Dashboard: Couchbase/Metrics/Couchbase - Bucket I/O 
- **Number of XDCR Senders**: from Dashboard: Couchbase/Metrics/Couchbase - XDCR 
- **Operations per Second**: from Dashboard: Couchbase/Couchbase - Overview 
- **Out of Memory Errors**: from Dashboard: Couchbase/Couchbase - Overview 
- **Out of Memory Errors**: from Dashboard: Couchbase/Metrics/Couchbase - Cluster Resources 
- **Percentage of All Items Cached in RAM**: from Dashboard: Couchbase/Metrics/Couchbase - vBucket 
- **Percentage of CPU**: from Dashboard: Couchbase/Metrics/Couchbase - Cluster Resources 
- **Percentage of Memory Used**: from Dashboard: Couchbase/Metrics/Couchbase - Cluster Resources 
- **Rate of Requests on Management Port**: from Dashboard: Couchbase/Metrics/Couchbase - Cluster Resources 
- **Rate of Streaming Request Wakeups on Management Port**: from Dashboard: Couchbase/Metrics/Couchbase - Cluster Resources 
- **Resident Item Ratio**: from Dashboard: Couchbase/Metrics/Couchbase - Bucket I/O 
- **Resident item ratio**: from Dashboard: Couchbase/Couchbase - Overview 
- **Total Amount of Operations Per Second**: from Dashboard: Couchbase/Metrics/Couchbase - Bucket I/O 
- **Total Bytes Read**: from Dashboard: Couchbase/Couchbase - Overview 
- **Total Bytes Written**: from Dashboard: Couchbase/Couchbase - Overview 
- **Total Number of Current Connections**: from Dashboard: Couchbase/Couchbase - Overview 
- **Total Number of Documents**: from Dashboard: Couchbase/Couchbase - Overview 
- **Total XDCR Operations**: from Dashboard: Couchbase/Metrics/Couchbase - XDCR

## Search Table

|app\_topic|search\_name|type|origin|search|
|:--|:--|:--|:--|:--|
|Couchbase/Logs|Add/Remove Node Events|Logs|Couchbase/Logs/Couchbase - Events|\_sourceCategory = \*couchbase\* db\_cluster={{db\_cluster}} db\_system="couchbase" "node"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| json "name" as event\_name<br />\| where event\_name matches "\*node\*"<br />\| json "timestamp" as time<br />\| json "description" as description \| json "hostname" as node\_name<br />\| count by time,event\_name,node\_name,description\| limit 100 \| sort by time<br />\|fields time,event\_name,node\_name,description|
|Couchbase/Metrics|Amount of Memory Available|Metrics|Couchbase/Metrics/Couchbase - Cluster Resources|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_mem\_actual\_free db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster|
|Couchbase/Metrics|Amount of Swap Space in Use|Metrics|Couchbase/Metrics/Couchbase - Cluster Resources|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_swap\_used db\_cluster={{db\_cluster}} bucket={{bucket}}\| avg by db\_cluster|
|Couchbase/Metrics|Average Age of Active Items in the Queue|Metrics|Couchbase/Metrics/Couchbase - Disk Queues|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_vb\_avg\_active\_queue\_age db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster,bucket|
|Couchbase/Metrics|Average Age of Pending Items in the Queue|Metrics|Couchbase/Metrics/Couchbase - Disk Queues|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_vb\_avg\_pending\_queue\_age db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster,bucket|
|Couchbase/Metrics|Average Age of Repica Items in the Queue|Metrics|Couchbase/Metrics/Couchbase - Disk Queues|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_vb\_avg\_replica\_queue\_age db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster,bucket|
|Couchbase/Logs|Average Latency of All HTTP Requests|Logs|Couchbase/Logs/Couchbase - HTTP Access|\_sourceCategory = \*couchbase\* db\_cluster={{db\_cluster}} db\_system="couchbase"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| parse regex "(?\<src\_ip\>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\s+\\-\\s+(?\<username\>\\S+)\\s+\\[(?\<time\>.+)\\]\\s+\\"(?:(?\<method\>\\w+)\\s+(?\<path\>\\S+)\\sHTTP\\/1.1)\\"\\s+(?\<code\>\\d+)\\s(?\<bytes\>\\d+)\\s(?\<origin\_url\>\\S+) \\"(?\<agent\>.+)\\"\\s(?\<latency\>\\d+)"<br />\| avg(latency)|
|Couchbase/Logs|Bucket Selected Events|Logs|Couchbase/Logs/Couchbase - Events|\_sourceCategory = \*couchbase\* db\_cluster={{db\_cluster}} db\_system="couchbase" "select bucket"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| json "name" as event\_name<br />\| where event\_name matches "select bucket"<br />\| json "bucket"<br />\| count as count by bucket|
|Couchbase/Logs|Buckets Not Ready|Logs|Couchbase/Logs/Couchbase - Errors|\_sourceCategory = \*couchbase\* db\_cluster={{db\_cluster}} db\_system="couchbase" "buckets became not ready on node" "error"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\|replace (\_raw,/\\s+/," ") as \_raw<br />\| parse regex "\\'\\S+@(?\<node\>\\S+)\\'\\:\\s+\\[(?\<buckets\>.+)\\]," \| parse regex field=buckets "\\"(?\<bucket\>[^,]+)\\"" multi<br />\| parse regex "ns\_server:error,(?\<time\>\\S+)," \| \_raw as msg<br />\| count by time,bucket,node,msg  \| limit 100 \| fields time,bucket,node,msg<br />|
|Couchbase/Metrics/Couchbase - Bucket I|Bytes Read Over Time|Metrics|Couchbase/Metrics/Couchbase - Bucket I/O|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_bytes\_read db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by bucket,db\_cluster|
|Couchbase/Metrics/Couchbase - Bucket I|Bytes Written Over Time|Metrics|Couchbase/Metrics/Couchbase - Bucket I/O|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_bytes\_written db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by bucket,db\_cluster|
|Couchbase|CPU Usage Percent|Metrics|Couchbase/Couchbase - Overview|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_cpu\_utilization\_rate db\_cluster={{db\_cluster}} \| avg by db\_cluster,host|
|Couchbase/Logs|Create/Delete Bucket Events|Logs|Couchbase/Logs/Couchbase - Events|\_sourceCategory = \*couchbase\* db\_cluster={{db\_cluster}} db\_system="couchbase" "bucket"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| json "name" as event\_name<br />\| where event\_name matches "\*bucket\*"<br />\| json "timestamp" as time<br />\| json "description" as description<br />\| json "bucket\_name" as bucket\_name<br />\| json "real\_userid.user" as action\_by\_user<br />\| count by time,event\_name,description,bucket\_name,action\_by\_user \| limit 100 \| sort by time<br />\|fields time,event\_name,description,bucket\_name,action\_by\_user |
|Couchbase/Metrics|DCP Connections|Metrics|Couchbase/Metrics/Couchbase - DCP Queues|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_ep\_dcp\_replica\_count db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster,bucket|
|Couchbase/Metrics|DCP Senders|Metrics|Couchbase/Metrics/Couchbase - DCP Queues|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_ep\_dcp\_replica\_producer\_count db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster,bucket|
|Couchbase/Metrics/Couchbase - Bucket I|Delete Hits Over Time|Metrics|Couchbase/Metrics/Couchbase - Bucket I/O|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_delete\_hits db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by bucket,db\_cluster|
|Couchbase/Metrics/Couchbase - Bucket I|Delete Misses Over Time|Metrics|Couchbase/Metrics/Couchbase - Bucket I/O|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_delete\_misses db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by bucket,db\_cluster|
|Couchbase/Metrics|Disk Usage|Metrics|Couchbase/Metrics/Couchbase - Cluster Resources|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_disk\_used db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster|
|Couchbase|Disk write queue|Metrics|Couchbase/Couchbase - Overview|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_disk\_write\_queue  db\_cluster={{db\_cluster}} \| avg by db\_cluster|
|Couchbase|Ejections|Metrics|Couchbase/Couchbase - Overview|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_ep\_num\_value\_ejects db\_cluster={{db\_cluster}} \| avg by db\_cluster,bucket \| sum|
|Couchbase/Metrics|Ejections|Metrics|Couchbase/Metrics/Couchbase - Cluster Resources|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_ep\_num\_value\_ejects  db\_cluster={{db\_cluster}} bucket={{bucket}}\| avg by db\_cluster|
|Couchbase/Logs|Error Queries|Logs|Couchbase/Logs/Couchbase - Errors|\_sourceCategory = \*couchbase\* db\_cluster={{db\_cluster}} db\_system="couchbase" ("ERROR" or "Error")<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| parse regex "\_time=(?\<time\>\\S+)"<br />\| parse regex "\_msg=(?\<msg\>.+)"<br />\| parse regex field=msg "Keyspace\\s\\w+:(?\<bucket\>.+)\\."<br />\| parse regex field=msg "Failed to perform (?\<method\>\\w+)"<br />\|count by time,bucket,method,msg<br />\| fields time,bucket,method,msg<br />\| limit 100<br />|
|Couchbase/Logs|Group Events|Logs|Couchbase/Logs/Couchbase - Events|\_sourceCategory = \*couchbase\* db\_cluster={{db\_cluster}} db\_system="couchbase" "group"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| json "name" as event\_name<br />\| where event\_name matches "\*group\*"<br />\| where event\_name matches /set user group\|delete user group/<br />\| json "timestamp" as time<br />\| json "description" as description<br />\| json "group\_name" as group\_name<br />\| json "real\_userid.user" as action\_by\_user<br />\| count by time,event\_name,description,group\_name,action\_by\_user \| limit 100 \| sort by time<br />\|fields time,event\_name,description,group\_name,action\_by\_user |
|Couchbase/Metrics|High and Low Water Mark|Metrics|Couchbase/Metrics/Couchbase - Cluster Resources|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_ep\_mem\_low\_wat db\_cluster={{db\_cluster}} bucket={{bucket}}\| avg by db\_cluster|
|Couchbase/Logs|HTTP Method|Logs|Couchbase/Logs/Couchbase - HTTP Access|\_sourceCategory = \*couchbase\* db\_cluster={{db\_cluster}} db\_system="couchbase"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| parse regex "(?\<src\_ip\>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\s+\\-\\s+(?\<username\>\\S+)\\s+\\[(?\<time\>.+)\\]\\s+\\"(?:(?\<method\>\\w+)\\s+(?\<path\>\\S+)\\sHTTP\\/1.1)\\"\\s+(?\<code\>\\d+)\\s(?\<bytes\>\\d+)\\s(?\<origin\_url\>\\S+) \\"(?\<agent\>.+)\\"\\s(?\<latency\>\\d+)"<br />\| count by method|
|Couchbase/Logs|HTTP Response Code|Logs|Couchbase/Logs/Couchbase - HTTP Access|\_sourceCategory = \*couchbase\* db\_cluster={{db\_cluster}} db\_system="couchbase"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| parse regex "(?\<src\_ip\>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\s+\\-\\s+(?\<username\>\\S+)\\s+\\[(?\<time\>.+)\\]\\s+\\"(?:(?\<method\>\\w+)\\s+(?\<path\>\\S+)\\sHTTP\\/1.1)\\"\\s+(?\<code\>\\d+)\\s(?\<bytes\>\\d+)\\s(?\<origin\_url\>\\S+) \\"(?\<agent\>.+)\\"\\s(?\<latency\>\\d+)"<br />\| count by code|
|Couchbase/Metrics|Items Remaining|Metrics|Couchbase/Metrics/Couchbase - DCP Queues|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_ep\_dcp\_replica\_items\_remaining db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster,bucket|
|Couchbase|Last 10 Error Queries|Logs|Couchbase/Couchbase - Overview|\_sourceCategory = \*couchbase\* db\_cluster={{db\_cluster}} db\_system="couchbase" ("ERROR" or "Error")<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| parse regex "\_time=(?\<time\>\\S+)"<br />\| parse regex "\_msg=(?\<msg\>.+)"<br />\| parse regex field=msg "Keyspace\\s\\w+:(?\<bucket\>.+)\\."<br />\|count by time,bucket,msg<br />\| fields time,bucket,msg<br />\| limit 10|
|Couchbase/Logs|Last 10 Logs for HTTP Access|Logs|Couchbase/Logs/Couchbase - HTTP Access|\_sourceCategory = \*couchbase\* db\_cluster={{db\_cluster}} db\_system="couchbase" <br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| parse regex "(?\<src\_ip\>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\s+\\-\\s+(?\<username\>\\S+)\\s+\\[(?\<time\>.+)\\]\\s+\\"(?:(?\<method\>\\w+)\\s+(?\<path\>\\S+)\\sHTTP\\/1.1)\\"\\s+(?\<code\>\\d+)\\s(?\<bytes\>\\d+)\\s(?\<origin\_url\>\\S+) \\"(?\<agent\>.+)\\"\\s(?\<latency\>\\d+)"\| limit 10 \|\_raw as message<br />\| count as count by time,message \| sort by time,count \| fields time,message|
|Couchbase/Logs|Last 100 Error Logs|Logs|Couchbase/Logs/Couchbase - Errors|\_sourceCategory = \*couchbase\* db\_cluster={{db\_cluster}} db\_system="couchbase" "ns\_server:error" <br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\|replace (\_raw,/\\s+/," ") as \_raw<br />\| parse regex "ns\_server:error,(?\<time\>\\S+),"\|\_raw as msg \| limit 100 \| count by time,msg \| sort by time \| fields time,msg<br />|
|Couchbase/Logs|Login Failure on Management Portal|Logs|Couchbase/Logs/Couchbase - Events|\_sourceCategory = \*couchbase\* db\_cluster={{db\_cluster}} db\_system="couchbase" "login failure"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| json "name" as event\_name<br />\| where event\_name="login failure"<br />\| json "remote.ip" as client\_ip <br />\| json "local.ip" as couchbase\_server<br />\| count as count by client\_ip,couchbase\_server \| sort by count|
|Couchbase/Logs|Login Success on Management Portal|Logs|Couchbase/Logs/Couchbase - Events|\_sourceCategory = \*couchbase\* db\_cluster={{db\_cluster}} db\_system="couchbase" "login success"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| json "name" as event\_name<br />\| where event\_name="login success"<br />\| json "remote.ip" as client\_ip <br />\| json "local.ip" as couchbase\_server<br />\| json "real\_userid.user" as user<br />\| count as count by user,client\_ip,couchbase\_server \| sort by count|
|Couchbase/Metrics|Memory Headroom|Metrics|Couchbase/Metrics/Couchbase - Cluster Resources|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_ep\_mem\_high\_wat  db\_cluster={{db\_cluster}} bucket={{bucket}}\| avg by db\_cluster|
|Couchbase|Memory Usage Percent|Metrics|Couchbase/Couchbase - Overview|\_sourceCategory = \*couchbase\* metric=couchbase\_node\_memory\_free db\_cluster={{db\_cluster}} \| avg by db\_cluster,host|
|Couchbase/Logs|Node Down|Logs|Couchbase/Logs/Couchbase - Errors|\_sourceCategory = \*couchbase\* db\_cluster={{db\_cluster}} db\_system="couchbase" "error" "nodedown"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\|replace (\_raw,/\\s+/," ") as \_raw<br />\|parse regex "nodedown,\\s'\\S+@(?\<node\>\\S+)\\'"<br />\| parse regex "ns\_server:error,(?\<time\>\\S+),"\|\_raw as msg \| count by time,node,msg \| limit 100 \| fields time,node,msg<br />|
|Couchbase/Logs|Nodes Not Respond|Logs|Couchbase/Logs/Couchbase - Errors|\_sourceCategory = \*couchbase\* db\_cluster={{db\_cluster}} db\_system="couchbase" "error" "Some nodes didn't respond" <br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\|replace (\_raw,/\\s+/," ") as \_raw<br />\| parse regex "stats:error,(?\<time\>\\S+),"<br />\| parse regex "Some nodes didn't respond: \\[(?\<temp\_nodes\>.+)\\]" \| parse regex field=temp\_nodes "\\'(?\<node\_temp\>[^,]+)\\'" multi \| parse regex field=node\_temp "@(?\<node\>.+)"\| \_raw as msg \| count by time,node,msg\| limit 100\|sort by time\|fields time,node,msg |
|Couchbase/Metrics|Number of Active Items Being Put on the Active Item Disk Queue|Metrics|Couchbase/Metrics/Couchbase - Disk Queues|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_vb\_active\_queue\_fill db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster,bucket|
|Couchbase/Metrics|Number of Active Items Waiting to be Written to Disk|Metrics|Couchbase/Metrics/Couchbase - Disk Queues|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_vb\_active\_queue\_size db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster,bucket|
|Couchbase|Number of Bucket|Metrics|Couchbase/Couchbase - Overview|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_item\_count db\_cluster={{db\_cluster}} \| count by bucket,db\_cluster\| count|
|Couchbase/Metrics|Number of Bytes Per Second Being Sent for Replication/XDCR DCP Connections|Metrics|Couchbase/Metrics/Couchbase - DCP Queues|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_ep\_dcp\_replica\_total\_bytes db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster,bucket|
|Couchbase/Metrics|Number of Bytes Sent|Metrics|Couchbase/Metrics/Couchbase - XDCR|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_ep\_dcp\_xdcr\_total\_bytes db\_cluster={{db\_cluster}} bucket={{bucket}} \|sum|
|Couchbase/Metrics|Number of DCP XDCR Items Remaining|Metrics|Couchbase/Metrics/Couchbase - XDCR|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_ep\_dcp\_xdcr\_items\_remaining db\_cluster={{db\_cluster}} bucket={{bucket}} \|sum|
|Couchbase/Metrics|Number of DCP XDCR Items Sent|Metrics|Couchbase/Metrics/Couchbase - XDCR|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_ep\_dcp\_xdcr\_items\_sent db\_cluster={{db\_cluster}} bucket={{bucket}} \|sum|
|Couchbase/Metrics|Number of Internal XDCR DCP Connections|Metrics|Couchbase/Metrics/Couchbase - XDCR|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_ep\_dcp\_xdcr\_count db\_cluster={{db\_cluster}} bucket={{bucket}} \|sum|
|Couchbase/Metrics|Number of Items Being Sent for a Producer|Metrics|Couchbase/Metrics/Couchbase - DCP Queues|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_ep\_dcp\_replica\_items\_sent db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster,bucket|
|Couchbase/Metrics|Number of Items in "Active" vBuckets|Metrics|Couchbase/Metrics/Couchbase - vBucket|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_curr\_items db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster,bucket|
|Couchbase/Metrics|Number of Items in "Pending"  vBuckets|Metrics|Couchbase/Metrics/Couchbase - vBucket|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_vb\_pending\_curr\_items db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster,bucket|
|Couchbase|Number of Items in Buckets|Metrics|Couchbase/Couchbase - Overview|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_item\_count db\_cluster={{db\_cluster}} \| avg by db\_cluster,bucket|
|Couchbase/Metrics/Couchbase - Bucket I|Number of Items Updated on Disk Per Second|Metrics|Couchbase/Metrics/Couchbase - Bucket I/O|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_ep\_ops\_update db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by bucket,db\_cluster|
|Couchbase/Metrics|Number of Metadata Delete Operations for XDCR|Metrics|Couchbase/Metrics/Couchbase - XDCR|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_ep\_num\_ops\_del\_meta db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster,bucket|
|Couchbase/Metrics|Number of Metadata Read Operations for XDCR|Metrics|Couchbase/Metrics/Couchbase - XDCR|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_ep\_num\_ops\_get\_meta db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster,bucket|
|Couchbase|Number of Nodes|Metrics|Couchbase/Couchbase - Overview|\_sourceCategory = \*couchbase\* metric=couchbase\_node\_memory\_total db\_cluster={{db\_cluster}} \| count by host,db\_cluster \| max by db\_cluster \| sum|
|Couchbase/Metrics/Couchbase - Bucket I|Number of Operations With a CAS id Per Second|Metrics|Couchbase/Metrics/Couchbase - Bucket I/O|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_cas\_hits db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by bucket,db\_cluster|
|Couchbase/Metrics|Number of Pending Items Being Put on the Pending Item Disk Queue|Metrics|Couchbase/Metrics/Couchbase - Disk Queues|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_vb\_pending\_queue\_fill db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster,bucket|
|Couchbase/Metrics|Number of Pending Items Waiting to be Written to Disk|Metrics|Couchbase/Metrics/Couchbase - Disk Queues|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_vb\_pending\_queue\_size db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster,bucket|
|Couchbase/Metrics/Couchbase - Bucket I|Number of Reads (Get Operations) Per Second|Metrics|Couchbase/Metrics/Couchbase - Bucket I/O|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_cmd\_get db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by bucket,db\_cluster|
|Couchbase/Metrics|Number of Replica Items Being Put on the Replica Item Disk Queue|Metrics|Couchbase/Metrics/Couchbase - Disk Queues|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_vb\_replica\_queue\_fill db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster,bucket|
|Couchbase/Metrics|Number of Replica Items Waiting to be Written to Disk|Metrics|Couchbase/Metrics/Couchbase - Disk Queues|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_vb\_replica\_queue\_size db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster,bucket|
|Couchbase/Metrics|Number of Set Operations for XDCR|Metrics|Couchbase/Metrics/Couchbase - XDCR|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_ep\_num\_ops\_set\_meta db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster,bucket|
|Couchbase/Metrics|Number of vBuckets in the "Active" State|Metrics|Couchbase/Metrics/Couchbase - vBucket|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_vb\_active\_num db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster,bucket|
|Couchbase/Metrics|Number of vBuckets in the "Pending" State|Metrics|Couchbase/Metrics/Couchbase - vBucket|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_vb\_pending\_num db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster,bucket|
|Couchbase/Metrics|Number of vBuckets in the "Replica" State|Metrics|Couchbase/Metrics/Couchbase - vBucket|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_vb\_replica\_num db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster,bucket|
|Couchbase/Metrics/Couchbase - Bucket I|Number of Writes (Set Operations) Per Second|Metrics|Couchbase/Metrics/Couchbase - Bucket I/O|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_cmd\_set db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by bucket,db\_cluster|
|Couchbase/Metrics|Number of XDCR Senders|Metrics|Couchbase/Metrics/Couchbase - XDCR|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_ep\_dcp\_xdcr\_producer\_count db\_cluster={{db\_cluster}} bucket={{bucket}} \|sum|
|Couchbase|Operations per Second|Metrics|Couchbase/Couchbase - Overview|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_ops\_per\_sec  db\_cluster={{db\_cluster}} \| sum by db\_cluster|
|Couchbase/Metrics|Out of Memory Errors|Metrics|Couchbase/Metrics/Couchbase - Cluster Resources|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_ep\_tmp\_oom\_errors  db\_cluster={{db\_cluster}} bucket={{bucket}}\| avg by db\_cluster|
|Couchbase|Out of Memory Errors|Metrics|Couchbase/Couchbase - Overview|\_sourceCategory = \*couchbase\* (metric=couchbase\_bucket\_ep\_oom\_errors or metric=couchbase\_bucket\_ep\_oom\_errors) db\_cluster={{db\_cluster}} \| avg by db\_cluster,bucket \| sum|
|Couchbase/Metrics|Percentage of All Items Cached in RAM|Metrics|Couchbase/Metrics/Couchbase - vBucket|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_ep\_resident\_items\_rate db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster,bucket|
|Couchbase/Metrics|Percentage of CPU|Metrics|Couchbase/Metrics/Couchbase - Cluster Resources|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_cpu\_utilization\_rate db\_cluster={{db\_cluster}} bucket={{bucket}}\| avg by db\_cluster|
|Couchbase/Metrics|Percentage of Memory Used|Metrics|Couchbase/Metrics/Couchbase - Cluster Resources|\_sourceCategory = \*couchbase\* metric=couchbase\_node\_memory\_free db\_cluster={{db\_cluster}} \| avg by db\_cluster|
|Couchbase/Metrics|Rate of Requests on Management Port|Metrics|Couchbase/Metrics/Couchbase - Cluster Resources|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_rest\_requests db\_cluster={{db\_cluster}} bucket={{bucket}}\| avg by db\_cluster|
|Couchbase/Metrics|Rate of Streaming Request Wakeups on Management Port|Metrics|Couchbase/Metrics/Couchbase - Cluster Resources|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_hibernated\_waked db\_cluster={{db\_cluster}} bucket={{bucket}}\| avg by db\_cluster|
|Couchbase/Logs|Rebalance Events|Logs|Couchbase/Logs/Couchbase - Events|\_sourceCategory = \*couchbase\* db\_cluster={{db\_cluster}} db\_system="couchbase" "rebalance"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| json "name" as event\_name<br />\| where event\_name matches "\*rebalance\*"<br />\| json "timestamp" as time<br />\| json "description" as description<br />\| count by time,event\_name,description\| limit 100 \| sort by time<br />\|fields time,event\_name,description|
|Couchbase/Metrics/Couchbase - Bucket I|Resident Item Ratio|Metrics|Couchbase/Metrics/Couchbase - Bucket I/O|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_vb\_active\_resident\_items\_ratio  db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by bucket,db\_cluster|
|Couchbase|Resident item ratio|Metrics|Couchbase/Couchbase - Overview|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_vb\_active\_resident\_items\_ratio  db\_cluster={{db\_cluster}} \| avg by db\_cluster|
|Couchbase/Logs|Top 10 Client Agent Accessed|Logs|Couchbase/Logs/Couchbase - HTTP Access|\_sourceCategory = \*couchbase\* db\_cluster={{db\_cluster}} db\_system="couchbase"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| parse regex "(?\<src\_ip\>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\s+\\-\\s+(?\<username\>\\S+)\\s+\\[(?\<time\>.+)\\]\\s+\\"(?:(?\<method\>\\w+)\\s+(?\<path\>\\S+)\\sHTTP\\/1.1)\\"\\s+(?\<code\>\\d+)\\s(?\<bytes\>\\d+)\\s(?\<origin\_url\>\\S+) \\"(?\<agent\>.+)\\"\\s(?\<latency\>\\d+)"<br />\| count as count by agent \| sort by count \| limit 10|
|Couchbase/Logs|Top 10 IP Client Accessed|Logs|Couchbase/Logs/Couchbase - HTTP Access|\_sourceCategory = \*couchbase\* db\_cluster={{db\_cluster}} db\_system="couchbase"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| parse regex "(?\<src\_ip\>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\s+\\-\\s+(?\<username\>\\S+)\\s+\\[(?\<time\>.+)\\]\\s+\\"(?:(?\<method\>\\w+)\\s+(?\<path\>\\S+)\\sHTTP\\/1.1)\\"\\s+(?\<code\>\\d+)\\s(?\<bytes\>\\d+)\\s(?\<origin\_url\>\\S+) \\"(?\<agent\>.+)\\"\\s(?\<latency\>\\d+)"<br />\| count as count by src\_ip \| sort by count \| limit 10|
|Couchbase/Logs|Top 10 Username Accessed|Logs|Couchbase/Logs/Couchbase - HTTP Access|\_sourceCategory = \*couchbase\* db\_cluster={{db\_cluster}} db\_system="couchbase"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| parse regex "(?\<src\_ip\>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\s+\\-\\s+(?\<username\>\\S+)\\s+\\[(?\<time\>.+)\\]\\s+\\"(?:(?\<method\>\\w+)\\s+(?\<path\>\\S+)\\sHTTP\\/1.1)\\"\\s+(?\<code\>\\d+)\\s(?\<bytes\>\\d+)\\s(?\<origin\_url\>\\S+) \\"(?\<agent\>.+)\\"\\s(?\<latency\>\\d+)"<br />\| count as count by username \| sort by count \| limit 10|
|Couchbase/Metrics/Couchbase - Bucket I|Total Amount of Operations Per Second|Metrics|Couchbase/Metrics/Couchbase - Bucket I/O|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_ops db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by bucket,db\_cluster|
|Couchbase|Total Bytes Read|Metrics|Couchbase/Couchbase - Overview|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_bytes\_read db\_cluster={{db\_cluster}} \| avg by bucket,db\_cluster \| sum|
|Couchbase|Total Bytes Written|Metrics|Couchbase/Couchbase - Overview|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_bytes\_written db\_cluster={{db\_cluster}} \| avg by bucket,db\_cluster \| sum|
|Couchbase|Total Number of Current Connections|Metrics|Couchbase/Couchbase - Overview|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_curr\_connections db\_cluster={{db\_cluster}} \| avg by bucket,db\_cluster \| sum|
|Couchbase|Total Number of Documents|Metrics|Couchbase/Couchbase - Overview|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_item\_count db\_cluster={{db\_cluster}} \| avg by bucket,db\_cluster \| sum|
|Couchbase/Metrics|Total XDCR Operations|Metrics|Couchbase/Metrics/Couchbase - XDCR|\_sourceCategory = \*couchbase\* metric=couchbase\_bucket\_xdc\_ops db\_cluster={{db\_cluster}} bucket={{bucket}} \| avg by db\_cluster,bucket|
|Couchbase/Logs|URLs Experiencing with 4XX Response Code|Logs|Couchbase/Logs/Couchbase - HTTP Access|\_sourceCategory = \*couchbase\* db\_cluster={{db\_cluster}} db\_system="couchbase"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| parse regex "(?\<src\_ip\>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\s+\\-\\s+(?\<username\>\\S+)\\s+\\[(?\<time\>.+)\\]\\s+\\"(?:(?\<method\>\\w+)\\s+(?\<path\>\\S+)\\sHTTP\\/1.1)\\"\\s+(?\<code\>\\d+)\\s(?\<bytes\>\\d+)\\s(?\<origin\_url\>\\S+) \\"(?\<agent\>.+)\\"\\s(?\<latency\>\\d+)"<br />\| where code matches "4\*"<br />\| count as eventCount by path, code<br />\| sort by code, eventCount, path|
|Couchbase/Logs|URLs Experiencing with 5XX Response Code|Logs|Couchbase/Logs/Couchbase - HTTP Access|\_sourceCategory = \*couchbase\* db\_cluster={{db\_cluster}} db\_system="couchbase"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| parse regex "(?\<src\_ip\>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\s+\\-\\s+(?\<username\>\\S+)\\s+\\[(?\<time\>.+)\\]\\s+\\"(?:(?\<method\>\\w+)\\s+(?\<path\>\\S+)\\sHTTP\\/1.1)\\"\\s+(?\<code\>\\d+)\\s(?\<bytes\>\\d+)\\s(?\<origin\_url\>\\S+) \\"(?\<agent\>.+)\\"\\s(?\<latency\>\\d+)"<br />\| where code matches "5\*"<br />\| count as eventCount by path, code<br />\| sort by code, eventCount, path|
|Couchbase/Logs|User Events|Logs|Couchbase/Logs/Couchbase - Events|\_sourceCategory = \*couchbase\* db\_cluster={{db\_cluster}} db\_system="couchbase" "user"<br />\| json "log" as \_rawlog nodrop<br />\| if(isEmpty(\_rawlog),\_raw,\_rawlog) as \_raw<br />\| json "name" as event\_name<br />\| where event\_name matches "\*user\*"<br />\| json "remote.ip" as src\_ip <br />\| json "local.ip" as couchbase\_server<br />\| json "timestamp" as time<br />\|json "identity.user" as username<br />\| json "description" as description<br />\| count by time,event\_name,username,description<br />\| sort by time<br />\| fields time,event\_name,username,description<br />\| limit 100|

