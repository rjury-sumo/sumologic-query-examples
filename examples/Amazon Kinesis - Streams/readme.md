# Amazon Kinesis - Streams

## Searches

### Log Searches

- **Errors in Events**: from Dashboard: Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Events 
- **Events**: from Dashboard: Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Events 
- **Events Over Time**: from Dashboard: Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Events 
- **Kinesis API Calls Events by Region**: from Dashboard: Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Events 
- **Kinesis API Calls Events by User**: from Dashboard: Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Events 
- **Kinesis API Calls Summary Table**: from Dashboard: Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Events 
- **Location of Events**: from Dashboard: Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Events 
- **Top 10 IAM Users**: from Dashboard: Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Events

### Metric Searches

- **Get Bytes (MB) by Stream and Shard**: from Dashboard: Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Metrics 
- **Get Latency by Stream and Shard**: from Dashboard: Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Metrics 
- **Get Records by Stream and Shard**: from Dashboard: Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Metrics 
- **Get Records Success**: from Dashboard: Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Metrics 
- **Incoming Bytes (MB) by Stream and Shard**: from Dashboard: Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Metrics 
- **Incoming Records by Stream and Shard**: from Dashboard: Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Metrics 
- **Iterator Age (ms) by Stream and Shard**: from Dashboard: Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Metrics 
- **Put Latency by Stream and Shard**: from Dashboard: Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Metrics 
- **Read Provisioned Throughput Exceeded**: from Dashboard: Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Metrics 
- **Write Provisioned Throughput Exceeded**: from Dashboard: Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Metrics

## Search Table

|app\_topic|search\_name|type|origin|search|
|:--|:--|:--|:--|:--|
|Amazon Kinesis - Streams|Errors in Events|Logs|Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Events|\_sourceCategory={{Logsdatasource}}  "kinesis.amazonaws.com" errorCode<br />\| json field=\_raw "eventSource", "eventName", "awsRegion", "sourceIPAddress","userAgent" nodrop<br />\| json field=\_raw "requestParameters.streamName" as streamName nodrop<br />\| json field=\_raw "userIdentity.sessionContext.sessionIssuer.userName" as userName nodrop<br />\| json field=\_raw "userIdentity.userName" as userName nodrop<br />\| json field=\_raw "errorCode" as error\_code nodrop<br />\| json field=\_raw "errorMessage" as error\_msg nodrop<br />\| where eventSource="kinesis.amazonaws.com"<br />\|where if ("{{eventname}}" = "\*", true, eventname matches "{{eventname}}") AND if ("{{username}}" = "\*", true, username matches "{{username}}") AND if ("{{sourceipaddress}}" = "\*", true, sourceipaddress matches "{{sourceipaddress}}") AND if ("{{awsregion}}" = "\*", true, awsregion matches "{{awsregion}}")<br />\|count by error\_code, error\_msg, eventName, userName, sourceIPAddress|
|Amazon Kinesis - Streams|Events|Logs|Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Events|\_sourceCategory={{Logsdatasource}}  "kinesis.amazonaws.com"<br />\| json field=\_raw "eventSource", "eventName", "awsRegion", "sourceIPAddress","userAgent" nodrop<br />\| json field=\_raw "requestParameters.streamName" as streamName nodrop<br />\| json field=\_raw "userIdentity.sessionContext.sessionIssuer.userName" as userName nodrop<br />\| json field=\_raw "userIdentity.userName" as userName nodrop<br />\| where eventSource="kinesis.amazonaws.com"<br />\|where if ("{{eventname}}" = "\*", true, eventname matches "{{eventname}}") AND if ("{{username}}" = "\*", true, username matches "{{username}}") AND if ("{{sourceipaddress}}" = "\*", true, sourceipaddress matches "{{sourceipaddress}}") AND if ("{{awsregion}}" = "\*", true, awsregion matches "{{awsregion}}")<br />\|count by eventName|
|Amazon Kinesis - Streams|Events Over Time|Logs|Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Events|\_sourceCategory={{Logsdatasource}}  "kinesis.amazonaws.com"<br />\| json field=\_raw "eventSource", "eventName", "awsRegion", "sourceIPAddress","userAgent" nodrop<br />\| json field=\_raw "requestParameters.streamName" as streamName nodrop<br />\| json field=\_raw "userIdentity.sessionContext.sessionIssuer.userName" as userName nodrop<br />\| where eventSource="kinesis.amazonaws.com"<br />\| timeslice 1h<br />\|where if ("{{eventname}}" = "\*", true, eventname matches "{{eventname}}") AND if ("{{username}}" = "\*", true, username matches "{{username}}") AND if ("{{sourceipaddress}}" = "\*", true, sourceipaddress matches "{{sourceipaddress}}") AND if ("{{awsregion}}" = "\*", true, awsregion matches "{{awsregion}}")<br />\|count by eventName, \_timeslice<br />\| transpose row \_timeslice column eventName <br />\| fillmissing timeslice (1h)|
|Amazon Kinesis - Streams|Get Bytes (MB) by Stream and Shard|Metrics|Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Metrics|region={{region}} streamname={{streamname}} \_sourceCategory={{Metricsdatasource}}  Namespace=AWS/Kinesis metric=GetRecords.Bytes Statistic=Sum \| eval \_value/(1024\*1024)|
|Amazon Kinesis - Streams|Get Latency by Stream and Shard|Metrics|Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Metrics|region={{region}} streamname={{streamname}} \_sourceCategory={{Metricsdatasource}}  Namespace=AWS/Kinesis metric=GetRecords.Latency	 Statistic=Average |
|Amazon Kinesis - Streams|Get Records by Stream and Shard|Metrics|Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Metrics|region={{region}} streamname={{streamname}} \_sourceCategory={{Metricsdatasource}}  Namespace=AWS/Kinesis metric=GetRecords.Records	Statistic=Sum |
|Amazon Kinesis - Streams|Get Records Success|Metrics|Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Metrics|region={{region}} streamname={{streamname}} \_sourceCategory={{Metricsdatasource}}  Namespace=AWS/Kinesis metric=GetRecords.Success Statistic=Average |
|Amazon Kinesis - Streams|Incoming Bytes (MB) by Stream and Shard|Metrics|Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Metrics|region={{region}} streamname={{streamname}} \_sourceCategory={{Metricsdatasource}}  Namespace=AWS/Kinesis metric=IncomingBytes Statistic=Sum \| eval \_value/(1024\*1024)|
|Amazon Kinesis - Streams|Incoming Records by Stream and Shard|Metrics|Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Metrics|region={{region}} streamname={{streamname}} \_sourceCategory={{Metricsdatasource}}  Namespace=AWS/Kinesis metric=IncomingRecords Statistic=Sum |
|Amazon Kinesis - Streams|Iterator Age (ms) by Stream and Shard|Metrics|Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Metrics|region={{region}} streamname={{streamname}} \_sourceCategory={{Metricsdatasource}}  Namespace=AWS/Kinesis metric=GetRecords.IteratorAgeMilliseconds Statistic=Maximum |
|Amazon Kinesis - Streams|Kinesis API Calls Events by Region|Logs|Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Events|\_sourceCategory={{Logsdatasource}} "kinesis.amazonaws.com"<br />\| json field=\_raw "eventSource", "eventName", "awsRegion", "sourceIPAddress","userAgent" nodrop<br />\| json field=\_raw "requestParameters.streamName" as streamName nodrop<br />\| json field=\_raw "userIdentity.sessionContext.sessionIssuer.userName" as userName nodrop<br />\| json field=\_raw "userIdentity.userName" as userName nodrop<br />\| where eventSource="kinesis.amazonaws.com"<br />\|where if ("{{eventname}}" = "\*", true, eventname matches "{{eventname}}") AND if ("{{username}}" = "\*", true, username matches "{{username}}") AND if ("{{sourceipaddress}}" = "\*", true, sourceipaddress matches "{{sourceipaddress}}") AND if ("{{awsregion}}" = "\*", true, awsregion matches "{{awsregion}}")<br />\|count as count by awsRegion, eventName<br />\| transpose row awsRegion column eventName|
|Amazon Kinesis - Streams|Kinesis API Calls Events by User|Logs|Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Events|\_sourceCategory={{Logsdatasource}}  "kinesis.amazonaws.com"<br />\| json field=\_raw "eventSource", "eventName", "awsRegion", "sourceIPAddress","userAgent" nodrop<br />\| json field=\_raw "requestParameters.streamName" as streamName nodrop<br />\| json field=\_raw "userIdentity.sessionContext.sessionIssuer.userName" as userName nodrop<br />\| json field=\_raw "userIdentity.userName" as userName nodrop<br />\| where eventSource="kinesis.amazonaws.com"<br />\|where if ("{{eventname}}" = "\*", true, eventname matches "{{eventname}}") AND if ("{{username}}" = "\*", true, username matches "{{username}}") AND if ("{{sourceipaddress}}" = "\*", true, sourceipaddress matches "{{sourceipaddress}}") AND if ("{{awsregion}}" = "\*", true, awsregion matches "{{awsregion}}")<br />\|count as count by userName, eventName<br />\| transpose row eventName column userName|
|Amazon Kinesis - Streams|Kinesis API Calls Summary Table|Logs|Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Events|\_sourceCategory={{Logsdatasource}}  "kinesis.amazonaws.com"<br />\| json field=\_raw "eventSource", "eventName", "awsRegion", "sourceIPAddress","userAgent" nodrop<br />\| json field=\_raw "requestParameters.streamName" as streamName nodrop<br />\| json field=\_raw "userIdentity.sessionContext.sessionIssuer.userName" as userName nodrop<br />\| json field=\_raw "userIdentity.userName" as userName nodrop<br />\| where eventSource="kinesis.amazonaws.com"<br />\|where if ("{{eventname}}" = "\*", true, eventname matches "{{eventname}}") AND if ("{{username}}" = "\*", true, username matches "{{username}}") AND if ("{{sourceipaddress}}" = "\*", true, sourceipaddress matches "{{sourceipaddress}}") AND if ("{{awsregion}}" = "\*", true, awsregion matches "{{awsregion}}")<br />\|count as count by awsRegion, userName, eventName, sourceIPAddress<br />\| sort by count|
|Amazon Kinesis - Streams|Location of Events|Logs|Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Events|\_sourceCategory={{Logsdatasource}}  "kinesis.amazonaws.com"<br />\| json field=\_raw "eventSource", "eventName", "awsRegion", "sourceIPAddress","userAgent" nodrop<br />\| json field=\_raw "requestParameters.streamName" as streamName nodrop<br />\| json field=\_raw "userIdentity.sessionContext.sessionIssuer.userName" as userName nodrop<br />\| where eventSource="kinesis.amazonaws.com"<br />\| lookup latitude, longitude, country\_code, country\_name, region, city, postal\_code from geo://location on ip = sourceIPAddress<br />\|where if ("{{eventname}}" = "\*", true, eventname matches "{{eventname}}") AND if ("{{username}}" = "\*", true, username matches "{{username}}") AND if ("{{sourceipaddress}}" = "\*", true, sourceipaddress matches "{{sourceipaddress}}") AND if ("{{awsregion}}" = "\*", true, awsregion matches "{{awsregion}}")<br />\|count by latitude, longitude, country\_code, country\_name, region, city, postal\_code, eventName<br />\| sort \_count|
|Amazon Kinesis - Streams|Put Latency by Stream and Shard|Metrics|Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Metrics|region={{region}} streamname={{streamname}} \_sourceCategory={{Metricsdatasource}}  Namespace=AWS/Kinesis metric=PutRecord.Latency Statistic=Average |
|Amazon Kinesis - Streams|Read Provisioned Throughput Exceeded|Metrics|Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Metrics|region={{region}} streamname={{streamname}} \_sourceCategory={{Metricsdatasource}}  Namespace=AWS/Kinesis metric=ReadProvisionedThroughputExceeded Statistic=Average |
|Amazon Kinesis - Streams|Top 10 IAM Users|Logs|Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Events|\_sourceCategory={{Logsdatasource}}  "kinesis.amazonaws.com" <br />\| json field=\_raw "eventSource", "eventName", "awsRegion", "sourceIPAddress","userAgent" nodrop<br />\| json field=\_raw "requestParameters.streamName" as streamName nodrop<br />\| json field=\_raw "userIdentity.sessionContext.sessionIssuer.userName" as userName nodrop<br />\| json field=\_raw "userIdentity.userName" as userName nodrop<br />\| where eventSource="kinesis.amazonaws.com"<br />\|where if ("{{eventname}}" = "\*", true, eventname matches "{{eventname}}") AND if ("{{username}}" = "\*", true, username matches "{{username}}") AND if ("{{sourceipaddress}}" = "\*", true, sourceipaddress matches "{{sourceipaddress}}") AND if ("{{awsregion}}" = "\*", true, awsregion matches "{{awsregion}}")<br />\|count as count by userName<br />\| sort count <br />\| limit 10|
|Amazon Kinesis - Streams|Write Provisioned Throughput Exceeded|Metrics|Installed Apps/Amazon Kinesis - Streams/Amazon Kinesis - Streams - Metrics|region={{region}} streamname={{streamname}} \_sourceCategory={{Metricsdatasource}}  Namespace=AWS/Kinesis metric=WriteProvisionedThroughputExceeded Statistic=Average |

