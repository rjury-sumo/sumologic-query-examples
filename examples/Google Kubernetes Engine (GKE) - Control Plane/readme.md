# Google Kubernetes Engine (GKE) - Control Plane

## Searches

### Log Searches

- **Certificate Signing Requests**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs 
- **Certificate Signing Requests**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs 
- **Clusters**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs 
- **Clusters**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Clusters**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Clusters**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs 
- **Component Creations**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs 
- **Component Creations**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs 
- **Component Updates and Deletions**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs 
- **Component Updates and Deletions**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs 
- **Container Events by Pods**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Container Events by Pods**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Container Image Events**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Container Image Events**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Created Resources by Node Over Time**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs 
- **Created Resources by Node Over Time**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs 
- **Error Stream**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Error Stream**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Error Stream**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs 
- **Error Stream**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs 
- **Errors by Node Over Time**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs 
- **Errors by Node Over Time**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs 
- **Errors by Nodes**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs 
- **Errors by Nodes**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs 
- **Event Severity Trend**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Event Severity Trend**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Events**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Events**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Events and Errors Over Time**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Events and Errors Over Time**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Events by Cluster Over Time**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Events by Cluster Over Time**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Events by Node**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs 
- **Events by Node**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs 
- **Events by Node**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Events by Node**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Events by Node Over Time**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs 
- **Events by Node Over Time**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs 
- **Events by Type Over Time**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Events by Type Over Time**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Killing Resources by Node Over Time**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs 
- **Killing Resources by Node Over Time**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs 
- **Kube-Proxy Errors**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Kube-Proxy Errors**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Kube-Proxy Errors by Nodes**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Kube-Proxy Errors by Nodes**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Kubelet bootstrap identity calls**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs 
- **Kubelet bootstrap identity calls**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs 
- **Kubelet Errors**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Kubelet Errors**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Kubelet Errors by Nodes**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Kubelet Errors by Nodes**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Latest Status by Pods**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Latest Status by Pods**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Most Recent Scale Ups**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Most Recent Scale Ups**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Node authenticated requests**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs 
- **Node authenticated requests**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs 
- **Pod Activity**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Pod Activity**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Pod Creations**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Pod Creations**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Pod Deletions**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Pod Deletions**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Pod Events**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Pod Events**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Pod Events by Namespace**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Pod Events by Namespace**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Pod Events over Time**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Pod Events over Time**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Pod Failure Events**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Pod Failure Events**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Pod Failures over Time**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Pod Failures over Time**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Pods**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Pods**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Pods Created**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Controller Manager 
- **Pods Created**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Controller Manager 
- **Pods Deleted**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Controller Manager 
- **Pods Deleted**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Controller Manager 
- **RBAC Modifications**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs 
- **RBAC Modifications**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs 
- **Recent Cluster Activity**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Recent Cluster Activity**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Recent Scheduled Pods**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Recent Scheduled Pods**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Recent Scheduled Pods by Node**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs 
- **Recent Scheduled Pods by Node**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs 
- **Scale Down Operations**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Scale Down Operations**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Scale Operations**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Controller Manager 
- **Scale Operations**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Controller Manager 
- **Scheduled Pods by Node Over Time**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs 
- **Scheduled Pods by Node Over Time**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs 
- **Scheduled Pods Over Time**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Scheduled Pods Over Time**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Severe Message Count Last Hour**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Severe Message Count Last Hour**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Severe Messages**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Controller Manager 
- **Severe Messages**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Controller Manager 
- **Severe Messages per Node**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Severe Messages per Node**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Severity Breakdown**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Severity Breakdown**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Controller Manager 
- **Severity Breakdown**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Severity Breakdown**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Controller Manager 
- **Severity Over Time**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Controller Manager 
- **Severity Over Time**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Controller Manager 
- **Top Nodes by Created**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs 
- **Top Nodes by Created**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs 
- **Top Nodes by Events**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Top Nodes by Events**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs 
- **Top Nodes by Events**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs 
- **Top Nodes by Events**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs 
- **Top Nodes by Killing**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs 
- **Top Nodes by Killing**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs 
- **Top Problematic Pods**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Top Problematic Pods**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs 
- **Top Requests by Kind**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs 
- **Top Requests by Kind**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs 
- **Top Users and System Components by Pod Requests**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs 
- **Top Users and System Components by Pod Requests**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs 
- **Unauthenticated web requests**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs 
- **Unauthenticated web requests**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs

### Metric Searches

- **Api Server Request Rates by  Clients**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/GKE - API Server 
- **Api Server Request Rates by  Clients**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/GKE - API Server 
- **API Server Successful Request Rates**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/GKE - API Server 
- **API Server Successful Request Rates**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/GKE - API Server 
- **API Server Successful vs Failure Request Rates**: from Dashboard: Google Kubernetes Engine (GKE) - Control Plane/GKE - API Server 
- **API Server Successful vs Failure Request Rates**: from Dashboard: Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/GKE - API Server

## Search Table

|app\_topic|search\_name|type|origin|search|
|:--|:--|:--|:--|:--|
|Google Kubernetes Engine (GKE) - Control Plane|Api Server Request Rates by  Clients|Metrics|Google Kubernetes Engine (GKE) - Control Plane/GKE - API Server| cluster={{cluster}}  (metric=apiserver\_request\_total or metric=apiserver\_request\_count) \| quantize 5m \| rate \| sum by client \| topk(500, max)|
|Google Kubernetes Engine (GKE) - Control Plane|Api Server Request Rates by  Clients|Metrics|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/GKE - API Server| cluster={{cluster}}  (metric=apiserver\_request\_total or metric=apiserver\_request\_count) \| quantize 5m \| rate \| sum by client \| topk(500, max)|
|Google Kubernetes Engine (GKE) - Control Plane|API Server Successful Request Rates|Metrics|Google Kubernetes Engine (GKE) - Control Plane/GKE - API Server| cluster={{cluster}} (metric=apiserver\_request\_total or metric=apiserver\_request\_count) code=2\*  \| quantize 5m \| rate \| sum by cluster \| topk(500, max)|
|Google Kubernetes Engine (GKE) - Control Plane|API Server Successful Request Rates|Metrics|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/GKE - API Server| cluster={{cluster}} (metric=apiserver\_request\_total or metric=apiserver\_request\_count) code=2\*  \| quantize 5m \| rate \| sum by cluster \| topk(500, max)|
|Google Kubernetes Engine (GKE) - Control Plane|API Server Successful vs Failure Request Rates|Metrics|Google Kubernetes Engine (GKE) - Control Plane/GKE - API Server|  cluster={{cluster}} (metric=apiserver\_request\_total or metric=apiserver\_request\_count) !code=2\*  \| quantize 5m \| rate \| sum by cluster|
|Google Kubernetes Engine (GKE) - Control Plane|API Server Successful vs Failure Request Rates|Metrics|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/GKE - API Server|  cluster={{cluster}} (metric=apiserver\_request\_total or metric=apiserver\_request\_count) !code=2\*  \| quantize 5m \| rate \| sum by cluster|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Certificate Signing Requests|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs|\_sourceCategory = Labs/gcp/kubernetes\* <br />\| json "message.data.resource.type" as type <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| parse regex "\\"resourceName\\":\\"(?\<resourceName\>[^\\"]+)\\"" <br />\| where log\_name matches "\*activity\*" and type="k8s\_cluster" and resourceName="certificates.k8s.io/v1beta1/certificatesigningrequests"<br />\| count |
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Certificate Signing Requests|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs|\_sourceCategory={{Logsdatasource}}  <br />\| json "message.data.resource.type" as type <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| parse regex "\\"resourceName\\":\\"(?\<resourceName\>[^\\"]+)\\"" <br />\| where log\_name matches "\*activity\*" and type="k8s\_cluster" and resourceName="certificates.k8s.io/v1beta1/certificatesigningrequests"<br />\| count |
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Clusters|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory = Labs/gcp/kubernetes\* <br />//\| json "message.data.resource.type", "message.data.severity", "message.data.timestamp" as type, severity, timestamp<br />//\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />//\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />//\| json field=payload "message", "involvedObject.kind", "involvedObject.name", "source.host" as message, kind, pod, node<br />//\| where kind="Cluster" or message matches "\*cluster\*"<br />\| count\_distinct(cluster) |
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Clusters|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs|\_sourceCategory = Labs/gcp/kubernetes\*<br />\| json field=\_raw "message.data.resource.labels.cluster\_name" as cluster<br />\| count\_distinct(cluster)|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Clusters|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs|\_sourceCategory={{Logsdatasource}} <br />\| json field=\_raw "message.data.resource.labels.cluster\_name" as cluster<br />\| count\_distinct(cluster)|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Clusters|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory={{Logsdatasource}}  <br />//\| json "message.data.resource.type", "message.data.severity", "message.data.timestamp" as type, severity, timestamp<br />//\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />//\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />//\| json field=payload "message", "involvedObject.kind", "involvedObject.name", "source.host" as message, kind, pod, node<br />//\| where kind="Cluster" or message matches "\*cluster\*"<br />\| count\_distinct(cluster) |
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Component Creations|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs|\_sourceCategory={{Logsdatasource}}  <br />\| json field=\_raw "message.data.resource.type", "message.data.protoPayload.authenticationInfo.principalEmail","message.data.protoPayload.request.metadata.name", "message.data.protoPayload.request.metadata.namespace", "message.data.resource.labels.cluster\_name", "message.data.logName","message.data.protoPayload.methodName", "message.data.protoPayload.request.kind" as type, created\_by, name, namespace, cluster, log\_name, methodName,  component<br />\| json field=\_raw "message.data.protoPayload.request.spec.replicas" as replicas nodrop<br />\| where log\_name matches "\*activity\*" and type="k8s\_cluster" and methodName matches "\*create\*"<br />\| count by component, name, namespace, cluster, created\_by, replicas<br />|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Component Creations|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs|\_sourceCategory = Labs/gcp/kubernetes\* <br />\| json field=\_raw "message.data.resource.type", "message.data.protoPayload.authenticationInfo.principalEmail","message.data.protoPayload.request.metadata.name", "message.data.protoPayload.request.metadata.namespace", "message.data.resource.labels.cluster\_name", "message.data.logName","message.data.protoPayload.methodName", "message.data.protoPayload.request.kind" as type, created\_by, name, namespace, cluster, log\_name, methodName,  component<br />\| json field=\_raw "message.data.protoPayload.request.spec.replicas" as replicas nodrop<br />\| where log\_name matches "\*activity\*" and type="k8s\_cluster" and methodName matches "\*create\*"<br />\| count by component, name, namespace, cluster, created\_by, replicas<br />|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Component Updates and Deletions|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs|\_sourceCategory = Labs/gcp/kubernetes\* <br />\| json field=\_raw "message.data.resource.type", "message.data.protoPayload.response.metadata.name", "message.data.logName", "message.data.protoPayload.methodName" as type,name, log\_name, methodName <br />\| json field=\_raw "message.data.protoPayload.authenticationInfo.principalEmail", "message.data.protoPayload.response.metadata.namespace", "message.data.protoPayload.response.kind", "message.data.resource.labels.cluster\_name"  as modified\_by, namespace, component, cluster nodrop<br />\| where log\_name matches "\*activity\*" and type="k8s\_cluster" and (methodName matches "\*delete\*" or methodName matches "\*update\*" )<br />\| if( methodName matches "\*delete\*", "Delete", "Update") as action<br />\| count by component, name, namespace, cluster, action, modified\_by|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Component Updates and Deletions|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs|\_sourceCategory={{Logsdatasource}}  <br />\| json field=\_raw "message.data.resource.type", "message.data.protoPayload.response.metadata.name", "message.data.logName", "message.data.protoPayload.methodName" as type,name, log\_name, methodName <br />\| json field=\_raw "message.data.protoPayload.authenticationInfo.principalEmail", "message.data.protoPayload.response.metadata.namespace", "message.data.protoPayload.response.kind", "message.data.resource.labels.cluster\_name"  as modified\_by, namespace, component, cluster nodrop<br />\| where log\_name matches "\*activity\*" and type="k8s\_cluster" and (methodName matches "\*delete\*" or methodName matches "\*update\*" )<br />\| if( methodName matches "\*delete\*", "Delete", "Update") as action<br />\| count by component, name, namespace, cluster, action, modified\_by|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Container Events by Pods|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory = Labs/gcp/kubernetes\* jsonPayload logName resource type<br />\| json "message.data.resource.type" as type<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where type = "k8s\_pod" and log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "reason", "involvedObject.kind", "involvedObject.name" as message, reason, kind, pod<br />\| where kind="Pod" and (message matches "\*Container\*" or message matches "\*container\*")<br />\| count as events by project, cluster, pod, reason<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| fields -project,cluster<br />\| transpose row pod column reason<br />\| limit 15|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Container Events by Pods|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory={{Logsdatasource}}  jsonPayload logName resource type<br />\| json "message.data.resource.type" as type<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where type = "k8s\_pod" and log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "reason", "involvedObject.kind", "involvedObject.name" as message, reason, kind, pod<br />\| where kind="Pod" and (message matches "\*Container\*" or message matches "\*container\*")<br />\| count as events by project, cluster, pod, reason<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| fields -project,cluster<br />\| transpose row pod column reason<br />\| limit 15|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Container Image Events|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory = Labs/gcp/kubernetes\* jsonPayload logName resource severity timestamp type<br />\| json "message.data.resource.type", "message.data.severity", "message.data.timestamp" as type, severity, timestamp<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json field=\_raw "message.data.jsonPayload.metadata.namespace" as namespace<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "involvedObject.kind", "involvedObject.name" as message, kind, pod<br />\| where message matches "\*image\*"<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| count by message|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Container Image Events|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory={{Logsdatasource}}  jsonPayload logName resource severity timestamp type<br />\| json "message.data.resource.type", "message.data.severity", "message.data.timestamp" as type, severity, timestamp<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json field=\_raw "message.data.jsonPayload.metadata.namespace" as namespace<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "involvedObject.kind", "involvedObject.name" as message, kind, pod<br />\| where message matches "\*image\*"<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| count by message|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Created Resources by Node Over Time|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs|\_sourceCategory={{Logsdatasource}}  logName reason host "\\"reason\\":\\"Created\\""<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload.source.host" as labels, node<br />\| where node matches "{{node}}"<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| timeslice 1h <br />\| count as eventCount by \_timeslice, node, cluster, project<br />\| transpose row \_timeslice column node, cluster, project<br />\| fillmissing timeslice(1h)|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Created Resources by Node Over Time|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs|\_sourceCategory = Labs/gcp/kubernetes\* logName reason host "\\"reason\\":\\"Created\\""<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload.source.host" as labels, node<br />\| where node matches "{{node}}"<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| timeslice 1h <br />\| count as eventCount by \_timeslice, node, cluster, project<br />\| transpose row \_timeslice column node, cluster, project<br />\| fillmissing timeslice(1h)|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Error Stream|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory = Labs/gcp/kubernetes\* error<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| json field=\_raw "message.data.jsonPayload.message", "message.data.resource.labels","message.data.timestamp"  as message, labels, timestamp<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| count by timestamp, project, cluster,log\_name, message|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Error Stream|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs|\_sourceCategory = Labs/gcp/kubernetes\*  error<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| json field=\_raw "message.data.resource.type", "message.data.jsonPayload.MESSAGE", "message.data.resource.labels.cluster\_name", "message.data.resource.labels.node\_name", "message.data.resource.labels.project\_id", "message.data.timestamp" as type,message,cluster,node, project, timestamp <br />\| where node matches "{{node}}"<br />\| where (type = "k8s\_node")<br />\| count by timestamp, node, cluster, project, message<br />\| limit 500<br />//\| transpose row node, cluster, project column reason|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Error Stream|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs|\_sourceCategory={{Logsdatasource}}   error<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| json field=\_raw "message.data.resource.type", "message.data.jsonPayload.MESSAGE", "message.data.resource.labels.cluster\_name", "message.data.resource.labels.node\_name", "message.data.resource.labels.project\_id", "message.data.timestamp" as type,message,cluster,node, project, timestamp <br />\| where node matches "{{node}}"<br />\| where (type = "k8s\_node")<br />\| count by timestamp, node, cluster, project, message<br />\| limit 500<br />//\| transpose row node, cluster, project column reason|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Error Stream|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory={{Logsdatasource}}  error<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| json field=\_raw "message.data.jsonPayload.message", "message.data.resource.labels","message.data.timestamp"  as message, labels, timestamp<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| count by timestamp, project, cluster,log\_name, message|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Errors by Node Over Time|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs|\_sourceCategory={{Logsdatasource}}   error<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| json field=\_raw "message.data.resource.type", "message.data.jsonPayload.MESSAGE", "message.data.resource.labels.cluster\_name", "message.data.resource.labels.node\_name", "message.data.resource.labels.project\_id", "message.data.timestamp" as type,message,cluster,node, project, timestamp <br />\| where node matches "{{node}}"<br />\| where (type = "k8s\_node")<br />\| timeslice 1h <br />\| count as eventCount by \_timeslice, node, cluster, project<br />\| transpose row \_timeslice column node, cluster, project<br />\| fillmissing timeslice(1h)|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Errors by Node Over Time|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs|\_sourceCategory = Labs/gcp/kubernetes\*  error<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| json field=\_raw "message.data.resource.type", "message.data.jsonPayload.MESSAGE", "message.data.resource.labels.cluster\_name", "message.data.resource.labels.node\_name", "message.data.resource.labels.project\_id", "message.data.timestamp" as type,message,cluster,node, project, timestamp <br />\| where node matches "{{node}}"<br />\| where (type = "k8s\_node")<br />\| timeslice 1h <br />\| count as eventCount by \_timeslice, node, cluster, project<br />\| transpose row \_timeslice column node, cluster, project<br />\| fillmissing timeslice(1h)|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Errors by Nodes|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs|\_sourceCategory={{Logsdatasource}}   error<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| json field=\_raw "message.data.resource.type", "message.data.jsonPayload.MESSAGE", "message.data.resource.labels.cluster\_name", "message.data.resource.labels.node\_name", "message.data.resource.labels.project\_id", "message.data.timestamp" as type,message,cluster,node, project, timestamp <br />\| where node matches "{{node}}"<br />\| where (type = "k8s\_node")<br />\| count as errors by node, cluster, project<br />//\| transpose row node, cluster, project column reason<br />\| limit 500|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Errors by Nodes|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs|\_sourceCategory = Labs/gcp/kubernetes\*  error<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| json field=\_raw "message.data.resource.type", "message.data.jsonPayload.MESSAGE", "message.data.resource.labels.cluster\_name", "message.data.resource.labels.node\_name", "message.data.resource.labels.project\_id", "message.data.timestamp" as type,message,cluster,node, project, timestamp <br />\| where node matches "{{node}}"<br />\| where (type = "k8s\_node")<br />\| count as errors by node, cluster, project<br />//\| transpose row node, cluster, project column reason<br />\| limit 500|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Event Severity Trend|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory={{Logsdatasource}}  logName resource severity "\\"kind\\":\\"Event\\""<br />\| json "message.data.severity" as severity<br />\| timeslice 1h<br />\| count \_timeslice, severity <br />\| transpose row \_timeslice column severity<br />\| fillmissing timeslice(1h) |
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Event Severity Trend|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory = Labs/gcp/kubernetes\* logName resource severity "\\"kind\\":\\"Event\\""<br />\| json "message.data.severity" as severity<br />\| timeslice 1h<br />\| count \_timeslice, severity <br />\| transpose row \_timeslice column severity<br />\| fillmissing timeslice(1h) |
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Events|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory = Labs/gcp/kubernetes\*  jsonPayload logName resource type<br />\| json "message.data.resource.type" as type<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "reason", "involvedObject.name" as message, reason, pod<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />//\| where (message matches "\*Container\*" or message matches "\*container\*")<br />\| timeslice 1h<br />\| count as events by \_timeslice, reason<br />\| transpose row \_timeslice column reason|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Events|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory={{Logsdatasource}}   jsonPayload logName resource type<br />\| json "message.data.resource.type" as type<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "reason", "involvedObject.name" as message, reason, pod<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />//\| where (message matches "\*Container\*" or message matches "\*container\*")<br />\| timeslice 1h<br />\| count as events by \_timeslice, reason<br />\| transpose row \_timeslice column reason|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Events and Errors Over Time|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory = Labs/gcp/kubernetes\* logName resource severity "\\"kind\\":\\"Event\\""<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| json "message.data.resource.labels", "message.data.severity" as labels, severity<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| if (severity in ("WARNING", "ALERT", "CRITICAL", "FATAL", "EMERGENCY"), 1, 0) as error<br />\| timeslice 1h<br />\| count as events, sum(error) as errors by \_timeslice<br />\| compare with timeshift 1d 7 avg<br />\| fillmissing timeslice(1h) |
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Events and Errors Over Time|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory={{Logsdatasource}}  logName resource severity "\\"kind\\":\\"Event\\""<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| json "message.data.resource.labels", "message.data.severity" as labels, severity<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| if (severity in ("WARNING", "ALERT", "CRITICAL", "FATAL", "EMERGENCY"), 1, 0) as error<br />\| timeslice 1h<br />\| count as events, sum(error) as errors by \_timeslice<br />\| compare with timeshift 1d 7 avg<br />\| fillmissing timeslice(1h) |
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Events by Cluster Over Time|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory={{Logsdatasource}}  logName resource<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels" as labels<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| timeslice 1h<br />\| count as events by \_timeslice, cluster, project<br />\| transpose row \_timeslice column cluster, project|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Events by Cluster Over Time|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory = Labs/gcp/kubernetes\* logName resource<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels" as labels<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| timeslice 1h<br />\| count as events by \_timeslice, cluster, project<br />\| transpose row \_timeslice column cluster, project|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Events by Node|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory={{Logsdatasource}}  logName source reason <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload.reason", "message.data.jsonPayload.source.host" as labels, reason,node<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| count as events by reason, node, project<br />\| transpose row node, project column reason|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Events by Node|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs|\_sourceCategory = Labs/gcp/kubernetes\* jsonPayload logName source host <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "reason", "source.host" as reason, node<br />\| where node matches "{{node}}"<br />\| count as events by reason, node, cluster, project<br />\| transpose row node, cluster, project column reason|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Events by Node|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory = Labs/gcp/kubernetes\* logName source reason <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload.reason", "message.data.jsonPayload.source.host" as labels, reason,node<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| count as events by reason, node, project<br />\| transpose row node, project column reason|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Events by Node|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs|\_sourceCategory={{Logsdatasource}}  jsonPayload logName source host <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "reason", "source.host" as reason, node<br />\| where node matches "{{node}}"<br />\| count as events by reason, node, cluster, project<br />\| transpose row node, cluster, project column reason|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Events by Node Over Time|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs|\_sourceCategory = Labs/gcp/kubernetes\* jsonPayload logName source host <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload.source.host" as labels, node<br />\| where node matches "{{node}}"<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| timeslice 1h <br />\| count by \_timeslice, node, cluster, project<br />\| transpose row \_timeslice column node, cluster, project<br />\| fillmissing timeslice(1h)|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Events by Node Over Time|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs|\_sourceCategory={{Logsdatasource}}  jsonPayload logName source host <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload.source.host" as labels, node<br />\| where node matches "{{node}}"<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| timeslice 1h <br />\| count by \_timeslice, node, cluster, project<br />\| transpose row \_timeslice column node, cluster, project<br />\| fillmissing timeslice(1h)|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Events by Type Over Time|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory = Labs/gcp/kubernetes\* logName resource type<br />\| json "message.data.resource.type" as type<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "reason"<br />\| timeslice 1h<br />\| count as events by \_timeslice, reason<br />\| transpose row \_timeslice column reason|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Events by Type Over Time|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory={{Logsdatasource}}  logName resource type<br />\| json "message.data.resource.type" as type<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "reason"<br />\| timeslice 1h<br />\| count as events by \_timeslice, reason<br />\| transpose row \_timeslice column reason|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Killing Resources by Node Over Time|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs|\_sourceCategory = Labs/gcp/kubernetes\* logName reason host "\\"reason\\":\\"Killing\\""<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload.source.host" as labels, node<br />\| where node matches "{{node}}"<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| timeslice 1h <br />\| count as eventCount by \_timeslice, node, cluster, project<br />\| transpose row \_timeslice column node, cluster, project<br />\| fillmissing timeslice(1h)|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Killing Resources by Node Over Time|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs|\_sourceCategory={{Logsdatasource}}  logName reason host "\\"reason\\":\\"Killing\\""<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload.source.host" as labels, node<br />\| where node matches "{{node}}"<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| timeslice 1h <br />\| count as eventCount by \_timeslice, node, cluster, project<br />\| transpose row \_timeslice column node, cluster, project<br />\| fillmissing timeslice(1h)|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Kube-Proxy Errors|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory = Labs/gcp/kubernetes\*  error<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| json "message.data.resource.labels", "message.data.severity", "message.data.jsonPayload.message", "message.data.timestamp" as labels, severity, message, timestamp<br />\| json field=labels "project\_id", "cluster\_name", "node\_name" as project, cluster, node<br />\| where log\_name matches "projects/\*/logs/kube-proxy"<br />\| count by timestamp,node,severity,message|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Kube-Proxy Errors|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory={{Logsdatasource}}   error<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| json "message.data.resource.labels", "message.data.severity", "message.data.jsonPayload.message", "message.data.timestamp" as labels, severity, message, timestamp<br />\| json field=labels "project\_id", "cluster\_name", "node\_name" as project, cluster, node<br />\| where log\_name matches "projects/\*/logs/kube-proxy"<br />\| count by timestamp,node,severity,message|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Kube-Proxy Errors by Nodes|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory={{Logsdatasource}}   error<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| json "message.data.resource.labels", "message.data.severity", "message.data.jsonPayload.message", "message.data.timestamp" as labels, severity, message, timestamp <br />\| json field=labels "project\_id", "cluster\_name", "node\_name" as project, cluster, node<br />\| where log\_name matches "projects/\*/logs/kube-proxy"<br />\| count by node|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Kube-Proxy Errors by Nodes|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory = Labs/gcp/kubernetes\*  error<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| json "message.data.resource.labels", "message.data.severity", "message.data.jsonPayload.message", "message.data.timestamp" as labels, severity, message, timestamp <br />\| json field=labels "project\_id", "cluster\_name", "node\_name" as project, cluster, node<br />\| where log\_name matches "projects/\*/logs/kube-proxy"<br />\| count by node|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Kubelet bootstrap identity calls|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs|\_sourceCategory={{Logsdatasource}}  <br />\| json "message.data.resource.type" as type <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| parse regex "\\"principalEmail\\":\\"(?\<principalEmail\>[^\\"]+)\\"" <br />\| where log\_name matches "\*activity\*" and type="k8s\_cluster" and principalEmail="kubelet"<br />\| count |
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Kubelet bootstrap identity calls|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs|\_sourceCategory = Labs/gcp/kubernetes\* <br />\| json "message.data.resource.type" as type <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| parse regex "\\"principalEmail\\":\\"(?\<principalEmail\>[^\\"]+)\\"" <br />\| where log\_name matches "\*activity\*" and type="k8s\_cluster" and principalEmail="kubelet"<br />\| count |
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Kubelet Errors|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory={{Logsdatasource}}  error<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| json field=\_raw "message.data.jsonPayload.MESSAGE", "message.data.jsonPayload.PRIORITY","message.data.resource.labels.cluster\_name", "message.data.resource.labels.project\_id"  , "message.data.timestamp","message.data.resource.labels.node\_name" as message, priority, cluster, project, timestamp, node<br />\| where log\_name matches "projects/\*/logs/kubelet"<br />\| count by timestamp,node,priority,message|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Kubelet Errors|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory = Labs/gcp/kubernetes\* error<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| json field=\_raw "message.data.jsonPayload.MESSAGE", "message.data.jsonPayload.PRIORITY","message.data.resource.labels.cluster\_name", "message.data.resource.labels.project\_id"  , "message.data.timestamp","message.data.resource.labels.node\_name" as message, priority, cluster, project, timestamp, node<br />\| where log\_name matches "projects/\*/logs/kubelet"<br />\| count by timestamp,node,priority,message|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Kubelet Errors by Nodes|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory={{Logsdatasource}}  error<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| json field=\_raw "message.data.jsonPayload.MESSAGE", "message.data.jsonPayload.PRIORITY","message.data.resource.labels.cluster\_name", "message.data.resource.labels.project\_id"  , "message.data.timestamp","message.data.resource.labels.node\_name" as message, priority, cluster, project, timestamp, node<br />\| where log\_name matches "projects/\*/logs/kubelet"<br />\| count by node|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Kubelet Errors by Nodes|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory = Labs/gcp/kubernetes\* error<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| json field=\_raw "message.data.jsonPayload.MESSAGE", "message.data.jsonPayload.PRIORITY","message.data.resource.labels.cluster\_name", "message.data.resource.labels.project\_id"  , "message.data.timestamp","message.data.resource.labels.node\_name" as message, priority, cluster, project, timestamp, node<br />\| where log\_name matches "projects/\*/logs/kubelet"<br />\| count by node|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Latest Status by Pods|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory={{Logsdatasource}}  jsonPayload logName resource severity timestamp type<br />\| json "message.data.resource.type", "message.data.severity", "message.data.timestamp" as type, severity, timestamp<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "involvedObject.kind", "involvedObject.name" as message, kind, pod<br />\| where kind="Pod" or message matches "\*pod\*"<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| last(message) as status by pod<br />\| count by pod, status|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Latest Status by Pods|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory = Labs/gcp/kubernetes\* jsonPayload logName resource severity timestamp type<br />\| json "message.data.resource.type", "message.data.severity", "message.data.timestamp" as type, severity, timestamp<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "involvedObject.kind", "involvedObject.name" as message, kind, pod<br />\| where kind="Pod" or message matches "\*pod\*"<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| last(message) as status by pod<br />\| count by pod, status|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Most Recent Scale Ups|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory = Labs/gcp/kubernetes\* logName resource Scaled<br />\| json field=\_raw "message.data.jsonPayload.message", "message.data.severity"  as log, severity<br />\| where severity = "INFO"<br />\| parse field=log "Scaled \* replica set \* to \*" as direction,replica\_set,size<br />\| where direction = "up" <br />\| count as scale\_ups by replica\_set, size|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Most Recent Scale Ups|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory={{Logsdatasource}}  logName resource Scaled<br />\| json field=\_raw "message.data.jsonPayload.message", "message.data.severity"  as log, severity<br />\| where severity = "INFO"<br />\| parse field=log "Scaled \* replica set \* to \*" as direction,replica\_set,size<br />\| where direction = "up" <br />\| count as scale\_ups by replica\_set, size|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Node authenticated requests|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs|\_sourceCategory = Labs/gcp/kubernetes\* <br />\| json "message.data.resource.type" as type <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| parse regex "\\"principalEmail\\":\\"(?\<principalEmail\>[^\\"]+)\\"" <br />\| where log\_name matches "\*activity\*" and type="k8s\_cluster" and principalEmail="system:node"<br />\| count |
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Node authenticated requests|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs|\_sourceCategory={{Logsdatasource}}  <br />\| json "message.data.resource.type" as type <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| parse regex "\\"principalEmail\\":\\"(?\<principalEmail\>[^\\"]+)\\"" <br />\| where log\_name matches "\*activity\*" and type="k8s\_cluster" and principalEmail="system:node"<br />\| count |
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Pod Activity|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory={{Logsdatasource}}  jsonPayload logName resource severity timestamp type<br />\| json "message.data.resource.type", "message.data.severity", "message.data.timestamp" as type, severity, timestamp<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "involvedObject.kind", "involvedObject.name" as message, kind, pod<br />\| where kind="Pod" or message matches "\*pod\*"<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| count as events by timestamp, severity, message, pod, cluster<br />\| sort by timestamp|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Pod Activity|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory = Labs/gcp/kubernetes\* jsonPayload logName resource severity timestamp type<br />\| json "message.data.resource.type", "message.data.severity", "message.data.timestamp" as type, severity, timestamp<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "involvedObject.kind", "involvedObject.name" as message, kind, pod<br />\| where kind="Pod" or message matches "\*pod\*"<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| count as events by timestamp, severity, message, pod, cluster<br />\| sort by timestamp|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Pod Creations|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory={{Logsdatasource}}  logName resource severity "Created pod:"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "involvedObject.kind" as message, kind<br />\| json field=\_raw "message.data.jsonPayload.message" as log<br />\| parse field=log "Created pod: \*" as pod<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| count|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Pod Creations|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory = Labs/gcp/kubernetes\* logName resource severity "Created pod:"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "involvedObject.kind" as message, kind<br />\| json field=\_raw "message.data.jsonPayload.message" as log<br />\| parse field=log "Created pod: \*" as pod<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| count|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Pod Deletions|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory = Labs/gcp/kubernetes\* logName resource severity  "Killing container" <br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "involvedObject.kind", "involvedObject.name" as message, kind, pod<br />\| json field=\_raw "message.data.jsonPayload.involvedObject.name"<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| count|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Pod Deletions|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory={{Logsdatasource}}  logName resource severity  "Killing container" <br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "involvedObject.kind", "involvedObject.name" as message, kind, pod<br />\| json field=\_raw "message.data.jsonPayload.involvedObject.name"<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| count|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Pod Events|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory={{Logsdatasource}}  jsonPayload logName resource type<br />\| json "message.data.resource.type" as type<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "reason", "involvedObject.kind", "involvedObject.name" as reason, kind, pod<br />\| where kind="Pod"<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| count as events by reason<br />\| sort by events|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Pod Events|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory = Labs/gcp/kubernetes\* jsonPayload logName resource type<br />\| json "message.data.resource.type" as type<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "reason", "involvedObject.kind", "involvedObject.name" as reason, kind, pod<br />\| where kind="Pod"<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| count as events by reason<br />\| sort by events|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Pod Events by Namespace|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory={{Logsdatasource}}   jsonPayload logName resource severity timestamp type<br />\| json "message.data.resource.type", "message.data.severity", "message.data.timestamp" as type, severity, timestamp<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json field=\_raw "message.data.jsonPayload.metadata.namespace" as namespace<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "involvedObject.kind", "involvedObject.name" as message, kind, pod<br />\| where kind="Pod" or message matches "\*pod\*"<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| count by namespace|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Pod Events by Namespace|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory = Labs/gcp/kubernetes\*  jsonPayload logName resource severity timestamp type<br />\| json "message.data.resource.type", "message.data.severity", "message.data.timestamp" as type, severity, timestamp<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json field=\_raw "message.data.jsonPayload.metadata.namespace" as namespace<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "involvedObject.kind", "involvedObject.name" as message, kind, pod<br />\| where kind="Pod" or message matches "\*pod\*"<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| count by namespace|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Pod Events over Time|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory={{Logsdatasource}}   jsonPayload logName resource type<br />\| json "message.data.resource.type" as type<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "reason", "involvedObject.name" as message, reason, pod<br />\| where (message matches "\*pod\*" or message matches "\*Pod\*") //and (reason="SuccessfulCreate" or reason="SuccessfulDelete")<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| timeslice 1h<br />\| count as events by \_timeslice, reason<br />\| transpose row \_timeslice column reason|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Pod Events over Time|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory = Labs/gcp/kubernetes\*  jsonPayload logName resource type<br />\| json "message.data.resource.type" as type<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "reason", "involvedObject.name" as message, reason, pod<br />\| where (message matches "\*pod\*" or message matches "\*Pod\*") //and (reason="SuccessfulCreate" or reason="SuccessfulDelete")<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| timeslice 1h<br />\| count as events by \_timeslice, reason<br />\| transpose row \_timeslice column reason|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Pod Failure Events|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory = Labs/gcp/kubernetes\* jsonPayload logName resource severity type<br />\| json "message.data.resource.type", "message.data.severity" as type, severity<br />\| where severity in ("WARNING", "ERROR", "CRITICAL", "ALERT", "EMERGENCY")<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "reason", "involvedObject.kind", "involvedObject.name" as reason, kind, pod<br />\| where kind="Pod"<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| count as events by reason<br />\| sort by events|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Pod Failure Events|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory={{Logsdatasource}}  jsonPayload logName resource severity type<br />\| json "message.data.resource.type", "message.data.severity" as type, severity<br />\| where severity in ("WARNING", "ERROR", "CRITICAL", "ALERT", "EMERGENCY")<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "reason", "involvedObject.kind", "involvedObject.name" as reason, kind, pod<br />\| where kind="Pod"<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| count as events by reason<br />\| sort by events|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Pod Failures over Time|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory = Labs/gcp/kubernetes\*  jsonPayload logName resource severity type<br />\| json "message.data.resource.type", "message.data.severity" as type, severity<br />\| where severity in ("WARNING", "ERROR", "CRITICAL", "ALERT", "EMERGENCY")<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "involvedObject.kind", "involvedObject.name", "message" as kind, pod, message<br />\| where kind="Pod"<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| timeslice 1h<br />\| count as events by \_timeslice, pod<br />\| transpose row \_timeslice column pod|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Pod Failures over Time|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory={{Logsdatasource}}   jsonPayload logName resource severity type<br />\| json "message.data.resource.type", "message.data.severity" as type, severity<br />\| where severity in ("WARNING", "ERROR", "CRITICAL", "ALERT", "EMERGENCY")<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "involvedObject.kind", "involvedObject.name", "message" as kind, pod, message<br />\| where kind="Pod"<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| timeslice 1h<br />\| count as events by \_timeslice, pod<br />\| transpose row \_timeslice column pod|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Pods|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory={{Logsdatasource}}  jsonPayload logName resource severity timestamp type<br />\| json "message.data.resource.type", "message.data.severity", "message.data.timestamp" as type, severity, timestamp<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />//\| where type = "gke\_cluster" and log\_name matches "projects/\*/logs/events"<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "involvedObject.kind", "involvedObject.name" as message, kind, pod<br />\| where kind="Pod" or message matches "\*pod\*"<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| count\_distinct(pod) as numberOfPods|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Pods|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory = Labs/gcp/kubernetes\* jsonPayload logName resource severity timestamp type<br />\| json "message.data.resource.type", "message.data.severity", "message.data.timestamp" as type, severity, timestamp<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />//\| where type = "gke\_cluster" and log\_name matches "projects/\*/logs/events"<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "involvedObject.kind", "involvedObject.name" as message, kind, pod<br />\| where kind="Pod" or message matches "\*pod\*"<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| count\_distinct(pod) as numberOfPods|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Pods Created|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Controller Manager|\_sourceCategory = Labs/gcp/kubernetes\* "Created pod"<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json field=\_raw "message.data.jsonPayload.message" as message<br />\| parse field=message "Created pod: \*" as pod\_name<br />\| json field=\_raw "message.data.timestamp" as time<br />\| count by time, pod\_name|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Pods Created|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Controller Manager|\_sourceCategory={{Logsdatasource}}  "Created pod"<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json field=\_raw "message.data.jsonPayload.message" as message<br />\| parse field=message "Created pod: \*" as pod\_name<br />\| json field=\_raw "message.data.timestamp" as time<br />\| count by time, pod\_name|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Pods Deleted|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Controller Manager|\_sourceCategory = Labs/gcp/kubernetes\* "Deleted pod"<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json field=\_raw "message.data.jsonPayload.message" as message<br />\| parse field=message "Deleted pod: \*" as pod\_name<br />\| json field=\_raw "message.data.timestamp" as time<br />\| count by time, pod\_name|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Pods Deleted|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Controller Manager|\_sourceCategory={{Logsdatasource}}  "Deleted pod"<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json field=\_raw "message.data.jsonPayload.message" as message<br />\| parse field=message "Deleted pod: \*" as pod\_name<br />\| json field=\_raw "message.data.timestamp" as time<br />\| count by time, pod\_name|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|RBAC Modifications|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs|\_sourceCategory={{Logsdatasource}}  <br />\| json "message.data.resource.type" as type <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| parse regex "\\"methodName\\":\\"(?\<methodName\>[^\\"]+)\\"" <br />\| parse regex "\\"principalEmail\\":\\"(?\<principalEmail\>[^\\"]+)\\"" <br />\| where log\_name matches "\*activity\*" and type="k8s\_cluster" and !(principalEmail matches "\*system\*") and (methodName matches "\*io.k8s.authorization.rbac.v1\*")<br />\| count |
|Google Kubernetes Engine (GKE) - Control Plane/Logs|RBAC Modifications|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs|\_sourceCategory = Labs/gcp/kubernetes\* <br />\| json "message.data.resource.type" as type <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| parse regex "\\"methodName\\":\\"(?\<methodName\>[^\\"]+)\\"" <br />\| parse regex "\\"principalEmail\\":\\"(?\<principalEmail\>[^\\"]+)\\"" <br />\| where log\_name matches "\*activity\*" and type="k8s\_cluster" and !(principalEmail matches "\*system\*") and (methodName matches "\*io.k8s.authorization.rbac.v1\*")<br />\| count |
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Recent Cluster Activity|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory={{Logsdatasource}}  logName resource type severity timestamp<br />\| json "message.data.resource.type", "message.data.timestamp" as type, timestamp<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "involvedObject.kind", "involvedObject.name" as message, kind, name<br />\| concat(kind, "::", name) as involved\_object<br />\| count as events by timestamp, message, involved\_object, cluster<br />\| sort by timestamp|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Recent Cluster Activity|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory = Labs/gcp/kubernetes\* logName resource type severity timestamp<br />\| json "message.data.resource.type", "message.data.timestamp" as type, timestamp<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "involvedObject.kind", "involvedObject.name" as message, kind, name<br />\| concat(kind, "::", name) as involved\_object<br />\| count as events by timestamp, message, involved\_object, cluster<br />\| sort by timestamp|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Recent Scheduled Pods|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory = Labs/gcp/kubernetes\* jsonPayload logName resource severity timestamp type<br />\| json "message.data.resource.type", "message.data.severity", "message.data.timestamp" as type, severity, timestamp<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "involvedObject.kind", "involvedObject.name" as message, kind, pod<br />\| parse regex field=message "assigned \\S+ to (?\<node\>\\S+)"<br />\| where kind="Pod" or message matches "\*pod\*"<br />\| json field=payload "reason" as reason<br />\| where reason matches "\*Scheduled\*"<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| count as events by timestamp, message, pod, node, cluster, project<br />\| sort by timestamp asc<br />//\| fields timestamp, message, pod, node, cluster, project|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Recent Scheduled Pods|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory={{Logsdatasource}}  jsonPayload logName resource severity timestamp type<br />\| json "message.data.resource.type", "message.data.severity", "message.data.timestamp" as type, severity, timestamp<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "involvedObject.kind", "involvedObject.name" as message, kind, pod<br />\| parse regex field=message "assigned \\S+ to (?\<node\>\\S+)"<br />\| where kind="Pod" or message matches "\*pod\*"<br />\| json field=payload "reason" as reason<br />\| where reason matches "\*Scheduled\*"<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| count as events by timestamp, message, pod, node, cluster, project<br />\| sort by timestamp asc<br />//\| fields timestamp, message, pod, node, cluster, project|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Recent Scheduled Pods by Node|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs|\_sourceCategory = Labs/gcp/kubernetes\* logName "\\"reason\\":\\"Scheduled\\""<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.timestamp", "message.data.jsonPayload.message" as labels, timestamp, message<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />//\| parse regex "\\"message\\":\\"[^\\"]\* assigned (?\<pod\>[^\\" ]+) to (?\<node\>[^\\" ]+)"<br />\| parse regex field=message "[^\\"]\* assigned (?\<pod\>[^\\" ]+) to (?\<node\>[^\\" ]+)"<br />\| where node matches "{{node}}"<br />\| count as events by timestamp, message, pod, node, cluster, project<br />\| sort by timestamp asc<br />\| 1 as event<br />\| accum event as scheduled by node, cluster, project<br />\| fields timestamp, message, pod, node, cluster, project, scheduled<br />\| sort by timestamp|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Recent Scheduled Pods by Node|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs|\_sourceCategory={{Logsdatasource}}  logName "\\"reason\\":\\"Scheduled\\""<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.timestamp", "message.data.jsonPayload.message" as labels, timestamp, message<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />//\| parse regex "\\"message\\":\\"[^\\"]\* assigned (?\<pod\>[^\\" ]+) to (?\<node\>[^\\" ]+)"<br />\| parse regex field=message "[^\\"]\* assigned (?\<pod\>[^\\" ]+) to (?\<node\>[^\\" ]+)"<br />\| where node matches "{{node}}"<br />\| count as events by timestamp, message, pod, node, cluster, project<br />\| sort by timestamp asc<br />\| 1 as event<br />\| accum event as scheduled by node, cluster, project<br />\| fields timestamp, message, pod, node, cluster, project, scheduled<br />\| sort by timestamp|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Scale Down Operations|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory = Labs/gcp/kubernetes\* logName resource Scaled<br />\| json field=\_raw "message.data.jsonPayload.message", "message.data.severity"  as log, severity<br />\| where severity = "INFO"<br />\| parse field=log "Scaled \* replica set \* to \*" as direction,replica\_set,size<br />\| where direction = "down"<br />//\| where size = 0<br />\| count as scale\_downs by replica\_set, size|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Scale Down Operations|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory={{Logsdatasource}}  logName resource Scaled<br />\| json field=\_raw "message.data.jsonPayload.message", "message.data.severity"  as log, severity<br />\| where severity = "INFO"<br />\| parse field=log "Scaled \* replica set \* to \*" as direction,replica\_set,size<br />\| where direction = "down"<br />//\| where size = 0<br />\| count as scale\_downs by replica\_set, size|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Scale Operations|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Controller Manager|\_sourceCategory = Labs/gcp/kubernetes\* logName resource Scaled<br />\| json field=\_raw "message.data.jsonPayload.message" as log<br />\| json field=\_raw "message.data.severity" as severity<br />\| where severity = "INFO"<br />\| parse field=log "Scaled \* replica set \* to \*" as direction,replica\_set,scaled\_to<br />\| first(scaled\_to) as scaled\_to by  replica\_set |
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Scale Operations|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Controller Manager|\_sourceCategory={{Logsdatasource}}  logName resource Scaled<br />\| json field=\_raw "message.data.jsonPayload.message" as log<br />\| json field=\_raw "message.data.severity" as severity<br />\| where severity = "INFO"<br />\| parse field=log "Scaled \* replica set \* to \*" as direction,replica\_set,scaled\_to<br />\| first(scaled\_to) as scaled\_to by  replica\_set |
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Scheduled Pods by Node Over Time|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs|\_sourceCategory={{Logsdatasource}}  logName "\\"reason\\":\\"Scheduled\\""<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels" as labels<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| parse regex "\\"message\\":\\"[^\\"]\* assigned (?\<pod\>[^\\" ]+) to (?\<node\>[^\\" ]+)"<br />\| where node matches "{{node}}"<br />\| timeslice 1h <br />\| count as eventCount by \_timeslice, node, cluster, project<br />\| transpose row \_timeslice column node, cluster, project<br />\| fillmissing timeslice(1h)|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Scheduled Pods by Node Over Time|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs|\_sourceCategory = Labs/gcp/kubernetes\* logName "\\"reason\\":\\"Scheduled\\""<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels" as labels<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| parse regex "\\"message\\":\\"[^\\"]\* assigned (?\<pod\>[^\\" ]+) to (?\<node\>[^\\" ]+)"<br />\| where node matches "{{node}}"<br />\| timeslice 1h <br />\| count as eventCount by \_timeslice, node, cluster, project<br />\| transpose row \_timeslice column node, cluster, project<br />\| fillmissing timeslice(1h)|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Scheduled Pods Over Time|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory = Labs/gcp/kubernetes\*  jsonPayload logName resource severity timestamp type<br />\| json "message.data.resource.type", "message.data.severity", "message.data.timestamp" as type, severity, timestamp<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "involvedObject.kind", "involvedObject.name" as message, kind, pod<br />//\| parse regex field=message "assigned \\S+ to (?\<node\>\\S+)"<br />\| where kind="Pod" or message matches "\*pod\*"<br />\| json field=payload "reason" as reason<br />\| where reason matches "\*Scheduled\*"<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| timeslice 1h<br />\| count by \_timeslice, pod<br />\| transpose row \_timeslice column pod|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Scheduled Pods Over Time|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory={{Logsdatasource}}   jsonPayload logName resource severity timestamp type<br />\| json "message.data.resource.type", "message.data.severity", "message.data.timestamp" as type, severity, timestamp<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "message", "involvedObject.kind", "involvedObject.name" as message, kind, pod<br />//\| parse regex field=message "assigned \\S+ to (?\<node\>\\S+)"<br />\| where kind="Pod" or message matches "\*pod\*"<br />\| json field=payload "reason" as reason<br />\| where reason matches "\*Scheduled\*"<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| timeslice 1h<br />\| count by \_timeslice, pod<br />\| transpose row \_timeslice column pod|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Severe Message Count Last Hour|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory = Labs/gcp/kubernetes\*<br />\| json "message.data" as data<br />// match resource type and logname<br />\| json field= data "resource.type" as type  <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />// extract info and compare severity<br />\| json field=data "severity", "resource.labels.cluster\_name", "resource.labels" as severity, cluster, labels<br />\| where severity = "ERROR" or severity = "WARNING" or severity = "CRITICAL" or severity = "EMERGENCY" or severity = "ALERT"<br />// extract from labels the field project<br />\| json field=labels "project\_id" as project<br />// every min<br />\| timeslice 1m<br />// display the count of 1min timeslices agianst severity messages <br />\| count by \_timeslice, severity<br />\| fillmissing timeslice(1m), values("ERROR", "WARNING", "CRITICAL", "EMERGENCY", "ALERT") in severity<br />\| transpose row \_timeslice column severity as \*|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Severe Message Count Last Hour|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory={{Logsdatasource}} <br />\| json "message.data" as data<br />// match resource type and logname<br />\| json field= data "resource.type" as type  <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />// extract info and compare severity<br />\| json field=data "severity", "resource.labels.cluster\_name", "resource.labels" as severity, cluster, labels<br />\| where severity = "ERROR" or severity = "WARNING" or severity = "CRITICAL" or severity = "EMERGENCY" or severity = "ALERT"<br />// extract from labels the field project<br />\| json field=labels "project\_id" as project<br />// every min<br />\| timeslice 1m<br />// display the count of 1min timeslices agianst severity messages <br />\| count by \_timeslice, severity<br />\| fillmissing timeslice(1m), values("ERROR", "WARNING", "CRITICAL", "EMERGENCY", "ALERT") in severity<br />\| transpose row \_timeslice column severity as \*|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Severe Messages|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Controller Manager|\_sourceCategory={{Logsdatasource}}  error<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| json field=\_raw "message.data.jsonPayload.message" as message<br />\| json "message.data.resource.labels" as labels<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=\_raw "message.data.timestamp" as timestamp<br />\| count by timestamp, project, cluster,log\_name, message<br />\| limit 500|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Severe Messages|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Controller Manager|\_sourceCategory = Labs/gcp/kubernetes\* error<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| json field=\_raw "message.data.jsonPayload.message" as message<br />\| json "message.data.resource.labels" as labels<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=\_raw "message.data.timestamp" as timestamp<br />\| count by timestamp, project, cluster,log\_name, message<br />\| limit 500|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Severe Messages per Node|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory = Labs/gcp/kubernetes\*<br />\| json "message.data" as data<br />//check the type and logname to match <br />\| json field=data "resource.type" as type  <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />// extract data project name cluster name label and severity to be used <br />\| json field=data "resource.labels.project\_id", "resource.labels.cluster\_name", "resource.labels.", "severity", "jsonPayload.source.host" as project, cluster, labels, severity,node<br />\| where severity = "ERROR" or severity = "WARNING" or severity = "CRITICAL" or severity = "EMERGENCY" or severity = "ALERT"<br />// count the total severity occurances by project <br />\| count by node, severity  <br />\| transpose row node column severity              |
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Severe Messages per Node|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory={{Logsdatasource}} <br />\| json "message.data" as data<br />//check the type and logname to match <br />\| json field=data "resource.type" as type  <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />// extract data project name cluster name label and severity to be used <br />\| json field=data "resource.labels.project\_id", "resource.labels.cluster\_name", "resource.labels.", "severity", "jsonPayload.source.host" as project, cluster, labels, severity,node<br />\| where severity = "ERROR" or severity = "WARNING" or severity = "CRITICAL" or severity = "EMERGENCY" or severity = "ALERT"<br />// count the total severity occurances by project <br />\| count by node, severity  <br />\| transpose row node column severity              |
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Severity Breakdown|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Controller Manager|\_sourceCategory = Labs/gcp/kubernetes\* "\\"kind\\":\\"Event\\""<br />\| json "message.data.resource.labels", "message.data.severity" as labels, severity<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| where cluster matches "{{cluster}}"<br />\| count by severity<br />\| sort by \_count|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Severity Breakdown|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Controller Manager|\_sourceCategory={{Logsdatasource}}  "\\"kind\\":\\"Event\\""<br />\| json "message.data.resource.labels", "message.data.severity" as labels, severity<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| where cluster matches "{{cluster}}"<br />\| count by severity<br />\| sort by \_count|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Severity Breakdown|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory = Labs/gcp/kubernetes\* logName resource severity "\\"kind\\":\\"Event\\""<br />\| json "message.data.severity" as severity<br />\| count by severity<br />\| sort by \_count|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Severity Breakdown|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory={{Logsdatasource}}  logName resource severity "\\"kind\\":\\"Event\\""<br />\| json "message.data.severity" as severity<br />\| count by severity<br />\| sort by \_count|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Severity Over Time|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Controller Manager|\_sourceCategory = Labs/gcp/kubernetes\* "\\"kind\\":\\"Event\\""<br />\| json "message.data.resource.labels", "message.data.severity" as labels, severity<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| where cluster matches "{{cluster}}"<br />\| timeslice 1h<br />\| count by \_timeslice, severity<br />\| transpose row \_timeslice column severity<br />\| fillmissing timeslice(1h)|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Severity Over Time|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Controller Manager|\_sourceCategory={{Logsdatasource}}  "\\"kind\\":\\"Event\\""<br />\| json "message.data.resource.labels", "message.data.severity" as labels, severity<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| where cluster matches "{{cluster}}"<br />\| timeslice 1h<br />\| count by \_timeslice, severity<br />\| transpose row \_timeslice column severity<br />\| fillmissing timeslice(1h)|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Top Nodes by Created|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs|\_sourceCategory = Labs/gcp/kubernetes\* logName reason host "\\"reason\\":\\"Created\\""<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload.source.host", "message.data.severity" as labels, node, severity<br />\| where node matches "{{node}}"<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| if (severity in ("ERROR","WARNING", "ALERT", "CRITICAL", "FATAL", "EMERGENCY"), 1, 0) as error<br />\| count as created, sum(error) as errors by node, cluster, project<br />\| errors / created as error\_pct<br />\| sort by created|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Top Nodes by Created|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs|\_sourceCategory={{Logsdatasource}}  logName reason host "\\"reason\\":\\"Created\\""<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload.source.host", "message.data.severity" as labels, node, severity<br />\| where node matches "{{node}}"<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| if (severity in ("ERROR","WARNING", "ALERT", "CRITICAL", "FATAL", "EMERGENCY"), 1, 0) as error<br />\| count as created, sum(error) as errors by node, cluster, project<br />\| errors / created as error\_pct<br />\| sort by created|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Top Nodes by Events|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs|\_sourceCategory={{Logsdatasource}}  logName reason host <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload", "message.data.severity" as labels, payload, severity<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "reason", "source.host" as reason, node<br />\| where node matches "{{node}}"<br />\| if (severity in ("ERROR","WARNING", "ALERT", "CRITICAL", "FATAL", "EMERGENCY"), 1, 0) as error<br />\| count as events, sum(error) as errors by node, cluster, project<br />\| errors / events as error\_pct<br />\| sort by events|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Top Nodes by Events|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs|\_sourceCategory = Labs/gcp/kubernetes\* logName reason host <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload", "message.data.severity" as labels, payload, severity<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "reason", "source.host" as reason, node<br />\| where node matches "{{node}}"<br />\| if (severity in ("ERROR","WARNING", "ALERT", "CRITICAL", "FATAL", "EMERGENCY"), 1, 0) as error<br />\| count as events, sum(error) as errors by node, cluster, project<br />\| errors / events as error\_pct<br />\| sort by events|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Top Nodes by Events|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory = Labs/gcp/kubernetes\* <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload.source.host", "message.data.severity" as labels, node, severity<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| if (severity in ("ERROR","WARNING", "ALERT", "CRITICAL", "FATAL", "EMERGENCY"), 1, 0) as error<br />\| count as events, sum(error) as errors by node<br />\| errors / events as error\_pct<br />\| sort by events|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Top Nodes by Events|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Cluster Logs|\_sourceCategory={{Logsdatasource}}  <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload.source.host", "message.data.severity" as labels, node, severity<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| if (severity in ("ERROR","WARNING", "ALERT", "CRITICAL", "FATAL", "EMERGENCY"), 1, 0) as error<br />\| count as events, sum(error) as errors by node<br />\| errors / events as error\_pct<br />\| sort by events|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Top Nodes by Killing|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs|\_sourceCategory = Labs/gcp/kubernetes\* logName reason host "\\"reason\\":\\"Killing\\""<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload.source.host", "message.data.severity" as labels, node, severity<br />\| where node matches "{{node}}"<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| if (severity in ("ERROR", "WARNING", "ALERT", "CRITICAL", "FATAL", "EMERGENCY"), 1, 0) as error<br />\| count as killing, sum(error) as errors by node, cluster, project<br />\| errors / killing as error\_pct<br />\| sort by killing|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Top Nodes by Killing|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Node Logs|\_sourceCategory={{Logsdatasource}}  logName reason host "\\"reason\\":\\"Killing\\""<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\""<br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload.source.host", "message.data.severity" as labels, node, severity<br />\| where node matches "{{node}}"<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| if (severity in ("ERROR", "WARNING", "ALERT", "CRITICAL", "FATAL", "EMERGENCY"), 1, 0) as error<br />\| count as killing, sum(error) as errors by node, cluster, project<br />\| errors / killing as error\_pct<br />\| sort by killing|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Top Problematic Pods|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory = Labs/gcp/kubernetes\*  jsonPayload logName resource severity type<br />\| json "message.data.resource.type", "message.data.severity" as type, severity<br />\| where severity in ("WARNING", "ERROR", "CRITICAL", "ALERT", "EMERGENCY")<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "involvedObject.kind", "involvedObject.name", "message" as kind, pod, message<br />\| where kind="Pod"<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| count as events by pod<br />\| sort by events<br />\| limit 10|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Top Problematic Pods|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - Pod Logs|\_sourceCategory={{Logsdatasource}}   jsonPayload logName resource severity type<br />\| json "message.data.resource.type", "message.data.severity" as type, severity<br />\| where severity in ("WARNING", "ERROR", "CRITICAL", "ALERT", "EMERGENCY")<br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| where log\_name matches "projects/\*/logs/events"<br />\| json "message.data.resource.labels", "message.data.jsonPayload" as labels, payload<br />\| json field=labels "project\_id", "cluster\_name" as project, cluster<br />\| json field=payload "involvedObject.kind", "involvedObject.name", "message" as kind, pod, message<br />\| where kind="Pod"<br />\| where pod matches "{{pod}}" and cluster matches "{{cluster}}"<br />\| count as events by pod<br />\| sort by events<br />\| limit 10|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Top Requests by Kind|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs|\_sourceCategory={{Logsdatasource}}  <br />\| json field=\_raw "message.data.protoPayload.request.kind" as kind \| count by kind \| sort by \_count asc|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Top Requests by Kind|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs|\_sourceCategory = Labs/gcp/kubernetes\* <br />\| json field=\_raw "message.data.protoPayload.request.kind" as kind \| count by kind \| sort by \_count asc|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Top Users and System Components by Pod Requests|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs|\_sourceCategory={{Logsdatasource}}  "io.k8s.core.v1.pods"<br />\| json "message.data.resource.type" as type <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| parse regex "\\"methodName\\":\\"(?\<methodName\>[^\\"]+)\\"" <br />\| parse regex "\\"principalEmail\\":\\"(?\<user\>[^\\"]+)\\"" <br />\| where log\_name matches "\*activity\*" and type="k8s\_cluster" and methodName matches "io.k8s.core.v1.pods\*"<br />\| count by user|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Top Users and System Components by Pod Requests|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs|\_sourceCategory = Labs/gcp/kubernetes\* "io.k8s.core.v1.pods"<br />\| json "message.data.resource.type" as type <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| parse regex "\\"methodName\\":\\"(?\<methodName\>[^\\"]+)\\"" <br />\| parse regex "\\"principalEmail\\":\\"(?\<user\>[^\\"]+)\\"" <br />\| where log\_name matches "\*activity\*" and type="k8s\_cluster" and methodName matches "io.k8s.core.v1.pods\*"<br />\| count by user|
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Unauthenticated web requests|Logs|Installed Apps/Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs|\_sourceCategory={{Logsdatasource}}  <br />\| json "message.data.resource.type" as type <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| parse regex "\\"principalEmail\\":\\"(?\<principalEmail\>[^\\"]+)\\"" <br />\| where log\_name matches "\*activity\*" and type="k8s\_cluster" and principalEmail="system:anonymous"<br />\| count |
|Google Kubernetes Engine (GKE) - Control Plane/Logs|Unauthenticated web requests|Logs|Google Kubernetes Engine (GKE) - Control Plane/Logs/GKE - K8s Audit Logs|\_sourceCategory = Labs/gcp/kubernetes\* <br />\| json "message.data.resource.type" as type <br />\| parse regex "\\"logName\\":\\"(?\<log\_name\>[^\\"]+)\\"" <br />\| parse regex "\\"principalEmail\\":\\"(?\<principalEmail\>[^\\"]+)\\"" <br />\| where log\_name matches "\*activity\*" and type="k8s\_cluster" and principalEmail="system:anonymous"<br />\| count |

