# MySQL - OpenTelemetry

## Searches

### Log Searches

- **Avg Execution Time by Slow SQL Cmds**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Slow Queries 
- **Crash Recovery Attempts Over Time**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Error Logs 
- **Error Log Type Over Time**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Error Logs 
- **Errors**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/MySQL - Overview 
- **Excessive Slow Queries (>=15 secs)**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/MySQL - Overview 
- **Excessive Slow Queries by Host**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Slow Queries 
- **Excessive Slow Queries Over Time**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Slow Queries 
- **Failed Login Attempts**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/MySQL - Overview 
- **Failed Login Attempts**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Failed Logins 
- **Failed Login Attempts - Details**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Failed Logins 
- **Failed Login Attempts - Location**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Failed Logins 
- **Failed Login Attempts Trend**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Failed Logins 
- **Log Reduce**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Error Logs 
- **Replication Errors**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/MySQL - Overview 
- **Replication Start-Stop Events**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Replication 
- **Replication Status Over Time**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Replication 
- **Replication Status Over Time**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/MySQL - Overview 
- **Server Start and Shutdown Events Over Time**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Error Logs 
- **Slow Queries by Hosts**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Slow Queries 
- **Slow Queries Over Time**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Slow Queries 
- **Slow Queries Over Time**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/MySQL - Overview 
- **Slow Query by Cmd Type**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Slow Queries 
- **Stopped Servers**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Error Logs 
- **Top 10 Excessive Slow Queries by Frequency**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Slow Queries 
- **Top 10 Failed Login Attempts by Hosts**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Failed Logins 
- **Top 10 Failed Login Attempts by Users**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Failed Logins 
- **Top 10 Slow Queries by Average Execution Time**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Slow Queries 
- **Top Errors**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Error Logs 
- **Top IP Firing Slow Queries**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Slow Queries 
- **Top Reasons for Replication Failures**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Replication 
- **Top Users Firing Slow Queries**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Slow Queries 
- **Top Warnings**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Error Logs

### Metric Searches

- **Available, Active Worker Threads**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **Avg Row Lock Rate**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/MySQL - Overview 
- **Avg Row Lock Rate**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/MySQL - Overview 
- **Avg Statement Time (ms)**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics 
- **Avg Table IO Waits (ms)**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics 
- **Bytes Sent, Received**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **Connection Errors**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **Connection Errors**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/MySQL - Overview 
- **Connection Errors (Internal and Max Connections)**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **Connections**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **FSync Op Count**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/MySQL - Overview 
- **FSync Op Count**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **Innodb Buffer Pool Read Requests vs Disk Reads**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **Innodb Buffer Pool Usage**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **Innodb Buffer Pool Usage**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **Innodb Data (fsyncs, read, write)**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **Innodb Row Lock Waits**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **Innodb Row Lock Waits**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/MySQL - Overview 
- **Innodb Rows (read, updated, inserted, deleted)**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **Innodb Waits**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **Locked Connects**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **No Index Used**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics 
- **Open Table Cache Hit Ratio**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **Opened Tables and Files**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **Queries Executed**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/MySQL - Overview 
- **Queries Executed**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **Rows (Examined, Sent, Affected)**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics 
- **Select Types**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **Slow Queries**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/MySQL - Overview 
- **Sorts (Rows, Merge Passes)**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics 
- **Sorts (Rows, Range, Scan, Merge Passes)**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **Statement (No Index Used)**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics 
- **Statement Errors**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics 
- **Statement Time**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics 
- **Statement Warnings**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics 
- **Statement With Errors**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics 
- **Statement With Warnings**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics 
- **Statements**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics 
- **Statements**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics 
- **Table Lock Waits**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/MySQL - Overview 
- **Table Open Cache Hits, Misses and Overflows**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **Tables Locks**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **Temporary Objects**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **Threads (Created, Running, Cached, Connected)**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **Tmp Objects**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics 
- **Total Index IO Waits**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics 
- **Total Index IO Waits (milliseconds)**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics 
- **Total Queries Executed**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **Total Queries Executed**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **Total Queries Executed By Client**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics 
- **Total Table IO Waits**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Table Performance Metrics 
- **Total Table IO Waits**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics 
- **Total Table IO Waits (milliseconds)**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Table Performance Metrics 
- **Total Table IO Waits (milliseconds)**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics 
- **Total Table Lock Read Waits**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Table Performance Metrics 
- **Total Table Lock Read Waits**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics 
- **Total Table Lock Read Waits (milliseconds)**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics 
- **Total Table Lock Read Waits (milliseconds)**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Table Performance Metrics 
- **Total Table Lock Write Waits**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Table Performance Metrics 
- **Total Table Lock Write Waits**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics 
- **Total Table Lock Write Waits (milliseconds)**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Table Performance Metrics 
- **Total Table Lock Write Waits (milliseconds)**: from Dashboard: Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics

## Search Table

|app\_topic|search\_name|type|origin|search|
|:--|:--|:--|:--|:--|
|MySQL - OpenTelemetry/Metrics|Available, Active Worker Threads|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|sumo.datasource=mysql metric=mysql.mysqlx\_worker\_threads kind=available  deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Logs|Avg Execution Time by Slow SQL Cmds|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Slow Queries|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} "User@Host" "Query\_time"<br />\| parse regex "(?\<query\_block\># User@Host:[\\S\\s]+?SET timestamp=\\d+;[\\S\\s]+?;)" multi<br />\| parse regex field=query\_block "Schema: (?\<schema\>(?:\\S\*\|\\s)?)\\s\*Last\_errno[\\s\\S]+?Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d.]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d.]\*)\\s+Rows\_affected:\\s+(?\<rows\_affected\>[\\d.]\*)\\s+Rows\_read:\\s+(?\<rows\_read\>[\\d.]\*)\\n" nodrop // Pttrn2-vrtn1<br />\| parse regex field=query\_block "Schema: (?\<schema\>(?:\\S\*\|\\s)?)\\s\*Last\_errno[\\s\\S]+?\\s+Killed:\\s+\\d+\\n" nodrop // Pttrn2-vrtn2<br />\| parse regex field=query\_block "Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d]\*)\\s+Rows\_affected:\\s+(?\<rows\_affected\>[\\d]\*)\\s+" nodrop // Pttrn2-vrtn3<br />\| parse regex field=query\_block "Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d]\*)" // Pttrn2-vrtn4<br />\| parse regex field=query\_block "SET timestamp=(?\<set\_timestamp\>\\d\*);(?:\\\\n\|\\n)(?\<sql\_cmd\>[\\s\\S]\*);" nodrop<br />\| parse regex field=sql\_cmd "[^a-zA-Z]\*(?\<sql\_cmd\_type\>[a-zA-Z]+)(?:\\s\|\\\\n\|\\n)" nodrop<br />\| parse field=sql\_cmd "# administrator command: \*" as admn\_sql\_cmd<br />\| if (sql\_cmd matches "# administrator command: \*", admn\_sql\_cmd, sql\_cmd\_type) as sql\_cmd\_type<br />\| toUpperCase(sql\_cmd\_type)<br />\| fields -query\_block<br />\| timeslice 1h<br />\| avg(query\_time) as avg\_query\_time group by \_timeslice, sql\_cmd\_type<br />\| transpose row \_timeslice column sql\_cmd\_type|
|MySQL - OpenTelemetry|Avg Row Lock Rate|Metrics|Installed Apps/MySQL - OpenTelemetry/MySQL - Overview|deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} metric=mysql.row\_locks \| avg |
|MySQL - OpenTelemetry|Avg Row Lock Rate|Metrics|Installed Apps/MySQL - OpenTelemetry/MySQL - Overview|deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} metric=mysql.row\_locks kind=waits \| avg|
|MySQL - OpenTelemetry/Metrics|Avg Statement Time (ms)|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.statement\_event.wait.time db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} db.name={{db.name}} digest=\* \| sum \| avg \| eval \_value / 1000000|
|MySQL - OpenTelemetry/Metrics|Avg Table IO Waits (ms)|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.table.io.wait.time db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} db.name={{db.name}} db.sql.table={{db.sql.table}} \| quantize using sum \| avg \| eval \_value / 1000000|
|MySQL - OpenTelemetry/Metrics|Bytes Sent, Received|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|sumo.datasource=mysql metric=mysql.client.network.io kind=received    deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Connection Errors|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|sumo.datasource=mysql metric=mysql.connection.errors deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry|Connection Errors|Metrics|Installed Apps/MySQL - OpenTelemetry/MySQL - Overview|deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} metric=mysql.connection.errors \| quantize using sum \| sum |
|MySQL - OpenTelemetry/Metrics|Connection Errors (Internal and Max Connections)|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|sumo.datasource=mysql metric=mysql.connection.errors error=internal   deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Connections|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|sumo.datasource=mysql metric=mysql.mysqlx\_connections status=accepted  deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Logs|Crash Recovery Attempts Over Time|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Error Logs|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} "Starting crash recovery"<br />\| json "log" nodrop \| if (\_raw matches "{\*", log, \_raw) as mesg<br />\| parse regex field=mesg "\\[(?\<ErrorLogtype\>[^\\]]\*)][\\:]\*\\s(?\<ErrorMsg\>.\*)" nodrop<br />\| db.node.name as Host<br />\| timeslice 1h<br />\| count as recovery\_attempts by \_timeslice|
|MySQL - OpenTelemetry/Logs|Error Log Type Over Time|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Error Logs|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} (Error or Warning or Note or Info or Information or DEBUG or CRITICAL)<br />\| json "log" nodrop \| if (\_raw matches "{\*", log, \_raw) as mesg<br />\| parse regex field=mesg "\\[(?\<ErrorLogtype\>[^\\]]\*)][\\:]\*\\s(?\<ErrorMsg\>.\*)" nodrop<br />\| where touppercase(ErrorLogtype) in ("ERROR", "WARNING", "NOTE", "INFO", "INFORMATION", "DEBUG", "CRITICAL")<br />\| timeslice 1h<br />\| count by \_timeslice, ErrorLogtype<br />\| transpose row \_timeslice column ErrorLogType|
|MySQL - OpenTelemetry|Errors|Logs|Installed Apps/MySQL - OpenTelemetry/MySQL - Overview|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} "[ERROR]"<br />\| json "log" nodrop \| if (\_raw matches "{\*", log, \_raw) as mesg<br />\| parse regex field=mesg "\\[(?\<ErrorLogtype\>[^\\]]\*)][\\:]\*\\s(?\<ErrorMsg\>.\*)"<br />\| where ErrorLogtype="ERROR" \| count as error\_count|
|MySQL - OpenTelemetry|Excessive Slow Queries (\>=15 secs)|Logs|Installed Apps/MySQL - OpenTelemetry/MySQL - Overview|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} "User@Host" "Query\_time"  <br />\| parse regex "(?\<query\_block\># User@Host:[\\S\\s]+?SET timestamp=\\d+;[\\S\\s]+?;)" multi<br />\| parse regex field=query\_block "Schema: (?\<schema\>(?:\\S\*\|\\s)?)\\s\*Last\_errno[\\s\\S]+?Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d.]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d.]\*)\\s+Rows\_affected:\\s+(?\<rows\_affected\>[\\d.]\*)\\s+Rows\_read:\\s+(?\<rows\_read\>[\\d.]\*)\\n" nodrop // Pttrn2-vrtn1<br />\| parse regex field=query\_block "Schema: (?\<schema\>(?:\\S\*\|\\s)?)\\s\*Last\_errno[\\s\\S]+?\\s+Killed:\\s+\\d+\\n" nodrop // Pttrn2-vrtn2<br />\| parse regex field=query\_block "Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d]\*)\\s+Rows\_affected:\\s+(?\<rows\_affected\>[\\d]\*)\\s+" nodrop // Pttrn2-vrtn3<br />\| parse regex field=query\_block "Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d]\*)" // Pttrn2-vrtn4<br />\| fields -query\_block<br />\| num(query\_time)<br />\| 15 as threshold // customize if need different value. As an example query taking more than 15 Seconds is considered as Excessive Slow. <br />\| where query\_time \>= threshold \| count as queries\_count|
|MySQL - OpenTelemetry/Logs|Excessive Slow Queries by Host|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Slow Queries|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} "User@Host" "Query\_time"<br />\| parse regex "(?\<query\_block\># User@Host:[\\S\\s]+?SET timestamp=\\d+;[\\S\\s]+?;)" multi<br />\| parse regex field=query\_block "Schema: (?\<schema\>(?:\\S\*\|\\s)?)\\s\*Last\_errno[\\s\\S]+?Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d.]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d.]\*)\\s+Rows\_affected:\\s+(?\<rows\_affected\>[\\d.]\*)\\s+Rows\_read:\\s+(?\<rows\_read\>[\\d.]\*)\\n" nodrop // Pttrn2-vrtn1<br />\| parse regex field=query\_block "Schema: (?\<schema\>(?:\\S\*\|\\s)?)\\s\*Last\_errno[\\s\\S]+?\\s+Killed:\\s+\\d+\\n" nodrop // Pttrn2-vrtn2<br />\| parse regex field=query\_block "Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d]\*)\\s+Rows\_affected:\\s+(?\<rows\_affected\>[\\d]\*)\\s+" nodrop // Pttrn2-vrtn3<br />\| parse regex field=query\_block "Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d]\*)" // Pttrn2-vrtn4<br />\| num(query\_time)<br />\| 15 as threshold // customize if need different value. As an example query taking more than 15 Seconds is considered as Excessive Slow. <br />\| where (query\_time \>= threshold)<br />\| fields -query\_block<br />\| count as queries\_count by db.node.name \| sort by queries\_count|
|MySQL - OpenTelemetry/Logs|Excessive Slow Queries Over Time|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Slow Queries|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} "User@Host" "Query\_time"<br />\| parse regex "(?\<query\_block\># User@Host:[\\S\\s]+?SET timestamp=\\d+;[\\S\\s]+?;)" multi<br />\| parse regex field=query\_block "Schema: (?\<schema\>(?:\\S\*\|\\s)?)\\s\*Last\_errno[\\s\\S]+?Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d.]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d.]\*)\\s+Rows\_affected:\\s+(?\<rows\_affected\>[\\d.]\*)\\s+Rows\_read:\\s+(?\<rows\_read\>[\\d.]\*)\\n" nodrop // Pttrn2-vrtn1<br />\| parse regex field=query\_block "Schema: (?\<schema\>(?:\\S\*\|\\s)?)\\s\*Last\_errno[\\s\\S]+?\\s+Killed:\\s+\\d+\\n" nodrop // Pttrn2-vrtn2<br />\| parse regex field=query\_block "Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d]\*)\\s+Rows\_affected:\\s+(?\<rows\_affected\>[\\d]\*)\\s+" nodrop // Pttrn2-vrtn3<br />\| parse regex field=query\_block "Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d]\*)" // Pttrn2-vrtn4<br />\| num(query\_time)<br />\| 15 as threshold // customize if need different value. As an example query taking more than 15 Seconds is considered as Excessive Slow. <br />\| where query\_time \>= threshold <br />\| timeslice 1h<br />\| count as queries\_count by \_timeslice|
|MySQL - OpenTelemetry/Logs|Failed Login Attempts|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Failed Logins|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} Access denied for user<br />\| json "log" nodrop \| if (\_raw matches "{\*", log, \_raw) as mesg<br />\| parse regex field=mesg "\\[(?\<ErrorLogtype\>[^\\]]\*)][\\:]\*\\s(?\<ErrorMsg\>.\*)" nodrop<br />\| parse field=ErrorMsg "Access denied for user '\*'@'\*' (using password: YES)" as user, ip\_address<br />\| count as failed\_login\_event\_count|
|MySQL - OpenTelemetry|Failed Login Attempts|Logs|Installed Apps/MySQL - OpenTelemetry/MySQL - Overview|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} "[Warning]" Access denied for user<br />\| json "log" nodrop \| if (\_raw matches "{\*", log, \_raw) as mesg<br />\| parse regex field=mesg "\\[(?\<ErrorLogtype\>[^\\]]\*)][\\:]\*\\s(?\<ErrorMsg\>.\*)" nodrop<br />\| parse field=ErrorMsg "Access denied for user '\*'@'\*' (using password: YES)" as user, ip\_address<br />\| count as failed\_login\_count|
|MySQL - OpenTelemetry/Logs|Failed Login Attempts - Details|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Failed Logins|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} Access denied for user<br />\| json "log" nodrop \| if (\_raw matches "{\*", log, \_raw) as mesg<br />\| parse regex field=mesg "\\[(?\<ErrorLogtype\>[^\\]]\*)][\\:]\*\\s(?\<ErrorMsg\>.\*)" nodrop<br />\| parse field=ErrorMsg "Access denied for user '\*'@'\*' (using password:" as user, ip\_address<br />\| timeslice 1s<br />\| count as event\_count by user, ip\_address, db.cluster.name|
|MySQL - OpenTelemetry/Logs|Failed Login Attempts - Location|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Failed Logins|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} Access denied for user<br />\| json "log" nodrop \| if (\_raw matches "{\*", log, \_raw) as mesg<br />\| parse regex field=mesg "\\[(?\<ErrorLogtype\>[^\\]]\*)][\\:]\*\\s(?\<ErrorMsg\>.\*)" nodrop<br />\| parse field=ErrorMsg "Access denied for user '\*'@'\*' (using password: YES)" as user, ip\_address<br />\| count as event\_count by ip\_address<br />\| lookup latitude, longitude, country\_name, state, city from geo://location on ip = ip\_address<br />\| where !isNull(latitude)|
|MySQL - OpenTelemetry/Logs|Failed Login Attempts Trend|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Failed Logins|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} Access denied for user<br />\| json "log" nodrop \| if (\_raw matches "{\*", log, \_raw) as mesg<br />\| parse regex field=mesg "\\[(?\<ErrorLogtype\>[^\\]]\*)][\\:]\*\\s(?\<ErrorMsg\>.\*)" nodrop<br />\| parse field=ErrorMsg "Access denied for user '\*'@'\*' (using password: YES)" as user, ip\_address<br />\| timeslice 1h<br />\| count as event\_count by \_timeslice|
|MySQL - OpenTelemetry|FSync Op Count|Metrics|Installed Apps/MySQL - OpenTelemetry/MySQL - Overview|deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} metric=mysql.operations operation=fsyncs \| sum|
|MySQL - OpenTelemetry/Metrics|FSync Op Count|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|deployment.environment={{deployment.environment}} sumo.datasource=mysql metric=mysql.operations operation=fsyncs db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Innodb Buffer Pool Read Requests vs Disk Reads|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|deployment.environment={{deployment.environment}} sumo.datasource=mysql metric=mysql.buffer\_pool.operations operation=read\_requests db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Innodb Buffer Pool Usage|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|sumo.datasource=mysql metric=mysql.buffer\_pool.pages kind=data deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Innodb Buffer Pool Usage|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|sumo.datasource=mysql metric=mysql.buffer\_pool.pages kind=misc  deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Innodb Data (fsyncs, read, write)|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|deployment.environment={{deployment.environment}} sumo.datasource=mysql metric=mysql.operations operation=reads db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry|Innodb Row Lock Waits|Metrics|Installed Apps/MySQL - OpenTelemetry/MySQL - Overview|deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} metric=mysql.row\_locks kind=waits \| sum|
|MySQL - OpenTelemetry/Metrics|Innodb Row Lock Waits|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|deployment.environment={{deployment.environment}} sumo.datasource=mysql metric=mysql.row\_locks kind=waits db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Innodb Rows (read, updated, inserted, deleted)|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|deployment.environment={{deployment.environment}} sumo.datasource=mysql metric=mysql.row\_operations operation=read  db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Innodb Waits|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|deployment.environment={{deployment.environment}} sumo.datasource=mysql metric=mysql.log\_operations operation=waits db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Locked Connects|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|sumo.datasource=mysql (metric=mysql.locked\_connects or  metric=mysql.connection.errors) deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Logs|Log Reduce|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Error Logs|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} ("ERROR" or "CRITICAL") <br />\| json "log" nodrop \| if (\_raw matches "{\*", log, \_raw) as mesg<br />\| logreduce(mesg) by db.cluster.name limit=20<br />\| \_count as count \| fields -\_count \| sort by count, signature asc|
|MySQL - OpenTelemetry/Metrics|No Index Used|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.statement\_event.count kind=no\_index\_used  db.name={{db.name}} digest=\* db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Open Table Cache Hit Ratio|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|sumo.datasource=mysql metric=mysql.table\_open\_cache status=hit deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Opened Tables and Files|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|sumo.datasource=mysql metric=mysql.opened\_resources kind=table  deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Queries Executed|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|sumo.datasource=mysql metric=mysql.query.client.count deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry|Queries Executed|Metrics|Installed Apps/MySQL - OpenTelemetry/MySQL - Overview|deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} metric=mysql.query.client.count \| sum|
|MySQL - OpenTelemetry|Replication Errors|Logs|Installed Apps/MySQL - OpenTelemetry/MySQL - Overview|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} (("[ERROR]" and ("Slave I/O" or "Error reading packet from server" or "Slave SQL")) or "[Note] Error reading relay log event: slave SQL thread was killed")<br />\| json "log" nodrop \| if (\_raw matches "{\*", log, \_raw) as mesg<br />\| parse regex field=mesg "\\[(?\<ErrorLogtype\>[^\\]]\*)][\\:]\*\\s(?\<ErrorMsg\>.\*)" nodrop<br />\| count as replication\_failure\_count|
|MySQL - OpenTelemetry/Logs|Replication Start-Stop Events|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Replication|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} "[Note]" "SQL thread"<br />\| json "log" nodrop \| if (\_raw matches "{\*", log, \_raw) as mesg<br />\| parse regex field=mesg "\\[(?\<ErrorLogtype\>[^\\]]\*)][\\:]\*\\s(?\<ErrorMsg\>.\*)" nodrop<br />\| parse field=ErrorMsg "Slave SQL thread for channel '' \*, starting replication in log \* at position \*, relay log \* position: \*" as State,ReplicationLog,ReplicationPosition,RelayLog,RelayPosition nodrop<br />\| parse field=ErrorMsg "Slave SQL thread for channel '' exiting, replication \* in log \* at position \*" as State,ReplicationLog,StoppedUntilPosition nodrop<br />\| where state in ("starting", "stopped")<br />\| timeslice 1h as date<br />\| count as event\_count by date, state \| fillmissing timeslice(1h) in date,values("starting","stopped") in State <br />\| formatDate(date, "MM/dd/yyyy HH:mm:ss") as Date<br />\| transpose row Date column state as starting, stopped <br />|
|MySQL - OpenTelemetry|Replication Status Over Time|Logs|Installed Apps/MySQL - OpenTelemetry/MySQL - Overview|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} ("[Note]" or ("[ERROR]" ("Slave I/O" or "Error reading packet from server" or "Slave SQL")))<br />\| json "log" nodrop \| if (\_raw matches "{\*", log, \_raw) as mesg<br />\| parse regex field=mesg "\\[(?\<ErrorLogtype\>[^\\]]\*)][\\:]\*\\s(?\<ErrorMsg\>.\*)" nodrop<br />\| parse field=ErrorMsg "Slave SQL thread initialized, \* replication in log '\*' at position \*, relay log '\*' position: \*" as State,ReplicationLog,ReplicationPosition,ReplayLog,RelayPosition nodrop<br />\| parse field=ErrorMsg "Slave SQL thread \* because it reached its UNTIL position \*" as State, StoppedUntilPosition nodrop<br />\| parse field=ErrorMsg "Error reading relay log event: slave SQL thread was \*" as state nodrop<br />\| if(\_raw matches "\*[ERROR] Slave I/O\*" or \_raw matches "\*[ERROR] Error reading packet from server\*"  or \_raw matches "\*[ERROR] Slave SQL\*" or \_raw matches "\* [ERROR] \* Slave I/O\*" or \_raw matches "\* Error reading packet from server\*"  or \_raw matches "\* [ERROR] \* Slave SQL\*","failed",state) as state<br />\| where state in ("starting", "stopped", "killed", "failed")<br />\| timeslice 1h<br />\| count by \_timeslice, state<br />\| transpose row \_timeslice column state<br />\| fillmissing timeslice(1h)|
|MySQL - OpenTelemetry/Logs|Replication Status Over Time|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Replication|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} ("[Note]" or ("[ERROR]" ("Slave I/O" or "Error reading packet from server" or "Slave SQL")))<br />\| json "log" nodrop \| if (\_raw matches "{\*", log, \_raw) as mesg<br />\| parse regex field=mesg "\\[(?\<ErrorLogtype\>[^\\]]\*)][\\:]\*\\s(?\<ErrorMsg\>.\*)" nodrop<br />\| parse field=ErrorMsg "Slave SQL thread initialized, \* replication in log '\*' at position \*, relay log '\*' position: \*" as State,ReplicationLog,ReplicationPosition,ReplayLog,RelayPosition nodrop<br />\| parse field=ErrorMsg "Slave SQL thread \* because it reached its UNTIL position \*" as State, StoppedUntilPosition nodrop<br />\| parse field=ErrorMsg "Error reading relay log event: slave SQL thread was \*" as state nodrop<br />\| if(\_raw matches "\*[ERROR] Slave I/O\*" or \_raw matches "\*[ERROR] Error reading packet from server\*"  or \_raw matches "\*[ERROR] Slave SQL\*" or \_raw matches "\* [ERROR] \* Slave I/O\*" or \_raw matches "\* Error reading packet from server\*"  or \_raw matches "\* [ERROR] \* Slave SQL\*","failed",state) as state<br />\| where state in ("starting", "stopped", "killed", "failed")<br />\| timeslice 1h<br />\| count by \_timeslice, state<br />\| transpose row \_timeslice column state<br />\| fillmissing timeslice(1h)|
|MySQL - OpenTelemetry/Metrics|Rows (Examined, Sent, Affected)|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.statement\_event.count kind=rows\_examined  db.name={{db.name}} digest=\* db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Select Types|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|sumo.datasource=mysql metric=mysql.joins kind=full deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Logs|Server Start and Shutdown Events Over Time|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Error Logs|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} mysqld ("ready for connections." or "Shutdown complete" or "Terminated." or "Normal shutdown" or "Shutting down" or "starting as process")<br />\| json "log" nodrop \| if (\_raw matches "{\*", log, \_raw) as mesg<br />\| parse regex field=mesg "\\[(?\<ErrorLogtype\>[^\\]]\*)][\\:]\*\\s(?\<ErrorMsg\>.\*)" nodrop<br />\| if (ErrorMsg matches "\*ready for connections.\*", "Up","Unknown") as server\_status<br />\| if (ErrorMsg matches "\*Terminated.\*", "Down", server\_status) as server\_status<br />\| if (ErrorMsg matches "\*Normal shutdown\*", "Shutting Down", server\_status) as server\_status<br />\| if (ErrorMsg matches "\*Shutting down\*", "Shutting Down", server\_status) as server\_status<br />\| if (ErrorMsg matches "\*Shutdown complete\*", "Down", server\_status) as server\_status<br />\| if (ErrorMsg matches "\*starting as process\*", "Starting",server\_status) as server\_status<br />\| timeslice 15m<br />\| count by \_timeslice, server\_status<br />\| transpose row \_timeslice column server\_status|
|MySQL - OpenTelemetry|Slow Queries|Metrics|Installed Apps/MySQL - OpenTelemetry/MySQL - Overview|deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} metric=mysql.query.slow.count \| sum |
|MySQL - OpenTelemetry/Logs|Slow Queries by Hosts|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Slow Queries|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} "User@Host" "Query\_time"<br />\| parse regex "(?\<query\_block\># User@Host:[\\S\\s]+?SET timestamp=\\d+;[\\S\\s]+?;)" multi<br />\| parse regex field=query\_block "Schema: (?\<schema\>(?:\\S\*\|\\s)?)\\s\*Last\_errno[\\s\\S]+?Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d.]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d.]\*)\\s+Rows\_affected:\\s+(?\<rows\_affected\>[\\d.]\*)\\s+Rows\_read:\\s+(?\<rows\_read\>[\\d.]\*)\\n" nodrop // Pttrn2-vrtn1<br />\| parse regex field=query\_block "Schema: (?\<schema\>(?:\\S\*\|\\s)?)\\s\*Last\_errno[\\s\\S]+?\\s+Killed:\\s+\\d+\\n" nodrop // Pttrn2-vrtn2<br />\| parse regex field=query\_block "Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d]\*)\\s+Rows\_affected:\\s+(?\<rows\_affected\>[\\d]\*)\\s+" nodrop // Pttrn2-vrtn3<br />\| parse regex field=query\_block "Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d]\*)" nodrop // Pttrn2-vrtn4<br />\| num(query\_time) as query\_time<br />\| where query\_time \>= {{slow\_query\_latency}}<br />\| fields -query\_block<br />\| count as queries\_count by db.node.name <br />\| sort by queries\_count|
|MySQL - OpenTelemetry|Slow Queries Over Time|Logs|Installed Apps/MySQL - OpenTelemetry/MySQL - Overview|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} "User@Host" "Query\_time"<br />\| parse regex "(?\<query\_block\># User@Host:[\\S\\s]+?SET timestamp=\\d+;[\\S\\s]+?;)" multi<br />\| timeslice 1h<br />\| count as queries\_count by \_timeslice|
|MySQL - OpenTelemetry/Logs|Slow Queries Over Time|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Slow Queries|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} "User@Host" "Query\_time"<br />\| parse regex "(?\<query\_block\># User@Host:[\\S\\s]+?SET timestamp=\\d+;[\\S\\s]+?;)" multi<br />\| parse regex field=query\_block "Schema: (?\<schema\>(?:\\S\*\|\\s)?)\\s\*Last\_errno[\\s\\S]+?Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d.]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d.]\*)\\s+Rows\_affected:\\s+(?\<rows\_affected\>[\\d.]\*)\\s+Rows\_read:\\s+(?\<rows\_read\>[\\d.]\*)\\n" nodrop // Pttrn2-vrtn1<br />\| parse regex field=query\_block "Schema: (?\<schema\>(?:\\S\*\|\\s)?)\\s\*Last\_errno[\\s\\S]+?\\s+Killed:\\s+\\d+\\n" nodrop // Pttrn2-vrtn2<br />\| parse regex field=query\_block "Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d]\*)\\s+Rows\_affected:\\s+(?\<rows\_affected\>[\\d]\*)\\s+" nodrop // Pttrn2-vrtn3<br />\| parse regex field=query\_block "Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d]\*)" nodrop // Pttrn2-vrtn4<br />\| num(query\_time) as query\_time<br />\| where query\_time \>= {{slow\_query\_latency}}<br />\| timeslice 1h<br />\| count as queries\_count by \_timeslice|
|MySQL - OpenTelemetry/Logs|Slow Query by Cmd Type|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Slow Queries|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} "User@Host" "Query\_time"<br />\| parse regex "(?\<query\_block\># User@Host:[\\S\\s]+?SET timestamp=\\d+;[\\S\\s]+?;)" multi<br />\| parse regex field=query\_block "SET timestamp=(?\<set\_timestamp\>\\d\*);(?:\\\\n\|\\n)(?\<sql\_cmd\>[\\s\\S]\*);" nodrop<br />\| parse regex field=query\_block "Schema: (?\<schema\>(?:\\S\*\|\\s)?)\\s\*Last\_errno[\\s\\S]+?Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d.]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d.]\*)\\s+Rows\_affected:\\s+(?\<rows\_affected\>[\\d.]\*)\\s+Rows\_read:\\s+(?\<rows\_read\>[\\d.]\*)\\n" nodrop // Pttrn2-vrtn1<br />\| parse regex field=query\_block "Schema: (?\<schema\>(?:\\S\*\|\\s)?)\\s\*Last\_errno[\\s\\S]+?\\s+Killed:\\s+\\d+\\n" nodrop // Pttrn2-vrtn2<br />\| parse regex field=query\_block "Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d]\*)\\s+Rows\_affected:\\s+(?\<rows\_affected\>[\\d]\*)\\s+" nodrop // Pttrn2-vrtn3<br />\| parse regex field=query\_block "Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d]\*)" nodrop // Pttrn2-vrtn4<br />\| num(query\_time) as query\_time<br />\| where query\_time \>= {{slow\_query\_latency}}<br />\| parse regex field=sql\_cmd "[^a-zA-Z]\*(?\<sql\_cmd\_type\>[a-zA-Z]+)(?:\\s\|\\\\n\|\\n)" nodrop<br />\| parse field=sql\_cmd "# administrator command: \*" as admn\_sql\_cmd<br />\| if (sql\_cmd matches "# administrator command: \*", admn\_sql\_cmd, sql\_cmd\_type) as sql\_cmd\_type<br />\| toUpperCase(sql\_cmd\_type)<br />\| fields -query\_block<br />\| count as frequency group by sql\_cmd\_type \| sort by frequency|
|MySQL - OpenTelemetry/Metrics|Sorts (Rows, Merge Passes)|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.statement\_event.count kind=sort\_rows  db.name={{db.name}} digest=\* db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Sorts (Rows, Range, Scan, Merge Passes)|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|deployment.environment={{deployment.environment}} sumo.datasource=mysql metric=mysql.sorts kind=rows db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Statement (No Index Used)|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.statement\_event.count kind=no\_index\_used  db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} db.name={{db.name}} digest=\* \| sum|
|MySQL - OpenTelemetry/Metrics|Statement Errors|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.statement\_event.count kind=errors  db.name={{db.name}} digest=\* db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Statement Time|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.statement\_event.wait.time db.name={{db.name}} digest=\* db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| avg \| eval \_value / 1000000|
|MySQL - OpenTelemetry/Metrics|Statement Warnings|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.statement\_event.count kind=warnings  db.name={{db.name}} digest=\* db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Statement With Errors|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.statement\_event.count kind=errors db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} db.name={{db.name}} digest=\* \| sum|
|MySQL - OpenTelemetry/Metrics|Statement With Warnings|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.statement\_event.count kind=warnings  db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} db.name={{db.name}} digest=\* \| sum|
|MySQL - OpenTelemetry/Metrics|Statements|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.statement\_event.count db.name={{db.name}} digest=\* db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Statements|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.statement\_event.count db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} db.name={{db.name}} digest=\* \| quantize using sum \| avg|
|MySQL - OpenTelemetry/Logs|Stopped Servers|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Error Logs|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} mysqld ("ready for connections."  or "Terminated." or "Shutdown complete" or "Normal shutdown")<br />\| json "log" nodrop \| if (\_raw matches "{\*", log, \_raw) as mesg<br />\| parse regex field=mesg "\\[(?\<ErrorLogtype\>[^\\]]\*)][\\:]\*\\s(?\<ErrorMsg\>.\*)" nodrop<br />\| if (ErrorMsg matches "\*ready for connections.\*", "Up","Unknown") as server\_status<br />\| if (ErrorMsg matches "\*Terminated.\*", "Down", server\_status) as server\_status<br />\| if (ErrorMsg matches "\*Normal shutdown\*", "Shutting Down", server\_status) as server\_status<br />\| if (ErrorMsg matches "\*Shutdown complete\*", "Down", server\_status) as server\_status<br />\| timeslice 100s<br />\| withtime server\_status \| withtime \_messagetime<br />\| most\_recent(server\_status\_withtime) as server\_status, most\_recent(\_messagetime\_withtime) as m\_time by db.node.name, db.cluster.name<br />\| formatDate(fromMillis(m\_time), "MM-dd-yyyy HH:mm:ss:SSS Z") as event\_time<br />\| ((toMillis(now())-m\_time)/(1000\*60)) as since\_mins \| format("%.2f", since\_mins) as since\_minutes<br />\| concat ("Since ", since\_minutes, " minutes") as remark<br />\| where server\_status != "Up"<br />\| fields - m\_time, since\_mins, since\_minutes <br />\| fields db.node.name, event\_time, server\_status, remark, db.cluster.name|
|MySQL - OpenTelemetry|Table Lock Waits|Metrics|Installed Apps/MySQL - OpenTelemetry/MySQL - Overview|deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} metric=mysql.locks kind=waited \| sum|
|MySQL - OpenTelemetry/Metrics|Table Open Cache Hits, Misses and Overflows|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|sumo.datasource=mysql metric=mysql.table\_open\_cache status=hit deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Tables Locks|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|deployment.environment={{deployment.environment}} sumo.datasource=mysql metric=mysql.locks kind=immediate db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Temporary Objects|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|sumo.datasource=mysql metric=mysql.tmp\_resources resource=tables  deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Threads (Created, Running, Cached, Connected)|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|deployment.environment={{deployment.environment}} sumo.datasource=mysql metric=mysql.threads kind=created db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Tmp Objects|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.statement\_event.count kind=created\_tmp\_tables  db.name={{db.name}} digest=\* db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Logs|Top 10 Excessive Slow Queries by Frequency|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Slow Queries|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} "User@Host" "Query\_time"<br />\| parse regex "(?\<query\_block\># User@Host:[\\S\\s]+?SET timestamp=\\d+;[\\S\\s]+?;)" multi<br />\| parse regex field=query\_block "# User@Host: \\S+?\\[(?\<user\>\\S\*?)\\] @ (?\<host\_name\>\\S+)\\s\\[(?\<ip\_addr\>\\S\*?)\\]" nodrop // Pttrn1-vrtn1<br />\| parse regex field=query\_block "# User@Host: \\S+?\\[(?\<user\>\\S\*?)\\] @\\s+\\[(?\<ip\_addr\>\\S\*?)\\]\\s+Id:\\s+(?\<Id\>\\d{1,10})" nodrop // Pttrn1-vrtn2<br />\| parse regex field=query\_block "# User@Host: \\S+?\\[(?\<user\>\\S\*?)\\] @ (?\<host\_name\>\\S+)\\s\\[(?\<ip\_addr\>\\S\*?)\\]\\s+Id:\\s+(?\<Id\>\\d{1,10})" // Pttrn1-vrtn3<br />\| parse regex field=query\_block "Schema: (?\<schema\>(?:\\S\*\|\\s)?)\\s\*Last\_errno[\\s\\S]+?Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d.]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d.]\*)\\s+Rows\_affected:\\s+(?\<rows\_affected\>[\\d.]\*)\\s+Rows\_read:\\s+(?\<rows\_read\>[\\d.]\*)\\n" nodrop // Pttrn2-vrtn1<br />\| parse regex field=query\_block "Schema: (?\<schema\>(?:\\S\*\|\\s)?)\\s\*Last\_errno[\\s\\S]+?\\s+Killed:\\s+\\d+\\n" nodrop // Pttrn2-vrtn2<br />\| parse regex field=query\_block "Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d]\*)\\s+Rows\_affected:\\s+(?\<rows\_affected\>[\\d]\*)\\s+" nodrop // Pttrn2-vrtn3<br />\| parse regex field=query\_block "Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d]\*)" // Pttrn2-vrtn4<br />\| parse regex field=query\_block "# Bytes\_sent:\\s+(?\<bytes\_sent\>\\d\*)\\s+Tmp\_tables:\\s+(?\<tmp\_tables\>\\d\*)\\s+Tmp\_disk\_tables:\\s+(?\<temp\_disk\_tables\>\\d\*)\\s+Tmp\_table\_sizes:\\s+(?\<tmp\_table\_sizes\>\\d\*)\\n" nodrop // Pttrn3-vrtn1<br />\| parse regex field=query\_block "# Bytes\_sent:\\s+(?\<bytes\_sent\>\\d\*)\\n" nodrop // Pttrn3-vrtn2<br />\| parse regex field=query\_block "SET timestamp=(?\<set\_timestamp\>\\d\*);(?:\\\\n\|\\n)(?\<sql\_cmd\>[\\s\\S]\*);" nodrop<br />\| fields -query\_block<br />\| count as frequency, sum(query\_time) as total\_time, min(query\_time) as min\_time, max(query\_time) as max\_time, avg(query\_time) as avg\_time, avg(rows\_examined) as avg\_rows\_examined, avg(rows\_sent) as avg\_rows\_sent, avg(Lock\_Time) as avg\_lock\_time group by sql\_cmd, db.cluster.name<br />\| where avg\_time \>= {{slow\_query\_latency}}<br />\| sort by frequency \| limit 10|
|MySQL - OpenTelemetry/Logs|Top 10 Failed Login Attempts by Hosts|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Failed Logins|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} Access denied for user<br />\| json "log" nodrop \| if (\_raw matches "{\*", log, \_raw) as mesg<br />\| parse regex field=mesg "\\[(?\<ErrorLogtype\>[^\\]]\*)][\\:]\*\\s(?\<ErrorMsg\>.\*)" nodrop<br />\| parse field=ErrorMsg "Access denied for user '\*'@'\*' (using password: YES)" as user, ip\_address<br />\| count as event\_count by ip\_address<br />\| top 10 ip\_address by event\_count|
|MySQL - OpenTelemetry/Logs|Top 10 Failed Login Attempts by Users|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Failed Logins|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} Access denied for user<br />\| json "log" nodrop \| if (\_raw matches "{\*", log, \_raw) as mesg<br />\| parse regex field=mesg "\\[(?\<ErrorLogtype\>[^\\]]\*)][\\:]\*\\s(?\<ErrorMsg\>.\*)" nodrop<br />\| parse field=ErrorMsg "Access denied for user '\*'@'\*' (using password: YES)" as user, ip\_address<br />\| count as event\_count by user<br />\| top 10 user by event\_count|
|MySQL - OpenTelemetry/Logs|Top 10 Slow Queries by Average Execution Time|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Slow Queries|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} "User@Host" "Query\_time"  <br />\| parse regex "(?\<query\_block\># User@Host:[\\S\\s]+?SET timestamp=\\d+;[\\S\\s]+?;)" multi<br />\| parse regex field=query\_block "# User@Host: \\S+?\\[(?\<user\>\\S\*?)\\] @ (?\<host\_name\>\\S+)\\s\\[(?\<ip\_addr\>\\S\*?)\\]" nodrop // Pttrn1-vrtn1<br />\| parse regex field=query\_block "# User@Host: \\S+?\\[(?\<user\>\\S\*?)\\] @\\s+\\[(?\<ip\_addr\>\\S\*?)\\]\\s+Id:\\s+(?\<Id\>\\d{1,10})" nodrop // Pttrn1-vrtn2<br />\| parse regex field=query\_block "# User@Host: \\S+?\\[(?\<user\>\\S\*?)\\] @ (?\<host\_name\>\\S+)\\s\\[(?\<ip\_addr\>\\S\*?)\\]\\s+Id:\\s+(?\<Id\>\\d{1,10})" // Pttrn1-vrtn3<br />\| parse regex field=query\_block "Schema: (?\<schema\>(?:\\S\*\|\\s)?)\\s\*Last\_errno[\\s\\S]+?Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d.]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d.]\*)\\s+Rows\_affected:\\s+(?\<rows\_affected\>[\\d.]\*)\\s+Rows\_read:\\s+(?\<rows\_read\>[\\d.]\*)\\n" nodrop // Pttrn2-vrtn1<br />\| parse regex field=query\_block "Schema: (?\<schema\>(?:\\S\*\|\\s)?)\\s\*Last\_errno[\\s\\S]+?\\s+Killed:\\s+\\d+\\n" nodrop // Pttrn2-vrtn2<br />\| parse regex field=query\_block "Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d]\*)\\s+Rows\_affected:\\s+(?\<rows\_affected\>[\\d]\*)\\s+" nodrop // Pttrn2-vrtn3<br />\| parse regex field=query\_block "Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d]\*)" // Pttrn2-vrtn4<br />\| parse regex field=query\_block "# Bytes\_sent:\\s+(?\<bytes\_sent\>\\d\*)\\s+Tmp\_tables:\\s+(?\<tmp\_tables\>\\d\*)\\s+Tmp\_disk\_tables:\\s+(?\<temp\_disk\_tables\>\\d\*)\\s+Tmp\_table\_sizes:\\s+(?\<tmp\_table\_sizes\>\\d\*)\\n" nodrop // Pttrn3-vrtn1<br />\| parse regex field=query\_block "# Bytes\_sent:\\s+(?\<bytes\_sent\>\\d\*)\\n" nodrop // Pttrn3-vrtn2<br />\| parse regex field=query\_block "SET timestamp=(?\<set\_timestamp\>\\d\*);(?:\\\\n\|\\n)(?\<sql\_cmd\>[\\s\\S]\*);" nodrop<br />\| fields -query\_block<br />\| avg(query\_time) as avg\_time, sum(query\_time) as total\_time, min(query\_time) as min\_time, max(query\_time) as max\_time, avg(rows\_examined) as avg\_rows\_examined, avg(rows\_sent) as avg\_rows\_sent, avg(Lock\_Time) as avg\_lock\_time, count as frequency group by sql\_cmd, db.cluster.name<br />\| where avg\_time \>= {{slow\_query\_latency}}<br />\| sort by avg\_time \| limit 10|
|MySQL - OpenTelemetry/Logs|Top Errors|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Error Logs|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} "[ERROR]"<br />\| json "log" nodrop \| if (\_raw matches "{\*", log, \_raw) as mesg<br />\| parse regex field=mesg "\\[(?\<ErrorLogtype\>[^\\]]\*)][\\:]\*\\s(?\<ErrorMsg\>.\*)"<br />\| where ErrorLogtype="ERROR"<br />\| parse field=ErrorMsg "[\*] [\*] \*" as err\_code, subsystem, error\_message nodrop<br />\| if (!isEmpty(error\_message), error\_message, ErrorMsg) as error\_message<br />\| count as frequency by error\_message, db.cluster.name, err\_code, subsystem<br />\| sort by frequency, error\_message asc<br />\| limit 30|
|MySQL - OpenTelemetry/Logs|Top IP Firing Slow Queries|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Slow Queries|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} "User@Host" "Query\_time"  <br />\| parse regex "(?\<query\_block\># User@Host:[\\S\\s]+?SET timestamp=\\d+;[\\S\\s]+?;)" multi<br />\| parse regex field=query\_block "# User@Host: \\S+?\\[(?\<user\>\\S\*?)\\] @ (?\<host\_name\>\\S+)\\s\\[(?\<ip\_addr\>\\S\*?)\\]" nodrop // Pttrn1-vrtn1<br />\| parse regex field=query\_block "# User@Host: \\S+?\\[(?\<user\>\\S\*?)\\] @\\s+\\[(?\<ip\_addr\>\\S\*?)\\]\\s+Id:\\s+(?\<Id\>\\d{1,10})" nodrop // Pttrn1-vrtn2<br />\| parse regex field=query\_block "# User@Host: \\S+?\\[(?\<user\>\\S\*?)\\] @ (?\<host\_name\>\\S+)\\s\\[(?\<ip\_addr\>\\S\*?)\\]\\s+Id:\\s+(?\<Id\>\\d{1,10})" // Pttrn1-vrtn3<br />\| parse regex field=query\_block "Schema: (?\<schema\>(?:\\S\*\|\\s)?)\\s\*Last\_errno[\\s\\S]+?Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d.]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d.]\*)\\s+Rows\_affected:\\s+(?\<rows\_affected\>[\\d.]\*)\\s+Rows\_read:\\s+(?\<rows\_read\>[\\d.]\*)\\n" nodrop // Pttrn2-vrtn1<br />\| parse regex field=query\_block "Schema: (?\<schema\>(?:\\S\*\|\\s)?)\\s\*Last\_errno[\\s\\S]+?\\s+Killed:\\s+\\d+\\n" nodrop // Pttrn2-vrtn2<br />\| parse regex field=query\_block "Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d]\*)\\s+Rows\_affected:\\s+(?\<rows\_affected\>[\\d]\*)\\s+" nodrop // Pttrn2-vrtn3<br />\| parse regex field=query\_block "Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d]\*)" nodrop // Pttrn2-vrtn4<br />\| num(query\_time) as query\_time<br />\| where query\_time \>= {{slow\_query\_latency}}<br />\| fields -query\_block<br />\| count as frequency by ip\_addr <br />\| where !isEmpty(ip\_addr)<br />\| sort by frequency|
|MySQL - OpenTelemetry/Logs|Top Reasons for Replication Failures|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Replication|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} (("[ERROR]" and ("Slave I/O" or "Error reading packet from server" or "Slave SQL")) or ("[Note] Error reading relay log event: slave SQL thread was killed"))<br />\| json "log" nodrop \| if (\_raw matches "{\*", log, \_raw) as mesg<br />\| parse regex field=mesg "\\[(?\<ErrorLogtype\>[^\\]]\*)][\\:]\*\\s(?\<ErrorMsg\>.\*)" nodrop<br />\| ErrorMsg as error\_message<br />\| count as frequency by error\_message, db.cluster.name<br />\| sort by frequency|
|MySQL - OpenTelemetry/Logs|Top Users Firing Slow Queries|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Slow Queries|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} "User@Host" "Query\_time"<br />\| parse regex "(?\<query\_block\># User@Host:[\\S\\s]+?SET timestamp=\\d+;[\\S\\s]+?;)" multi<br />\| parse regex field=query\_block "# User@Host: \\S+?\\[(?\<user\>\\S\*?)\\] @ (?\<host\_name\>\\S+)\\s\\[(?\<ip\_addr\>\\S\*?)\\]" nodrop // Pttrn1-vrtn1<br />\| parse regex field=query\_block "# User@Host: \\S+?\\[(?\<user\>\\S\*?)\\] @\\s+\\[(?\<ip\_addr\>\\S\*?)\\]\\s+Id:\\s+(?\<Id\>\\d{1,10})" nodrop // Pttrn1-vrtn2<br />\| parse regex field=query\_block "# User@Host: \\S+?\\[(?\<user\>\\S\*?)\\] @ (?\<host\_name\>\\S+)\\s\\[(?\<ip\_addr\>\\S\*?)\\]\\s+Id:\\s+(?\<Id\>\\d{1,10})" // Pttrn1-vrtn3<br />\| parse regex field=query\_block "Schema: (?\<schema\>(?:\\S\*\|\\s)?)\\s\*Last\_errno[\\s\\S]+?Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d.]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d.]\*)\\s+Rows\_affected:\\s+(?\<rows\_affected\>[\\d.]\*)\\s+Rows\_read:\\s+(?\<rows\_read\>[\\d.]\*)\\n" nodrop // Pttrn2-vrtn1<br />\| parse regex field=query\_block "Schema: (?\<schema\>(?:\\S\*\|\\s)?)\\s\*Last\_errno[\\s\\S]+?\\s+Killed:\\s+\\d+\\n" nodrop // Pttrn2-vrtn2<br />\| parse regex field=query\_block "Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d]\*)\\s+Rows\_affected:\\s+(?\<rows\_affected\>[\\d]\*)\\s+" nodrop // Pttrn2-vrtn3<br />\| parse regex field=query\_block "Query\_time:\\s+(?\<query\_time\>[\\d.]\*)\\s+Lock\_time:\\s+(?\<lock\_time\>[\\d.]\*)\\s+Rows\_sent:\\s+(?\<rows\_sent\>[\\d]\*)\\s+Rows\_examined:\\s+(?\<rows\_examined\>[\\d]\*)" nodrop // Pttrn2-vrtn4<br />\| num(query\_time) as query\_time<br />\| where query\_time \>= {{slow\_query\_latency}}<br />\| fields -query\_block<br />\| count as frequency by user \| sort by frequency|
|MySQL - OpenTelemetry/Logs|Top Warnings|Logs|Installed Apps/MySQL - OpenTelemetry/Logs/MySQL - Error Logs|sumo.datasource=mysql deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} "[Warning]"<br />\| json "log" nodrop \| if (\_raw matches "{\*", log, \_raw) as mesg<br />\| parse regex field=mesg "\\[(?\<ErrorLogtype\>[^\\]]\*)][\\:]\*\\s(?\<ErrorMsg\>.\*)"<br />\| where ErrorLogtype="Warning" <br />\| parse field=ErrorMsg "[\*] [\*] \*" as err\_code, subsystem, ErrorMessage nodrop<br />\| if (!isEmpty(ErrorMessage), ErrorMessage, ErrorMsg) as warning\_message<br />\| count as frequency by warning\_message, db.cluster.name, err\_code, subsystem<br />\| sort by frequency, warning\_message asc<br />\| limit 30|
|MySQL - OpenTelemetry/Metrics|Total Index IO Waits|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.index.io.wait.count operation=fetch db.name={{db.name}} db.sql.table={{db.sql.table}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Total Index IO Waits (milliseconds)|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.index.io.wait.time operation=fetch  db.name={{db.name}} db.sql.table={{db.sql.table}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum \| eval \_value / 1000000|
|MySQL - OpenTelemetry/Metrics|Total Queries Executed|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|sumo.datasource=mysql metric=mysql.query.slow.count deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Total Queries Executed|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|sumo.datasource=mysql metric=mysql.query.count deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Total Queries Executed By Client|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance and Resource Metrics|sumo.datasource=mysql metric=mysql.query.client.count deployment.environment={{deployment.environment}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Total Table IO Waits|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.table.io.wait.count operation=fetch  db.name={{db.name}} db.sql.table={{db.sql.table}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Total Table IO Waits|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Table Performance Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.table.io.wait.count operation=fetch  db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} db.name={{db.name}} db.sql.table={{db.sql.table}} \| sum by db.cluster.name,db.node.name,operation,db.name,db.sql.table|
|MySQL - OpenTelemetry/Metrics|Total Table IO Waits (milliseconds)|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.table.io.wait.time operation=fetch db.name={{db.name}} db.sql.table={{db.sql.table}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum\| eval \_value / 1000000|
|MySQL - OpenTelemetry/Metrics|Total Table IO Waits (milliseconds)|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Table Performance Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.table.io.wait.time operation=fetch db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} db.name={{db.name}} db.sql.table={{db.sql.table}} \| quantize using sum \| avg by metric, db.cluster.name, db.node.name,  db.name, db.sql.table \| eval \_value / 1000000|
|MySQL - OpenTelemetry/Metrics|Total Table Lock Read Waits|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Table Performance Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.table.lock\_wait.read.count kind=normal  db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} db.name={{db.name}} db.sql.table={{db.sql.table}}\| sum by db.cluster.name, db.node.name,  db.name, db.sql.table|
|MySQL - OpenTelemetry/Metrics|Total Table Lock Read Waits|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.table.lock\_wait.read.count kind=normal  db.name={{db.name}} db.sql.table={{db.sql.table}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Total Table Lock Read Waits (milliseconds)|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Table Performance Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.table.lock\_wait.read.time kind=normal   db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} db.name={{db.name}} db.sql.table={{db.sql.table}} \| quantize using sum\| avg by metric, db.cluster.name, db.node.name,  db.name, db.sql.table \| eval \_value / 1000000|
|MySQL - OpenTelemetry/Metrics|Total Table Lock Read Waits (milliseconds)|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.table.lock\_wait.read.time kind=normal db.name={{db.name}} db.sql.table={{db.sql.table}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum \| eval \_value / 1000000|
|MySQL - OpenTelemetry/Metrics|Total Table Lock Write Waits|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Table Performance Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.table.lock\_wait.write.count kind=normal  db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} db.name={{db.name}} db.sql.table={{db.sql.table}}\| sum by db.cluster.name, db.node.name,  db.name, db.sql.table|
|MySQL - OpenTelemetry/Metrics|Total Table Lock Write Waits|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.table.lock\_wait.write.count kind=normal  db.name={{db.name}} db.sql.table={{db.sql.table}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum|
|MySQL - OpenTelemetry/Metrics|Total Table Lock Write Waits (milliseconds)|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Table Performance Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.table.lock\_wait.write.time kind=normal db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} db.name={{db.name}} db.sql.table={{db.sql.table}} \| quantize using sum\| avg by metric, db.cluster.name, db.node.name,  db.name, db.sql.table \| eval \_value / 1000000|
|MySQL - OpenTelemetry/Metrics|Total Table Lock Write Waits (milliseconds)|Metrics|Installed Apps/MySQL - OpenTelemetry/Metrics/MySQL - Performance Schema Metrics|sumo.datasource=mysql deployment.environment={{deployment.environment}} metric=mysql.table.lock\_wait.write.time kind=normal  db.name={{db.name}} db.sql.table={{db.sql.table}} db.cluster.name={{db.cluster.name}} db.node.name={{db.node.name}} \| sum \| eval \_value / 1000000|

