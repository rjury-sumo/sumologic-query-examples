# Elasticsearch
## Sumo Logic App For: Elasticsearch
The Elasticsearch app is a unified logs and metrics app that helps you monitor the availability, performance, health and resource utilization of your Elasticsearch clusters. Preconfigured dashboards provide insight into cluster health, resource utilization, sharding, garbage collection, and search, index and cache performance.
Docs Link: [Elasticsearch](https://help.sumologic.com/?cid=210729)

## Searches

### Log Searches

- **Avg Young Pause Time**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Garbage Collection 
- **Cluster Health Change Status**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Operations 
- **Creating Index Over Time**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Operations 
- **Daily Summary - Index Creation**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Operations 
- **Daily Summary - Index Deletion**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Operations 
- **Deleting Index Over Time**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Operations 
- **Error Logs by Component**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **Error Logs By Component**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Errors And Warnings 
- **Error Mapping Index**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Errors And Warnings 
- **Error Summary - Daily**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Errors And Warnings 
- **Errors**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Errors And Warnings 
- **Exceptions**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Errors And Warnings 
- **Failed Login Attempt Summary**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Login And Connections 
- **Failed Logins by User**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Login And Connections 
- **Failed Password**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Login And Connections 
- **Fatal Error Logs By Component**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Errors And Warnings 
- **Fatal Error Summary - Daily**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Errors And Warnings 
- **Fatal Errors**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Errors And Warnings 
- **GC - Real Time**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Garbage Collection 
- **GC - Sys Time**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Garbage Collection 
- **GC - User Time**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Garbage Collection 
- **GC Pause Event**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Garbage Collection 
- **GC Pause Event Min / Max**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Garbage Collection 
- **GC Performance - Percentage Heap Used**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Garbage Collection 
- **Heap**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Garbage Collection 
- **JVM Memory Size - Allocated vs Peak (GB)**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Garbage Collection 
- **Log Reduce**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Errors And Warnings 
- **Login Failed**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Login And Connections 
- **Login Failed By Host**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Login And Connections 
- **Logs by Components**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **Logs by Level**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **Moving Index Over Time**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Operations 
- **Node Down**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Operations 
- **Node Start**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Operations 
- **Query Hits Over Time**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Queries 
- **Query Shards Over Time**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Queries 
- **Rejected Execution Exceptions**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Errors And Warnings 
- **Search by Type**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Queries 
- **Shards Failed**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Errors And Warnings 
- **Slow  Queries Over Time**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **Slow Queries**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Queries 
- **Slow Queries - Daily**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Queries 
- **Slow Queries Over Time by Type**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Queries 
- **Slow Query Total**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **Slowest Running Queries by Type**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Queries 
- **Top 10 Host by  GC Time**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Garbage Collection 
- **Total GC Operation Time**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Garbage Collection 
- **Total GC Operations**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Garbage Collection 
- **Total GC Time**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Garbage Collection 
- **Total Pause Time**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Garbage Collection 
- **Total Time GC Causes (Seconds)**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Garbage Collection 
- **Total Young Pause Time**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Garbage Collection 
- **Unexpected Error Indexing**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Operations 
- **Update Mapping Over Time**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Operations 
- **Updating Replicas Over Time**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Operations 
- **Warning Logs By Component**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Errors And Warnings 
- **Warning Logs by Component**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **Warning Summary - Daily**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Errors And Warnings 
- **Warning Usage Disk**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Operations 
- **Warnings**: from Dashboard: Elasticsearch/Logs/Elasticsearch - Errors And Warnings

### Metric Searches

- **Active Primary Shards**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **Active Shards**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **Average Index Latency (ms)**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **Average Queries and Fetch Rate**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **Average Query and Fetch Latency (ms)**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **Avg Segment Size  - All Shards**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Indices 
- **Avg Segment Size  - Primary Shards**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Indices 
- **Cluster Health**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **CPU Load Average**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Resource 
- **CPU Usage**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **CPU Usage Percentage**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Resource 
- **Data Nodes**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **Delayed Shards**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **Disk Usage By Host (MB)**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Resource 
- **Disk Utilization % By Host**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Resource 
- **Disk Utilization % by host**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **Doc Value Size - All Shards**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Indices 
- **Doc Value Size - Primary Shards**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Indices 
- **Documents**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Indices 
- **Documents Deleted Rate**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Documents 
- **Documents Indexed**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Documents 
- **Documents Indexed Rate**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **Documents Merged**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Documents 
- **Documents Merged (MB)**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Documents 
- **Field Data Evictions**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Caches 
- **Field Data Memory Size (MB)**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Caches 
- **Field Data Size -  Primary Shards**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Indices 
- **Field Data Size - All Shards**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Indices 
- **Filter Cache - Evictions per Sec**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Caches 
- **Fixed Bit Size (MB) - All Shards**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Indices 
- **Fixed Bitsets Size - Primary Shards**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Indices 
- **Flush vs Merges Rate**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Total Operations Stats 
- **Flush vs Merges time**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Total Operations Stats 
- **GC Time**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **Get Exists vs Missing rate**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Total Operations Stats 
- **Get Exists vs Missing Time**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Total Operations Stats 
- **Get vs Indexing Delete Rate**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Total Operations Stats 
- **Get vs Indexing Delete Time**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Total Operations Stats 
- **Index Operations**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Indices 
- **Index Writer Size (MB)  - All Shards**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Indices 
- **Index Writer Size (MB) - Primary Shards**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Indices 
- **Indexing Time**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Performance Stats 
- **Indexing Time**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **Indexing Time**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Indices 
- **Indexing vs Query Rate**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Total Operations Stats 
- **Indexing vs Query Time**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Total Operations Stats 
- **Initializing Shards**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **JVM Memory Committed (MB)**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Resource 
- **JVM Memory Usage Percentage**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Resource 
- **JVM Memory Used**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **JVM Memory Used (MB)**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Resource 
- **Merge  Time**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Performance Stats 
- **Network**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **Network Received Over Time (MB)**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Resource 
- **Network Sent Over Time (MB)**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Resource 
- **Node Document Count**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Documents 
- **Nodes**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **Open File Descriptors**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **Pending Tasks**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **Query Cache - Evictions per Sec**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Caches 
- **Query Cache Size**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **Query Cache Size**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Caches 
- **Refresh and Flush Latency (seconds)**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **Refresh vs Fetch Rate**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Total Operations Stats 
- **Refresh vs Fetch Time**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Total Operations Stats 
- **Relocating Shards**: from Dashboard: Elasticsearch/Elasticsearch - Overview 
- **Search Query Time**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Performance Stats 
- **Segments  Count - All Shards**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Indices 
- **Segments Count -  Primary Shards**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Indices 
- **Size of Stored Index Data (MB)**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Indices 
- **Terms Size (MB) -  All Shards**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Indices 
- **Terms Size (MB) - Primary Shards**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Indices 
- **Thread Pool  - Analyze Threads**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Thread Pool 
- **Thread Pool Operations Completed**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Thread Pool 
- **Thread Pool Operations Queued**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Thread Pool 
- **Thread Pool Operations Rejected**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Thread Pool 
- **Total Translog Operations**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Performance Stats 
- **Total Translog Size (MB)**: from Dashboard: Elasticsearch/Metrics/Elasticsearch - Performance Stats 
- **Unassigned Shards**: from Dashboard: Elasticsearch/Elasticsearch - Overview

## Search Table

|app\_topic|search\_name|type|origin|search|
|:--|:--|:--|:--|:--|
|Elasticsearch|Active Primary Shards|Metrics|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* metric=elasticsearch\_cluster\_health\_active\_primary\_shards db\_cluster={{db\_cluster}} \| sum by metric|
|Elasticsearch|Active Shards|Metrics|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* metric=elasticsearch\_cluster\_health\_active\_shards db\_cluster={{db\_cluster}} \| sum by metric|
|Elasticsearch|Average Index Latency (ms)|Metrics|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_indexing\_index\_time\_in\_millis db\_cluster={{db\_cluster}} \| avg by db\_cluster, host|
|Elasticsearch|Average Queries and Fetch Rate|Metrics|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_search\_query\_total db\_cluster={{db\_cluster}} \| rate  \| avg by db\_cluster |
|Elasticsearch|Average Query and Fetch Latency (ms)|Metrics|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_search\_fetch\_time\_in\_millis db\_cluster={{db\_cluster}} \| avg by db\_cluster|
|Elasticsearch/Metrics|Avg Segment Size  - All Shards|Metrics|Elasticsearch/Metrics/Elasticsearch - Indices|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_segments\_memory\_in\_bytes db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host |
|Elasticsearch/Metrics|Avg Segment Size  - Primary Shards|Metrics|Elasticsearch/Metrics/Elasticsearch - Indices|db\_cluster=\* metric=elasticsearch\_indices\_stats\_primaries\_segments\_memory\_in\_bytes db\_cluster={{db\_cluster}} host={{host}} \| avg by db\_cluster, host|
|Elasticsearch/Logs|Avg Young Pause Time|Logs|Elasticsearch/Logs/Elasticsearch - Garbage Collection|db\_cluster=\* db\_system=elasticsearch db\_cluster=\* \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| parse regex "\\[(?\<date\>[^\\]]+)\\]\\[(?\<process\_id\>[^\\]]+)\\]\\[(?\<module\>[^\\]]+)\\].\*(?\<pause\_young\_1\>\\s\\d+)M-\>(?\<pause\_young\_2\>\\d+)M\\((?\<total\_size\>\\d+)M\\)\\s(?\<time\>\\d+.\\d+)ms"<br />\| count(precess\_id) as Total\_Young\_Pause, sum(time) as Total\_Pause\_Time<br />\| (Total\_Pause\_Time/Total\_Young\_Pause)/(1000\*60) as Avg\_Pause\_Time<br />\| fields Avg\_Pause\_Time|
|Elasticsearch|Cluster Health|Metrics|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* metric=elasticsearch\_cluster\_health\_indices\_status\_code  db\_cluster={{db\_cluster}}  \| min by db\_cluster|
|Elasticsearch/Logs|Cluster Health Change Status|Logs|Elasticsearch/Logs/Elasticsearch - Operations|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} "Cluster health status changed" \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "INFO" and message matches "\*Cluster health status changed\*"<br />\| parse regex field=message "Cluster health status changed from \\[(?\<last\_status\>[\\S]+)\\] to \\[(?\<curent\_status\>[\\S]+)\\]"<br />\| if (isEmpty(pod),\_sourceHost,pod) as host<br />\| count as count by \_timeslice,last\_status,curent\_status<br />\| fields - count|
|Elasticsearch/Metrics|CPU Load Average|Metrics|Elasticsearch/Metrics/Elasticsearch - Resource|db\_cluster=\* metric=elasticsearch\_os\_cpu\_load\_average\_5m db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host|
|Elasticsearch|CPU Usage|Metrics|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* metric=elasticsearch\_os\_cpu\_percent  db\_cluster={{db\_cluster}} \| sum by db\_cluster, host  \| eval \_value/100|
|Elasticsearch/Metrics|CPU Usage Percentage|Metrics|Elasticsearch/Metrics/Elasticsearch - Resource|db\_cluster=\* metric=elasticsearch\_os\_cpu\_percent  db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster,host  \| eval \_value/100|
|Elasticsearch/Logs|Creating Index Over Time|Logs|Elasticsearch/Logs/Elasticsearch - Operations|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "INFO" and message matches "\*creating index\*"<br />\| timeslice 15m<br />\| count as count by \_timeslice|
|Elasticsearch/Logs|Daily Summary - Index Creation|Logs|Elasticsearch/Logs/Elasticsearch - Operations|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} "creating index" \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "INFO" and message matches "\*creating index\*"<br />\| if (isEmpty(pod),\_sourceHost,pod) as host<br />\| parse field=message "[\*] creating index, cause [\*], templates [\*], \*" as index,cause,templates,nextime<br />\| count by timestamp, host, index,cause,templates<br />\| fields - \_count|
|Elasticsearch/Logs|Daily Summary - Index Deletion|Logs|Elasticsearch/Logs/Elasticsearch - Operations|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} "deleting index" \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "INFO" and message matches "\*deleting index\*"<br />\| if (isEmpty(pod),\_sourceHost,pod) as host<br />\| parse regex field=message "\\[(?\<index\>[\\S]+)\\] deleting index"<br />\| count by timestamp, host, index<br />\| fields - \_count|
|Elasticsearch|Data Nodes|Metrics|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* metric=elasticsearch\_cluster\_health\_number\_of\_data\_nodes db\_cluster={{db\_cluster}} \| sum by metric|
|Elasticsearch|Delayed Shards|Metrics|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* metric=elasticsearch\_cluster\_health\_delayed\_unassigned\_shards db\_cluster={{db\_cluster}} \| sum by metric|
|Elasticsearch/Logs|Deleting Index Over Time|Logs|Elasticsearch/Logs/Elasticsearch - Operations|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "INFO" and message matches "\*deleting index\*"<br />\| timeslice 15m<br />\| count as count by \_timeslice|
|Elasticsearch/Metrics|Disk Usage By Host (MB)|Metrics|Elasticsearch/Metrics/Elasticsearch - Resource|db\_cluster=\* metric=elasticsearch\_fs\_total\_free\_in\_bytes  db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host|
|Elasticsearch|Disk Utilization % by host|Metrics|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* metric=elasticsearch\_fs\_total\_free\_in\_bytes  db\_cluster={{db\_cluster}}  \| sum by db\_cluster, host|
|Elasticsearch/Metrics|Disk Utilization % By Host|Metrics|Elasticsearch/Metrics/Elasticsearch - Resource|db\_cluster=\* metric=elasticsearch\_fs\_total\_free\_in\_bytes  db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host|
|Elasticsearch/Metrics|Doc Value Size - All Shards|Metrics|Elasticsearch/Metrics/Elasticsearch - Indices|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_segments\_doc\_values\_memory\_in\_bytes db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host |
|Elasticsearch/Metrics|Doc Value Size - Primary Shards|Metrics|Elasticsearch/Metrics/Elasticsearch - Indices|db\_cluster=\* metric=elasticsearch\_indices\_stats\_primaries\_segments\_doc\_values\_memory\_in\_bytes  db\_cluster={{db\_cluster}} host={{host}}  \| sum by db\_cluster, host |
|Elasticsearch/Metrics|Documents|Metrics|Elasticsearch/Metrics/Elasticsearch - Indices|db\_cluster=\* metric=elasticsearch\_indices\_stats\_primaries\_docs\_count db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host |
|Elasticsearch/Metrics|Documents Deleted Rate|Metrics|Elasticsearch/Metrics/Elasticsearch - Documents|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_indexing\_delete\_total db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host |
|Elasticsearch/Metrics|Documents Indexed|Metrics|Elasticsearch/Metrics/Elasticsearch - Documents|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_indexing\_index\_total db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host |
|Elasticsearch|Documents Indexed Rate|Metrics|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* metric=elasticsearch\_indices\_indexing\_index\_total db\_cluster={{db\_cluster}} \|  rate increasing|
|Elasticsearch/Metrics|Documents Merged|Metrics|Elasticsearch/Metrics/Elasticsearch - Documents|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_merges\_total\_docs db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host |
|Elasticsearch/Metrics|Documents Merged (MB)|Metrics|Elasticsearch/Metrics/Elasticsearch - Documents|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_merges\_total\_size\_in\_bytes db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host \| eval \_value/1024/1024|
|Elasticsearch/Logs|Error Logs By Component|Logs|Elasticsearch/Logs/Elasticsearch - Errors And Warnings|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "ERROR" <br />\| count by component|
|Elasticsearch|Error Logs by Component|Logs|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "ERROR" or level = "FATAL"<br />\| count by component|
|Elasticsearch/Logs|Error Mapping Index|Logs|Elasticsearch/Logs/Elasticsearch - Errors And Warnings|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} ERROR \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "ERROR" and message matches "\*Failed to gather field mappings for index\*"<br />\| count|
|Elasticsearch/Logs|Error Summary - Daily|Logs|Elasticsearch/Logs/Elasticsearch - Errors And Warnings|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} ERROR \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "ERROR"<br />\| count by timestamp, level, component, message<br />\| fields - \_count|
|Elasticsearch/Logs|Errors|Logs|Elasticsearch/Logs/Elasticsearch - Errors And Warnings|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} ERROR \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "ERROR"<br />\| count|
|Elasticsearch/Logs|Exceptions|Logs|Elasticsearch/Logs/Elasticsearch - Errors And Warnings|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} ERROR \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "ERROR" and message matches "\*node validation exception\*"<br />\| if (isEmpty(pod),\_sourceHost,pod) as host<br />\| count by timestamp,host,level,component,message<br />\| fields - \_count|
|Elasticsearch/Logs|Failed Login Attempt Summary|Logs|Elasticsearch/Logs/Elasticsearch - Login And Connections|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} "failed to authenticate user" \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "INFO" and message matches "\*failed to authenticate user\*"<br />\| parse regex field=message "failed to authenticate user \\[(?\<user\>[\\S]+)\\]"<br />\| if (isEmpty(pod),\_sourceHost,pod) as host<br />\| count by timestamp, host, user, message<br />\| fields - \_count|
|Elasticsearch/Logs|Failed Logins by User|Logs|Elasticsearch/Logs/Elasticsearch - Login And Connections|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} "failed to authenticate user" \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "INFO" and message matches "\*failed to authenticate user\*"<br />\| parse regex field=message "failed to authenticate user \\[(?\<user\>[\\S]+)\\]"<br />\| if (isEmpty(pod),\_sourceHost,pod) as host<br />\| count by host,user<br />\| order by \_count|
|Elasticsearch/Logs|Failed Password|Logs|Elasticsearch/Logs/Elasticsearch - Login And Connections|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} "failed to retrieve password hash for reserved user" \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "ERROR" and message matches "\*failed to retrieve password hash for reserved user\*"<br />\| parse regex field=message "failed to retrieve password hash for reserved user \\[(?\<user\>[\\S]+)\\]"<br />\| if (isEmpty(pod),\_sourceHost,pod) as host<br />\| count by timestamp, host, user, message<br />\| fields - \_count|
|Elasticsearch/Logs|Fatal Error Logs By Component|Logs|Elasticsearch/Logs/Elasticsearch - Errors And Warnings|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} FATAL \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "FATAL"<br />\| count by component|
|Elasticsearch/Logs|Fatal Error Summary - Daily|Logs|Elasticsearch/Logs/Elasticsearch - Errors And Warnings|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} FATAL \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "FATAL"<br />\| count by timestamp, level, component, message<br />\| fields - \_count|
|Elasticsearch/Logs|Fatal Errors|Logs|Elasticsearch/Logs/Elasticsearch - Errors And Warnings|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} FATAL \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "FATAL"<br />\| count|
|Elasticsearch/Metrics|Field Data Evictions|Metrics|Elasticsearch/Metrics/Elasticsearch - Caches|db\_cluster=\* metric=elasticsearch\_clusterstats\_indices\_fielddata\_evictions db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host \|  eval \_value/100|
|Elasticsearch/Metrics|Field Data Memory Size (MB)|Metrics|Elasticsearch/Metrics/Elasticsearch - Caches|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_\_\_fielddata\_memory\_size\_in\_bytes db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host |
|Elasticsearch/Metrics|Field Data Size -  Primary Shards|Metrics|Elasticsearch/Metrics/Elasticsearch - Indices|db\_cluster=\* metric=elasticsearch\_indices\_stats\_primaries\_fielddata\_memory\_size\_in\_bytes db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host |
|Elasticsearch/Metrics|Field Data Size - All Shards|Metrics|Elasticsearch/Metrics/Elasticsearch - Indices|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_fielddata\_memory\_size\_in\_bytes db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host |
|Elasticsearch/Metrics|Filter Cache - Evictions per Sec|Metrics|Elasticsearch/Metrics/Elasticsearch - Caches|db\_cluster=\* metric=elasticsearch\_indices\_stats\_primaries\_query\_cache\_evictions db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster,host \| rate|
|Elasticsearch/Metrics|Fixed Bit Size (MB) - All Shards|Metrics|Elasticsearch/Metrics/Elasticsearch - Indices|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_segments\_fixed\_bit\_set\_memory\_in\_bytes db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host \| eval \_value/1024/1024|
|Elasticsearch/Metrics|Fixed Bitsets Size - Primary Shards|Metrics|Elasticsearch/Metrics/Elasticsearch - Indices|db\_cluster=\* metric=elasticsearch\_indices\_segments\_fixed\_bit\_set\_memory\_in\_bytes db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host |
|Elasticsearch/Metrics|Flush vs Merges Rate|Metrics|Elasticsearch/Metrics/Elasticsearch - Total Operations Stats|db\_cluster=\* metric=elasticsearch\_indices\_flush\_total db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster,host \| rate|
|Elasticsearch/Metrics|Flush vs Merges time|Metrics|Elasticsearch/Metrics/Elasticsearch - Total Operations Stats|db\_cluster=\* metric=elasticsearch\_indices\_flush\_total\_time\_in\_millis db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster,host |
|Elasticsearch/Logs|GC - Real Time|Logs|Elasticsearch/Logs/Elasticsearch - Garbage Collection|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| parse regex "\\[(?\<date\>[^\\]]+)\\]\\[(?\<process\_id\>[^\\]]+)\\]\\[(?\<module\>[^\\]]+)\\]\\s+GC\\(.\*\\)\\s\*User=(?\<user\_time\>\\d+.\\d+)s\\s+Sys=(?\<sys\_time\>\\d+\\.\\d+)s\\s+Real=(?\<real\_time\>\\d+.\\d+)"<br />\| avg(user\_time) as Avg\_User\_Time, avg(sys\_time) as Avg\_Sys\_Time, avg(real\_time) as  Avg\_Real\_Time<br />\| fields Avg\_Real\_Time|
|Elasticsearch/Logs|GC - Sys Time|Logs|Elasticsearch/Logs/Elasticsearch - Garbage Collection|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| parse regex "\\[(?\<date\>[^\\]]+)\\]\\[(?\<process\_id\>[^\\]]+)\\]\\[(?\<module\>[^\\]]+)\\]\\s+GC\\(.\*\\)\\s\*User=(?\<user\_time\>\\d+.\\d+)s\\s+Sys=(?\<sys\_time\>\\d+\\.\\d+)s\\s+Real=(?\<real\_time\>\\d+.\\d+)"<br />\| avg(user\_time) as Avg\_User\_Time, avg(sys\_time) as Avg\_Sys\_Time, avg(real\_time) as  Avg\_Real\_Time<br />\| fields Avg\_Sys\_Time|
|Elasticsearch/Logs|GC - User Time|Logs|Elasticsearch/Logs/Elasticsearch - Garbage Collection|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| parse regex "\\[(?\<date\>[^\\]]+)\\]\\[(?\<process\_id\>[^\\]]+)\\]\\[(?\<module\>[^\\]]+)\\]\\s+GC\\(.\*\\)\\s\*User=(?\<user\_time\>\\d+.\\d+)s\\s+Sys=(?\<sys\_time\>\\d+\\.\\d+)s\\s+Real=(?\<real\_time\>\\d+.\\d+)"<br />\| avg(user\_time) as Avg\_User\_Time, avg(sys\_time) as Avg\_Sys\_Time, avg(real\_time) as  Avg\_Real\_Time<br />\| fields Avg\_User\_Time|
|Elasticsearch/Logs|GC Pause Event|Logs|Elasticsearch/Logs/Elasticsearch - Garbage Collection|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} "Pre Evacuate Collection Set" or "Merge Heap Roots" or "Evacuate Collection Set" or "Post Evacuate Collection Set" or "Other" \| json "log" as rawlog nodrop<br />\| if (isEmpty(\_rawlog), raw, rawlog) as raw <br />\| parse regex "\\[(?\<date\>[^\\]]+)\\]\\[(?\<process\_id\>[^\\]]+)\\]\\[(?\<module\>[^\\]]+)\\]\\s+GC\\(.\*\\)(?\<Time\_Name\>.\*):\\s+(?\<pre\_collect\_set\>\\d+\\.\\d+)ms"<br />\| timeslice by 1h <br />\| if (isEmpty(pod),\_sourceHost,pod) as host<br />\| count(process\_id) as Total\_Process\_Id group by Time\_Name|
|Elasticsearch/Logs|GC Pause Event Min / Max|Logs|Elasticsearch/Logs/Elasticsearch - Garbage Collection|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} "Pre Evacuate Collection Set" or "Merge Heap Roots" or "Evacuate Collection Set" or "Post Evacuate Collection Set" or "Other" \| json "log" as rawlog nodrop <br />\| if (isEmpty(\_rawlog), raw, rawlog) as raw <br />\| parse regex "\\[(?\<date\>[^\\]]+)\\]\\[(?\<process\_id\>[^\\]]+)\\]\\[(?\<module\>[^\\]]+)\\]\\s+GC\\(.\*\\)(?\<time\_name\>.\*):\\s+(?\<pre\_collect\_set\>\\d+\\.\\d+)ms"<br />\| timeslice by 1h <br />\| if (isEmpty(pod),\_sourceHost,pod) as host<br />\| max(pre\_collect\_set) as Max\_Time group by time\_name|
|Elasticsearch/Logs|GC Performance - Percentage Heap Used|Logs|Elasticsearch/Logs/Elasticsearch - Garbage Collection|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as mesg<br />\| parse regex "\\[(?\<date\>[^\\]]+)\\]\\[(?\<process\_id\>[^\\]]+)\\]\\[(?\<module\>[^\\]]+)\\].\*(?\<Usage\_Heap\>\\s\\d+)M-\>(?\<Feed\_memory\>\\d+)M\\((?\<total\_heap\>\\d+)M\\)\\s(?\<Total\_Time\>\\d+.\\d+)ms"<br />\| number(Usage\_Heap) as usage\_heap1<br />\| number(total\_heap) as total\_heap1<br />\| (usage\_heap1/total\_heap1)\*100 as Percent\_Heap<br />\| timeslice 1s<br />\| count by \_timeslice, Percent\_Heap<br />\| transpose row \_timeslice column Percent\_Heap|
|Elasticsearch|GC Time|Metrics|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* metric=elasticsearch\_jvm\_gc\_collectors\_\*\_collection\_time\_in\_millis db\_cluster={{db\_cluster}}   \| sum by db\_cluster, host|
|Elasticsearch/Metrics|Get Exists vs Missing rate|Metrics|Elasticsearch/Metrics/Elasticsearch - Total Operations Stats|db\_cluster=\* metric=elasticsearch\_indices\_get\_exists\_total db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster,host \| rate|
|Elasticsearch/Metrics|Get Exists vs Missing Time|Metrics|Elasticsearch/Metrics/Elasticsearch - Total Operations Stats|db\_cluster=\* metric=elasticsearch\_indices\_get\_exists\_time\_in\_millis db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster,host|
|Elasticsearch/Metrics|Get vs Indexing Delete Rate|Metrics|Elasticsearch/Metrics/Elasticsearch - Total Operations Stats|db\_cluster=\* metric=elasticsearch\_indices\_get\_total db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster,host \| rate|
|Elasticsearch/Metrics|Get vs Indexing Delete Time|Metrics|Elasticsearch/Metrics/Elasticsearch - Total Operations Stats|db\_cluster=\* metric=elasticsearch\_indices\_get\_time\_in\_millis db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster,host |
|Elasticsearch/Logs|Heap|Logs|Elasticsearch/Logs/Elasticsearch - Garbage Collection|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as mesg<br />\| parse regex field=mesg "\\[(?\<date\>[^\\]]+)\\]\\[(?\<process\_id\>[^\\]]+)\\]\\[(?\<module\>[^\\]]+)\\].\*(?\<HeapBfrGC\>\\d+)M-\>(?\<HeapAftrGC\>\\d+)M\\((?\<HeapSize\>\\d+)M\\)\\s+(?\<GCOperationTime\>[\\d.]+)ms"<br />\| timeslice 15m<br />\| avg(HeapBfrGC) as BeforeGC, avg(HeapAftrGC) as AfterGC by \_timeslice|
|Elasticsearch/Metrics|Index Operations|Metrics|Elasticsearch/Metrics/Elasticsearch - Indices|db\_cluster=\* metric=elasticsearch\_indices\_indexing\_index\_total db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host|
|Elasticsearch/Metrics|Index Writer Size (MB)  - All Shards|Metrics|Elasticsearch/Metrics/Elasticsearch - Indices|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_segments\_index\_writer\_memory\_in\_bytes db\_cluster={{db\_cluster}} host={{host}}  \| sum by db\_cluster, host \| eval \_value/1024/1024|
|Elasticsearch/Metrics|Index Writer Size (MB) - Primary Shards|Metrics|Elasticsearch/Metrics/Elasticsearch - Indices|db\_cluster=\* metric=elasticsearch\_indices\_stats\_primaries\_segments\_index\_writer\_memory\_in\_bytes db\_cluster={{db\_cluster}} host={{host}} \| eval \_value/1024/1024|
|Elasticsearch/Metrics|Indexing Time|Metrics|Elasticsearch/Metrics/Elasticsearch - Indices|db\_cluster=\* metric=elasticsearch\_indices\_stats\_primaries\_indexing\_index\_time\_in\_millis db\_cluster={{db\_cluster}} host={{host}} \| avg by db\_cluster, host |
|Elasticsearch/Metrics|Indexing Time|Metrics|Elasticsearch/Metrics/Elasticsearch - Performance Stats|db\_cluster=\* metric=elasticsearch\_indices\_stats\_primaries\_indexing\_index\_time\_in\_millis db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host|
|Elasticsearch|Indexing Time|Metrics|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* metric=elasticsearch\_indices\_stats\_primaries\_indexing\_index\_time\_in\_millis  db\_cluster={{db\_cluster}} \| sum by db\_cluster|
|Elasticsearch/Metrics|Indexing vs Query Rate|Metrics|Elasticsearch/Metrics/Elasticsearch - Total Operations Stats|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_\_\_indexing\_index\_total db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster,host \| rate|
|Elasticsearch/Metrics|Indexing vs Query Time|Metrics|Elasticsearch/Metrics/Elasticsearch - Total Operations Stats|db\_cluster=\* metric=elasticsearch\_indices\_indexing\_index\_time\_in\_millis db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster,host |
|Elasticsearch|Initializing Shards|Metrics|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* metric=elasticsearch\_cluster\_health\_initializing\_shards db\_cluster={{db\_cluster}} \| sum by metric|
|Elasticsearch/Metrics|JVM Memory Committed (MB)|Metrics|Elasticsearch/Metrics/Elasticsearch - Resource|db\_cluster=\* metric=elasticsearch\_jvm\_mem\_heap\_committed\_in\_bytes db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host \| eval \_value/1024/1024|
|Elasticsearch/Logs|JVM Memory Size - Allocated vs Peak (GB)|Logs|Elasticsearch/Logs/Elasticsearch - Garbage Collection|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as mesg<br />\| parse regex field=mesg "\\[(?\<date\>[^\\]]+)\\]\\[(?\<process\_id\>[^\\]]+)\\]\\[(?\<module\>[^\\]]+)\\].\*(?\<HeapBfrGC\>\\d+)M-\>(?\<HeapAftrGC\>\\d+)M\\((?\<HeapSize\>\\d+)M\\)\\s+(?\<GCOperationTime\>[\\d.]+)ms"<br />\| number(HeapSize) <br />\| number(HeapBfrGC) <br />\| max(HeapSize) as Allocated, max(HeapBfrGC) as Peak|
|Elasticsearch/Metrics|JVM Memory Usage Percentage|Metrics|Elasticsearch/Metrics/Elasticsearch - Resource|db\_cluster=\* metric=elasticsearch\_jvm\_mem\_heap\_used\_percent db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster,host \| eval \_value/1024/1024|
|Elasticsearch|JVM Memory Used|Metrics|Elasticsearch/Elasticsearch - Overview|db\_cluster=\*  metric=elasticsearch\_clusterstats\_nodes\_jvm\_mem\_heap\_used\_in\_bytes db\_cluster={{db\_cluster}} \| sum by db\_cluster, host|
|Elasticsearch/Metrics|JVM Memory Used (MB)|Metrics|Elasticsearch/Metrics/Elasticsearch - Resource|db\_cluster=\* metric=elasticsearch\_jvm\_mem\_heap\_used\_in\_bytes  db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster,host |
|Elasticsearch/Logs|Log Reduce|Logs|Elasticsearch/Logs/Elasticsearch - Errors And Warnings|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} (ERROR or FATAL or WARN) \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "ERROR" or level = "FATAL" or level = "WARN"<br />\| logreduce field=message by db\_cluster<br />\| \_count as count<br />\| fields -\_count|
|Elasticsearch/Logs|Login Failed|Logs|Elasticsearch/Logs/Elasticsearch - Login And Connections|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} "failed to authenticate user" \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where  message matches "\*failed to authenticate user\*"<br />\| count|
|Elasticsearch/Logs|Login Failed By Host|Logs|Elasticsearch/Logs/Elasticsearch - Login And Connections|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} "failed to authenticate user" \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where message matches "\*failed to authenticate user\*"<br />\| if (isEmpty(pod),\_sourceHost,pod) as host<br />\| timeslice 1h<br />\| count by \_timeslice, host<br />\| transpose row \_timeslice column host|
|Elasticsearch|Logs by Components|Logs|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| timeslice 1h<br />\| count by component, \_timeslice<br />\| transpose row \_timeslice column component|
|Elasticsearch|Logs by Level|Logs|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| timeslice 1h<br />\| count by level, \_timeslice<br />\| transpose row \_timeslice column level|
|Elasticsearch/Metrics|Merge  Time|Metrics|Elasticsearch/Metrics/Elasticsearch - Performance Stats|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_merges\_total\_time\_in\_millis db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host |
|Elasticsearch/Logs|Moving Index Over Time|Logs|Elasticsearch/Logs/Elasticsearch - Operations|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "INFO" and message matches "\*moving index\*"<br />\| timeslice 15m<br />\| count as count by \_timeslice|
|Elasticsearch|Network|Metrics|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* metric=elasticsearch\_transport\_tx\_size\_in\_bytes db\_cluster={{db\_cluster}} \| sum by db\_cluster,host|
|Elasticsearch/Metrics|Network Received Over Time (MB)|Metrics|Elasticsearch/Metrics/Elasticsearch - Resource|db\_cluster=\* metric=elasticsearch\_transport\_tx\_size\_in\_bytes db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host |
|Elasticsearch/Metrics|Network Sent Over Time (MB)|Metrics|Elasticsearch/Metrics/Elasticsearch - Resource|db\_cluster=\* metric=elasticsearch\_transport\_rx\_size\_in\_bytes db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host |
|Elasticsearch/Metrics|Node Document Count|Metrics|Elasticsearch/Metrics/Elasticsearch - Documents|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_docs\_count db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host|
|Elasticsearch/Logs|Node Down|Logs|Elasticsearch/Logs/Elasticsearch - Operations|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "INFO" and message matches "\*stopping watch service, reason [shutdown initiated]\*"<br />\| if (isEmpty(pod),\_sourceHost,pod) as host<br />\| timeslice 15m<br />\| count by \_timeslice, host<br />\| transpose row \_timeslice column host|
|Elasticsearch/Logs|Node Start|Logs|Elasticsearch/Logs/Elasticsearch - Operations|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "INFO" and message matches "\*shards started\*"<br />\| if (isEmpty(pod),\_sourceHost,pod) as host<br />\| timeslice 15m<br />\| count by \_timeslice, host<br />\| transpose row \_timeslice column host|
|Elasticsearch|Nodes|Metrics|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* metric=elasticsearch\_cluster\_health\_number\_of\_nodes db\_cluster={{db\_cluster}} \| sum by metric|
|Elasticsearch|Open File Descriptors|Metrics|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* metric=elasticsearch\_process\_open\_file\_descriptors  db\_cluster={{db\_cluster}} \| sum by metric|
|Elasticsearch|Pending Tasks|Metrics|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* metric=elasticsearch\_cluster\_health\_number\_of\_pending\_tasks  db\_cluster={{db\_cluster}} \| sum by metric|
|Elasticsearch/Metrics|Query Cache - Evictions per Sec|Metrics|Elasticsearch/Metrics/Elasticsearch - Caches|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_query\_cache\_evictions db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster,host \| rate|
|Elasticsearch|Query Cache Size|Metrics|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* metric=elasticsearch\_indices\_stats\_primaries\_query\_cache\_cache\_size db\_cluster={{db\_cluster}} \| sum by db\_cluster|
|Elasticsearch/Metrics|Query Cache Size|Metrics|Elasticsearch/Metrics/Elasticsearch - Caches|db\_cluster=\* metric=elasticsearch\_indices\_stats\_primaries\_query\_cache\_cache\_size db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster,host|
|Elasticsearch/Logs|Query Hits Over Time|Logs|Elasticsearch/Logs/Elasticsearch - Queries|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} took\_millis \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| parse regex field=message "total\_hits\\[(?\<total\_hits\>[\\d-]+) hits\\], "nodrop<br />\| parse regex field=message "total\_hits\\[(?\<total\_hits\>[\\d-]+)\\+ hits\\], "<br />\| number(total\_hits)<br />\| timeslice 1h<br />\| sum(total\_hits) as total\_hits by \_timeslice|
|Elasticsearch/Logs|Query Shards Over Time|Logs|Elasticsearch/Logs/Elasticsearch - Queries|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} took\_millis \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "WARN" and message matches "\*took\_millis\*"<br />\| parse regex field=message "total\_shards\\[(?\<total\_shards\>[\\d-]+)\\], "<br />\| number(total\_shards)<br />\| timeslice 1h<br />\| sum(total\_shards) as total\_shards by \_timeslice|
|Elasticsearch|Refresh and Flush Latency (seconds)|Metrics|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_refresh\_total\_time\_in\_millis db\_cluster={{db\_cluster}} \| sum by db\_cluster|
|Elasticsearch/Metrics|Refresh vs Fetch Rate|Metrics|Elasticsearch/Metrics/Elasticsearch - Total Operations Stats|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_refresh\_total db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster,host \| rate|
|Elasticsearch/Metrics|Refresh vs Fetch Time|Metrics|Elasticsearch/Metrics/Elasticsearch - Total Operations Stats|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_refresh\_total\_time\_in\_millis db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster,host|
|Elasticsearch/Logs|Rejected Execution Exceptions|Logs|Elasticsearch/Logs/Elasticsearch - Errors And Warnings|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} DEBUG \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "DEBUG" and message matches "\*Failed to execute\*"<br />\| count|
|Elasticsearch|Relocating Shards|Metrics|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* metric=elasticsearch\_cluster\_health\_relocating\_shards db\_cluster={{db\_cluster}} \| sum by metric|
|Elasticsearch/Logs|Search by Type|Logs|Elasticsearch/Logs/Elasticsearch - Queries|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} took\_millis \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "WARN" and message matches "\*took\_millis\*"<br />\| parse regex field=message "search\_type\\[(?\<search\_type\>[\\S]+)\\], "<br />\| count by search\_type|
|Elasticsearch/Metrics|Search Query Time|Metrics|Elasticsearch/Metrics/Elasticsearch - Performance Stats|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_search\_query\_time\_in\_millis db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host|
|Elasticsearch/Metrics|Segments  Count - All Shards|Metrics|Elasticsearch/Metrics/Elasticsearch - Indices|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_segments\_count db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host|
|Elasticsearch/Metrics|Segments Count -  Primary Shards|Metrics|Elasticsearch/Metrics/Elasticsearch - Indices|db\_cluster=\* metric=elasticsearch\_indices\_stats\_primaries\_segments\_count db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host|
|Elasticsearch/Logs|Shards Failed|Logs|Elasticsearch/Logs/Elasticsearch - Errors And Warnings|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} DEBUG \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "DEBUG" and message matches "\*All shards failed for phase\*"<br />\| count by message|
|Elasticsearch/Metrics|Size of Stored Index Data (MB)|Metrics|Elasticsearch/Metrics/Elasticsearch - Indices|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_store\_size\_in\_bytes db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host \| eval \_value/1024/1024|
|Elasticsearch|Slow  Queries Over Time|Logs|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "WARN" and message matches "\*took\_millis\*"<br />\| timeslice 1 h<br />\| count by \_timeslice|
|Elasticsearch/Logs|Slow Queries|Logs|Elasticsearch/Logs/Elasticsearch - Queries|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} took\_millis \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| json field=\_raw "type" as type<br />\| where type = "index\_search\_slowlog"<br />\| where level = "WARN" and message matches "\*took\_millis\*"<br />\| count|
|Elasticsearch/Logs|Slow Queries - Daily|Logs|Elasticsearch/Logs/Elasticsearch - Queries|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} took\_millis \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "WARN" and message matches "\*took\_millis\*"<br />\| parse regex field=message "took\_millis\\[(?\<query\_time\_ms\>[\\d-]+)\\]"<br />\| json field=\_raw "type" as type<br />\| if (isEmpty(pod),\_sourceHost,pod) as host<br />\| count by timestamp,host, type,query\_time\_ms,message<br />\| fields - \_count|
|Elasticsearch/Logs|Slow Queries Over Time by Type|Logs|Elasticsearch/Logs/Elasticsearch - Queries|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} took\_millis index\_search\_slowlog \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "WARN" and message matches "\*took\_millis\*"<br />\| json field=\_raw "type" as type<br />\| where type = "index\_search\_slowlog"<br />\| timeslice 1 h<br />\| count by \_timeslice, type<br />\| transpose row \_timeslice column type|
|Elasticsearch|Slow Query Total|Logs|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "WARN" and message matches "\*took\_millis\*"<br />\| count|
|Elasticsearch/Logs|Slowest Running Queries by Type|Logs|Elasticsearch/Logs/Elasticsearch - Queries|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} took\_millis index\_search\_slowlog \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "WARN" and message matches "\*took\_millis\*"<br />\| parse regex field=message "took\_millis\\[(?\<query\_time\_ms\>[\\d-]+)\\]"<br />\| json field=\_raw "type" as type<br />\| if (isEmpty(pod),\_sourceHost,pod) as host<br />\| count by timestamp,host, type,query\_time\_ms,message<br />\| fields - \_count|
|Elasticsearch/Metrics|Terms Size (MB) -  All Shards|Metrics|Elasticsearch/Metrics/Elasticsearch - Indices|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_segments\_terms\_memory\_in\_bytes db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host |
|Elasticsearch/Metrics|Terms Size (MB) - Primary Shards|Metrics|Elasticsearch/Metrics/Elasticsearch - Indices|db\_cluster=\* metric=elasticsearch\_indices\_segments\_terms\_memory\_in\_bytes db\_cluster={{db\_cluster}} host={{host}} |
|Elasticsearch/Metrics|Thread Pool  - Analyze Threads|Metrics|Elasticsearch/Metrics/Elasticsearch - Thread Pool|db\_cluster=\* metric=elasticsearch\_thread\_pool\_analyze\_threads db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster,host|
|Elasticsearch/Metrics|Thread Pool Operations Completed|Metrics|Elasticsearch/Metrics/Elasticsearch - Thread Pool|db\_cluster=\* metric=elasticsearch\_thread\_pool\_analyze\_completed db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host|
|Elasticsearch/Metrics|Thread Pool Operations Queued|Metrics|Elasticsearch/Metrics/Elasticsearch - Thread Pool|db\_cluster=\* metric=elasticsearch\_thread\_pool\_search\_queue db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster, host|
|Elasticsearch/Metrics|Thread Pool Operations Rejected|Metrics|Elasticsearch/Metrics/Elasticsearch - Thread Pool|db\_cluster=\* metric=elasticsearch\_thread\_pool\_get\_rejected db\_cluster={{db\_cluster}} host={{host}}  \| sum by db\_cluster, host|
|Elasticsearch/Logs|Top 10 Host by  GC Time|Logs|Elasticsearch/Logs/Elasticsearch - Garbage Collection|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as mesg<br />\| parse regex field=mesg "\\[(?\<date\>[^\\]]+)\\]\\[(?\<process\_id\>[^\\]]+)\\]\\[(?\<module\>[^\\]]+)\\].\*(?\<HeapBfrGC\>\\d+)M-\>(?\<HeapAftrGC\>\\d+)M\\((?\<HeapSize\>\\d+)M\\)\\s+(?\<GCOperationTime\>[\\d.]+)ms"<br />\| if (isEmpty(pod),\_sourceHost,pod) as Host<br />\| sum(GCOperationTime) as GCOperationTime by Host<br />\| Top 10 Host by GCOperationTime|
|Elasticsearch/Logs|Total GC Operation Time|Logs|Elasticsearch/Logs/Elasticsearch - Garbage Collection|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as mesg<br />\| parse regex field=mesg "\\[(?\<date\>[^\\]]+)\\]\\[(?\<process\_id\>[^\\]]+)\\]\\[(?\<module\>[^\\]]+)\\].\*(?\<HeapBfrGC\>\\d+)M-\>(?\<HeapAftrGC\>\\d+)M\\((?\<HeapSize\>\\d+)M\\)\\s+(?\<GCOperationTime\>[\\d.]+)ms"<br />\| timeslice 15m<br />\| sum(GCOperationTime) as GCOperationTime by \_timeslice|
|Elasticsearch/Logs|Total GC Operations|Logs|Elasticsearch/Logs/Elasticsearch - Garbage Collection|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as mesg<br />\| parse regex field=mesg "\\[(?\<date\>[^\\]]+)\\]\\[(?\<process\_id\>[^\\]]+)\\]\\[(?\<module\>[^\\]]+)\\].\*\\s+GC\\((?\<gc\_id\>\\d+)\\)\\s+Pause\\s+Young\\s+\\((?\<Cause\>[^\\]]+)\\)\\s+(?\<HeapBfrGC\>\\d+)M-\>(?\<HeapAftrGC\>\\d+)M\\((?\<HeapSize\>\\d+)M\\)\\s+(?\<GCOperationTime\>[\\d.]+)ms" nodrop<br />\| parse regex field=mesg "\\[(?\<date\>[^\\]]+)\\]\\[(?\<process\_id\>[^\\]]+)\\]\\[(?\<module\>[^\\]]+)\\].\*\\s+GC\\((?\<gc\_id\>\\d+)\\)\\s+Pause\\s+Young\\s+\\((?\<Cause\_Status\>[^\\]]+)\\)\\s+\\((?\<Cause\>[^\\]]+)\\)\\s+(?\<HeapBfrGC\>\\d+)M-\>(?\<HeapAftrGC\>\\d+)M\\((?\<HeapSize\>\\d+)M\\)\\s+(?\<GCOperationTime\>[\\d.]+)ms"<br />\| timeslice 15m<br />\| count as count by \_timeslice, Cause<br />\| transpose row \_timeslice column Cause|
|Elasticsearch/Logs|Total GC Time|Logs|Elasticsearch/Logs/Elasticsearch - Garbage Collection|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as mesg<br />\| parse regex field=mesg "\\[(?\<date\>[^\\]]+)\\]\\[(?\<process\_id\>[^\\]]+)\\]\\[(?\<module\>[^\\]]+)\\].\*\\s+GC\\((?\<gc\_id\>\\d+)\\)\\s+Pause\\s+Young\\s+\\((?\<Cause\>[^\\]]+)\\)\\s+(?\<HeapBfrGC\>\\d+)M-\>(?\<HeapAftrGC\>\\d+)M\\((?\<HeapSize\>\\d+)M\\)\\s+(?\<GCOperationTime\>[\\d.]+)ms" nodrop<br />\| parse regex field=mesg "\\[(?\<date\>[^\\]]+)\\]\\[(?\<process\_id\>[^\\]]+)\\]\\[(?\<module\>[^\\]]+)\\].\*\\s+GC\\((?\<gc\_id\>\\d+)\\)\\s+Pause\\s+Young\\s+\\((?\<Cause\_Status\>[^\\]]+)\\)\\s+\\((?\<Cause\>[^\\]]+)\\)\\s+(?\<HeapBfrGC\>\\d+)M-\>(?\<HeapAftrGC\>\\d+)M\\((?\<HeapSize\>\\d+)M\\)\\s+(?\<GCOperationTime\>[\\d.]+)ms"<br />\| number(GCOperationTime)\*0.001 as GCOperationTime<br />\| sum(GCOperationTime) as Total\_Time, avg(GCOperationTime) as Avg\_Time, max(GCOperationTime) as Max\_Time, count as Count by Cause<br />\| fields Total\_Time|
|Elasticsearch/Logs|Total Pause Time|Logs|Elasticsearch/Logs/Elasticsearch - Garbage Collection|db\_cluster=\* db\_system=elasticsearch db\_cluster=\* \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| parse regex "\\[(?\<date\>[^\\]]+)\\]\\[(?\<process\_id\>[^\\]]+)\\]\\[(?\<module\>[^\\]]+)\\].\*(?\<pause\_young\_1\>\\s\\d+)M-\>(?\<pause\_young\_2\>\\d+)M\\((?\<total\_size\>\\d+)M\\)\\s(?\<time\>\\d+.\\d+)ms"<br />\| count(precess\_id) as Total\_Young\_Pause, sum(time) as Total\_Pause\_Time<br />//\| (Total\_Pause\_Time/Total\_Young\_Pause)/(1000\*60) as Avg\_Pause\_Time<br />\| fields Total\_Pause\_Time|
|Elasticsearch/Logs|Total Time GC Causes (Seconds)|Logs|Elasticsearch/Logs/Elasticsearch - Garbage Collection|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as mesg<br />\| parse regex field=mesg "\\[(?\<date\>[^\\]]+)\\]\\[(?\<process\_id\>[^\\]]+)\\]\\[(?\<module\>[^\\]]+)\\].\*\\s+GC\\((?\<gc\_id\>\\d+)\\)\\s+Pause\\s+Young\\s+\\((?\<Cause\>[^\\]]+)\\)\\s+(?\<HeapBfrGC\>\\d+)M-\>(?\<HeapAftrGC\>\\d+)M\\((?\<HeapSize\>\\d+)M\\)\\s+(?\<GCOperationTime\>[\\d.]+)ms" nodrop<br />\| parse regex field=mesg "\\[(?\<date\>[^\\]]+)\\]\\[(?\<process\_id\>[^\\]]+)\\]\\[(?\<module\>[^\\]]+)\\].\*\\s+GC\\((?\<gc\_id\>\\d+)\\)\\s+Pause\\s+Young\\s+\\((?\<Cause\_Status\>[^\\]]+)\\)\\s+\\((?\<Cause\>[^\\]]+)\\)\\s+(?\<HeapBfrGC\>\\d+)M-\>(?\<HeapAftrGC\>\\d+)M\\((?\<HeapSize\>\\d+)M\\)\\s+(?\<GCOperationTime\>[\\d.]+)ms"<br />\| sum(GCOperationTime) as GCOperationTime by Cause<br />\| GCOperationTime\*0.001 as GCOperationTime|
|Elasticsearch/Metrics|Total Translog Operations|Metrics|Elasticsearch/Metrics/Elasticsearch - Performance Stats|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_translog\_operations db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster,host|
|Elasticsearch/Metrics|Total Translog Size (MB)|Metrics|Elasticsearch/Metrics/Elasticsearch - Performance Stats|db\_cluster=\* metric=elasticsearch\_indices\_stats\_total\_translog\_size\_in\_bytes db\_cluster={{db\_cluster}} host={{host}} \| sum by db\_cluster,host \| eval \_value/1024/1024|
|Elasticsearch/Logs|Total Young Pause Time|Logs|Elasticsearch/Logs/Elasticsearch - Garbage Collection|db\_cluster=\* db\_system=elasticsearch db\_cluster=\* \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| parse regex "\\[(?\<date\>[^\\]]+)\\]\\[(?\<process\_id\>[^\\]]+)\\]\\[(?\<module\>[^\\]]+)\\].\*(?\<pause\_young\_1\>\\s\\d+)M-\>(?\<pause\_young\_2\>\\d+)M\\((?\<total\_size\>\\d+)M\\)\\s(?\<time\>\\d+.\\d+)ms"<br />\| count(precess\_id) as Total\_Young\_Pause, sum(time) as Total\_Pause\_Time<br />//\| (Total\_Pause\_Time/Total\_Young\_Pause)/(1000\*60) as Avg\_Pause\_Time<br />\| fields Total\_Young\_Pause|
|Elasticsearch|Unassigned Shards|Metrics|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* metric=elasticsearch\_cluster\_health\_unassigned\_shards  db\_cluster={{db\_cluster}} \| sum by metric|
|Elasticsearch/Logs|Unexpected Error Indexing|Logs|Elasticsearch/Logs/Elasticsearch - Operations|db\_cluster=\* db\_system=elasticsearch "WARN" \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "WARN" and message matches "\*unexpected error while indexing monitoring document\*"<br />\| timeslice 15m<br />\| count as count by \_timeslice|
|Elasticsearch/Logs|Update Mapping Over Time|Logs|Elasticsearch/Logs/Elasticsearch - Operations|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "INFO" and message matches "\*update\_mapping\*"<br />\| timeslice 15m<br />\| count as count by \_timeslice|
|Elasticsearch/Logs|Updating Replicas Over Time|Logs|Elasticsearch/Logs/Elasticsearch - Operations|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "INFO" and message matches "\*updating number\_of\_replicas\*"<br />\| timeslice 15m<br />\| count as count by \_timeslice|
|Elasticsearch/Logs|Warning Logs By Component|Logs|Elasticsearch/Logs/Elasticsearch - Errors And Warnings|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} WARN \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "WARN"<br />\| count by component|
|Elasticsearch|Warning Logs by Component|Logs|Elasticsearch/Elasticsearch - Overview|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "WARN"<br />\| count by component|
|Elasticsearch/Logs|Warning Summary - Daily|Logs|Elasticsearch/Logs/Elasticsearch - Errors And Warnings|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} WARN \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "WARN"<br />\| count by timestamp, level, component, message<br />\| fields - \_count|
|Elasticsearch/Logs|Warning Usage Disk|Logs|Elasticsearch/Logs/Elasticsearch - Operations|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} "low disk watermark" \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "INFO" and message matches "\*low disk watermark\*"<br />\| parse regex field=message "low disk watermark \\[(?\<Disk\_Usage\>[\\S]+)\\]"<br />\| if (isEmpty(pod),\_sourceHost,pod) as host<br />\| count by timestamp,host,Disk\_Usage<br />\| fields - \_count|
|Elasticsearch/Logs|Warnings|Logs|Elasticsearch/Logs/Elasticsearch - Errors And Warnings|db\_cluster=\* db\_system=elasticsearch db\_cluster={{db\_cluster}} WARN \| json "log" as \_rawlog nodrop <br />\| if (isEmpty(\_rawlog), \_raw, \_rawlog) as \_raw<br />\| json field=\_raw "timestamp" as timestamp<br />\| json field=\_raw "level" as level<br />\| json field=\_raw "component" as component<br />\| json field=\_raw "message" as message<br />\| where level = "WARN"<br />\| count|

