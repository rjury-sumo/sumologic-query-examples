# Azure Event Grid

## Searches

### Log Searches

- **Authentication Types**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Overview 
- **Delivery and Publish Failures Trend by Topic**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Overview 
- **Distribution  by Operation Type (Read, Write and Delete)**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Administrative Operations 
- **Distribution by Operations**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Administrative Operations 
- **Distribution by Status**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Administrative Operations 
- **Failed Policy Events**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Policy and Recommendations 
- **Recent Delete Operations**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Administrative Operations 
- **Recent Recommendation Events**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Policy and Recommendations 
- **Recent Write Operations**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Administrative Operations 
- **Requests by Location**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Overview 
- **Requests by Network Access Type**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Overview 
- **Requests by Operation Status**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Overview 
- **Top 10 Failed Delivery Destinations**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Errors 
- **Top 10 Failed Topics**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Errors 
- **Top 10 Operations That Caused The Most Errors**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Administrative Operations 
- **Top 3 Delivery Failures by Event Subscription**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Errors 
- **Top 3 Publish Failures by Topic**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Errors 
- **Total Failed Policy Events**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Policy and Recommendations 
- **Total Recommendation Events**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Policy and Recommendations 
- **Total Success Policy Events**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Policy and Recommendations 
- **Total Success Policy Events**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Policy and Recommendations 
- **Users / Applications by Operation Type**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Administrative Operations

### Metric Searches

- **Advanced Filter Evaluation Count**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Operations 
- **Average Destination Processing Duration(ms)**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Operations 
- **Average Destination Processing Duration(ms)**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Overview 
- **Dead Lettered Count by Error**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Errors 
- **Dead Lettered Count by Error**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Errors 
- **Delivery Attempt Fail Count by Error**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Errors 
- **Delivery Attempt Fail Count by Error**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Overview 
- **Delivery Attempt Fail Count by Error**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Errors 
- **Delivery Failure Percentage**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Operations 
- **Dropped Event Count by Reason**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Errors 
- **Dropped Event Count by Reason**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Errors 
- **Publish Fail Count by Error**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Errors 
- **Publish Fail Count by Error**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Errors 
- **Publish Fail Count by Error**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Overview 
- **Publish Failure Percentage**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Operations 
- **Publish Success Latency(ms)**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Overview 
- **Publish Success Latency(ms)**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Operations 
- **UnMatched Event Percentage**: from Dashboard: Installed Apps/Azure Event Grid/Azure Event Grid - Operations

## Search Table

|app\_topic|search\_name|type|origin|search|
|:--|:--|:--|:--|:--|
|Azure Event Grid|Advanced Filter Evaluation Count|Metrics|Installed Apps/Azure Event Grid/Azure Event Grid - Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />metric=AdvancedFilterEvaluationCount statistic=total \| quantize using sum \| sum by resource\_group, resource\_name, eventsubscriptionname|
|Azure Event Grid|Authentication Types|Logs|Installed Apps/Azure Event Grid/Azure Event Grid - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} DataPlaneRequests<br />\| json "category", "properties.aggregatedRequests[\*]" as category, events<br />\| parse regex field=events "(?\<request\_info\>\\{(?:[^\\{\\}]\|\\{[^\\{\\}]\*\\})\*\\})" multi<br />\| where category="DataPlaneRequests"<br />\| json field=request\_info "authentication.type", "totalOperations" as type, totalOperations<br />\| sum(totalOperations) by type<br />\| sort by \_sum asc, type asc|
|Azure Event Grid|Average Destination Processing Duration(ms)|Metrics|Installed Apps/Azure Event Grid/Azure Event Grid - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />metric=DestinationProcessingDurationInMs statistic=average \| quantize using avg \| avg by resource\_group, resource\_name, EventSubscriptionName|
|Azure Event Grid|Average Destination Processing Duration(ms)|Metrics|Installed Apps/Azure Event Grid/Azure Event Grid - Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />metric=DestinationProcessingDurationInMs statistic=average \| quantize using avg \| avg by resource\_group, resource\_name, EventSubscriptionName|
|Azure Event Grid|Dead Lettered Count by Error|Metrics|Installed Apps/Azure Event Grid/Azure Event Grid - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />metric=DeadLetteredCount statistic=count \| quantize using sum \| sum by resource\_group, resource\_name, deadletterreason|
|Azure Event Grid|Dead Lettered Count by Error|Metrics|Installed Apps/Azure Event Grid/Azure Event Grid - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />metric=DeadLetteredCount statistic=count \| quantize using sum \| sum by resource\_group, resource\_name, deadletterreason|
|Azure Event Grid|Delivery and Publish Failures Trend by Topic|Logs|Installed Apps/Azure Event Grid/Azure Event Grid - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} PublishFailures<br />\| json "category" as category<br />\| where category="PublishFailures" or category = "DeliveryFailures"<br />\| timeslice 10m<br />\| count by resource\_name, \_timeslice<br />\| transpose row \_timeslice column resource\_name|
|Azure Event Grid|Delivery Attempt Fail Count by Error|Metrics|Installed Apps/Azure Event Grid/Azure Event Grid - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />metric=DeliveryAttemptFailCount statistic=count \| quantize using sum \| sum by resource\_group, resource\_name, error|
|Azure Event Grid|Delivery Attempt Fail Count by Error|Metrics|Installed Apps/Azure Event Grid/Azure Event Grid - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />metric=DeliveryAttemptFailCount statistic=count \| quantize using sum \| sum by error|
|Azure Event Grid|Delivery Attempt Fail Count by Error|Metrics|Installed Apps/Azure Event Grid/Azure Event Grid - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />metric=DeliveryAttemptFailCount statistic=count \| quantize using sum \| sum by resource\_group, resource\_name, error|
|Azure Event Grid|Delivery Failure Percentage|Metrics|Installed Apps/Azure Event Grid/Azure Event Grid - Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />metric=DeliverySuccessCount statistic=total \| quantize using sum \| sum by resource\_group , resource\_name |
|Azure Event Grid|Distribution  by Operation Type (Read, Write and Delete)|Logs|Installed Apps/Azure Event Grid/Azure Event Grid - Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} provider\_name={{provider\_name}} resource\_type={{resource\_type}} Administrative <br />\| json "resultType", "category", "operationName", "resourceId" as resultType, category, operationName, resourceid<br />\| where (resultType="Accept" or resultType="Success") and category="Administrative"<br />\| "OTHERS" as operationType<br />\| if (toUppercase(operationName) matches /WRITE/, "WRITE", operationType) as operationType <br />\| if (toUppercase(operationName) matches /READ/, "READ", operationType) as operationType <br />\| if (toUppercase(operationName) matches /DELETE/, "DELETE", operationType) as operationType <br />\| count by operationType<br />\| sort by \_count, operationType asc|
|Azure Event Grid|Distribution by Operations|Logs|Installed Apps/Azure Event Grid/Azure Event Grid - Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} provider\_name={{provider\_name}} resource\_type={{resource\_type}} Administrative <br />\| json "resultType", "category", "operationName", "resourceId" as resultType, category, operationName, resourceid<br />\| where (resultType="Accept" or resultType="Success") and category="Administrative" <br />\| parse field=operationName "\*/\*/\*" as provider\_name, resource\_type, operation\_name<br />\| count by operation\_name<br />\| order by \_count, operation\_name asc|
|Azure Event Grid|Distribution by Status|Logs|Installed Apps/Azure Event Grid/Azure Event Grid - Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} provider\_name={{provider\_name}} resource\_type={{resource\_type}} Administrative <br />\| json "resultType", "category" as resultType, category<br />\| where category="Administrative" <br />\| count by resultType<br />\| order by \_count, resultType asc|
|Azure Event Grid|Dropped Event Count by Reason|Metrics|Installed Apps/Azure Event Grid/Azure Event Grid - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />metric=DroppedEventCount statistic=count \| quantize using sum \| sum by resource\_group, resource\_name, dropreason|
|Azure Event Grid|Dropped Event Count by Reason|Metrics|Installed Apps/Azure Event Grid/Azure Event Grid - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />metric=DroppedEventCount statistic=count \| quantize using sum \| sum by resource\_group, resource\_name, dropreason|
|Azure Event Grid|Failed Policy Events|Logs|Installed Apps/Azure Event Grid/Azure Event Grid - Policy and Recommendations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Policy Failure<br />\| JSON "category", "resultType", "properties.message", "properties.resourceLocation", "properties.entity", "properties.policies" as category, resultType, message, resourceLocation, entity, policies<br />\| where category="Policy" and resultType="Failure"<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count as Count by time, level, resultType, providers, resource\_group, resource\_name, location, policies|
|Azure Event Grid|Publish Fail Count by Error|Metrics|Installed Apps/Azure Event Grid/Azure Event Grid - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />metric=PublishFailCount statistic=count \| quantize using sum \| sum by resource\_group,resource\_name, error|
|Azure Event Grid|Publish Fail Count by Error|Metrics|Installed Apps/Azure Event Grid/Azure Event Grid - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />metric=PublishFailCount statistic=count \| quantize using sum \| sum by resource\_group, resource\_name, error|
|Azure Event Grid|Publish Fail Count by Error|Metrics|Installed Apps/Azure Event Grid/Azure Event Grid - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />metric=PublishFailCount statistic=count \| quantize using sum \| sum by resource\_group,resource\_name, error|
|Azure Event Grid|Publish Failure Percentage|Metrics|Installed Apps/Azure Event Grid/Azure Event Grid - Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />metric=PublishSuccessCount statistic=total \| quantize using sum \| sum by resource\_group , resource\_name |
|Azure Event Grid|Publish Success Latency(ms)|Metrics|Installed Apps/Azure Event Grid/Azure Event Grid - Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />metric=PublishSuccessLatencyInMs statistic=average \| quantize using avg \| avg by resource\_group, resource\_name|
|Azure Event Grid|Publish Success Latency(ms)|Metrics|Installed Apps/Azure Event Grid/Azure Event Grid - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />metric=PublishSuccessLatencyInMs statistic=average \| quantize using avg \| avg by resource\_group, resource\_name|
|Azure Event Grid|Recent Delete Operations|Logs|Installed Apps/Azure Event Grid/Azure Event Grid - Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name = {{resource\_name}} provider\_name={{provider\_name}} resource\_type={{resource\_type}}  Administrative <br />\| JSON "properties.statusCode", "properties.message", "resultType", "category", "operationName", "callerIpAddress", "resultSignature", "level", "identity.claims.idtyp", "identity.claims.name", "identity.claims.appid", "properties.entity", "\$['identity']['claims']['http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name']","\$['identity']['claims']['http://schemas.microsoft.com/claims/authnmethodsreferences']" as statusCode, message, resultType, category, operationName, callerIpAddress, resultSignature, level, idtyp, name, appid, entity, identity\_claims\_name, authmethods nodrop<br />\| where resultType in ("Accept", "Success") and category="Administrative" and toUppercase(operationName) matches /DELETE/ <br />\| if (idtyp =="user", name, appid) as name<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count by \_messageTime, time, resource\_name, callerIpAddress, name, identity\_claims\_name, authmethods, resultSignature, statusCode, message, entity<br />\| sort by \_messageTime desc<br />\| limit 20 <br />\| fields -\_count,\_messageTime|
|Azure Event Grid|Recent Recommendation Events|Logs|Installed Apps/Azure Event Grid/Azure Event Grid - Policy and Recommendations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Recommendation<br />\| JSON "category", "operationName", "resultType", "properties.recommendationName", "properties.recommendationCategory", "properties.recommendationImpact", "properties.recommendationResourceLink" as category, operationName, resultType, recommendationName, recommendationCategory, recommendationImpact, recommendationResourceLink <br />\| where category="Recommendation"<br />\| parse field=operationName "\*/\*/\*/\*" as provider, category, operation\_name, action nodrop<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count as Count by time, operation\_name, resource\_name, resultType, recommendationName, recommendationCategory, recommendationImpact, recommendationResourceLink|
|Azure Event Grid|Recent Write Operations|Logs|Installed Apps/Azure Event Grid/Azure Event Grid - Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name = {{resource\_name}} provider\_name={{provider\_name}} resource\_type={{resource\_type}}  Administrative <br />\| JSON "properties.statusCode", "properties.message", "resultType", "category", "operationName", "callerIpAddress", "resultSignature", "level", "identity.claims.idtyp", "identity.claims.name", "identity.claims.appid", "\$['identity']['claims']['http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name']","\$['identity']['claims']['http://schemas.microsoft.com/claims/authnmethodsreferences']"  as statusCode, message, resultType, category, operationName, callerIpAddress, resultSignature, level, idtyp, name, appid, identity\_claims\_name, authmethods nodrop<br />\| where category="Administrative" and resultType in ("Accept", "Success") and toUppercase(operationName) matches /WRITE/<br />\| if (idtyp =="user", name, appid) as name<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count by \_messageTime, time, resource\_name, callerIpAddress, name, identity\_claims\_name, authmethods, resultSignature, statusCode, message<br />\| sort by \_messageTime desc<br />\| limit 20 <br />\| fields -\_count,\_messageTime|
|Azure Event Grid|Requests by Location|Logs|Installed Apps/Azure Event Grid/Azure Event Grid - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} DataPlaneRequests<br />\| json "category", "properties.aggregatedRequests[\*]" as category, events<br />\| parse regex field=events "(?\<request\_info\>\\{(?:[^\\{\\}]\|\\{[^\\{\\}]\*\\})\*\\})" multi<br />\| where category="DataPlaneRequests"<br />\| json field=request\_info "clientIpAddress", "totalOperations" as clientIpAddress, totalOperations<br />\| sum(totalOperations) by clientIpAddress<br />\| lookup latitude, longitude from geo://location on ip = clientIpAddress<br />\| where !isNull(latitude)<br />\| sum(\_sum) as count by latitude, longitude|
|Azure Event Grid|Requests by Network Access Type|Logs|Installed Apps/Azure Event Grid/Azure Event Grid - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} DataPlaneRequests<br />\| json "category", "properties.aggregatedRequests[\*]" as category, events<br />\| parse regex field=events "(?\<request\_info\>\\{(?:[^\\{\\}]\|\\{[^\\{\\}]\*\\})\*\\})" multi<br />\| where category="DataPlaneRequests"<br />\| json field=request\_info "networkAccess", "totalOperations" as networkAccess, totalOperations<br />\| sum(totalOperations) by networkAccess<br />\| sort by \_sum asc, networkAccess asc|
|Azure Event Grid|Requests by Operation Status|Logs|Installed Apps/Azure Event Grid/Azure Event Grid - Overview|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} DataPlaneRequests<br />\| json "category", "properties.aggregatedRequests[\*]" as category, events<br />\| parse regex field=events "(?\<request\_info\>\\{(?:[^\\{\\}]\|\\{[^\\{\\}]\*\\})\*\\})" multi<br />\| where category="DataPlaneRequests"<br />\| json field=request\_info "operationResult", "totalOperations" as operationResult, totalOperations<br />\| sum(totalOperations) by operationResult<br />\| sort by \_sum asc, operationResult asc|
|Azure Event Grid|Top 10 Failed Delivery Destinations|Logs|Installed Apps/Azure Event Grid/Azure Event Grid - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} DeliveryFailures<br />\| json "category", "message" as category, message<br />\| where category="DeliveryFailures"<br />\| parse field=message "urlPath=\*," as url\_path<br />\| count by url\_path<br />\| top 10 url\_path by \_count|
|Azure Event Grid|Top 10 Failed Topics|Logs|Installed Apps/Azure Event Grid/Azure Event Grid - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} (DeliveryFailures or PublishFailures)<br />\| json "category", "eventSubscriptionName" as category, eventSubscriptionName<br />\| where category="DeliveryFailures" or category="PublishFailures"<br />\| count by resource\_group, resource\_name<br />\| top 10 resource\_group, resource\_name by \_count|
|Azure Event Grid|Top 10 Operations That Caused The Most Errors|Logs|Installed Apps/Azure Event Grid/Azure Event Grid - Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name = {{resource\_name}} provider\_name={{provider\_name}} resource\_type={{resource\_type}}  Administrative<br />\| json "resultType", "operationName", "properties.statusMessage", "category"  as resultType, operationName, failureMessage, category nodrop<br />\| parse field=operationname "\*/\*/\*" as provider\_name, resource\_type, operation nodrop<br />\| where category="Administrative" and (resultType="Failure" or resultType="Unknown")<br />\| if (isBlank(failureMessage), "Unknown Error", failureMessage) as failureMessage<br />\| count as Count by resource\_name, operation, failureMessage<br />\| order by Count <br />\| limit 10|
|Azure Event Grid|Top 3 Delivery Failures by Event Subscription|Logs|Installed Apps/Azure Event Grid/Azure Event Grid - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}} DeliveryFailures<br />\| json "category", "eventSubscriptionName","message" as category, eventSubscriptionName, message<br />\| where category="DeliveryFailures"<br />\| parse field=message "Status:\*ErrorCode" as status<br />\| count as Count by resource\_group, resource\_name, eventSubscriptionName, status<br />\| topk(3, Count) by resource\_group, resource\_name, eventSubscriptionName|
|Azure Event Grid|Top 3 Publish Failures by Topic|Logs|Installed Apps/Azure Event Grid/Azure Event Grid - Errors|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />\| json "category", "message" as category, message<br />\| where category="PublishFailures"<br />\| parse field=message "errorMessage=\*" as error\_message<br />\| count as Count by resource\_group,resource\_name, error\_message<br />\| topk(3, Count) by resource\_group,resource\_name|
|Azure Event Grid|Total Failed Policy Events|Logs|Installed Apps/Azure Event Grid/Azure Event Grid - Policy and Recommendations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} location={{location}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Policy Failure<br />\| JSON "category", "resultType" as category, resultType<br />\| where category="Policy" and resultType="Failure"<br />\| count as Count|
|Azure Event Grid|Total Recommendation Events|Logs|Installed Apps/Azure Event Grid/Azure Event Grid - Policy and Recommendations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Recommendation<br />\| JSON "category"<br />\| where category="Recommendation"<br />\| count |
|Azure Event Grid|Total Success Policy Events|Logs|Installed Apps/Azure Event Grid/Azure Event Grid - Policy and Recommendations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} location={{location}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Policy Success<br />\| JSON "category", "resultType", "properties.message", "properties.resourceLocation", "properties.entity", "properties.policies" as category, resultType, message, resourceLocation, entity, policies<br />\| parse field=entity "/subscriptions/\*/resourceGroups/\*/providers/\*/\*/\*" as subscription\_id, resource\_group, providers, virtualMachineScaleSets, aks nodrop<br />\| where category="Policy" and (resultType="Success" or resultType="Accept")<br />\| formatDate(\_messageTime, "MM/dd/yyyy HH:mm:ss") as time<br />\| count as Count by time, level, resultType, resource\_group, resource\_name, location, policies|
|Azure Event Grid|Total Success Policy Events|Logs|Installed Apps/Azure Event Grid/Azure Event Grid - Policy and Recommendations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} location={{location}} resource\_group={{resource\_group}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} resource\_name={{resource\_name}} Policy <br />\| JSON "category", "resultType" as category, resultType<br />\| where category="Policy" and (resultType="Success" or resultType="Accept")<br />\| count as Count|
|Azure Event Grid|UnMatched Event Percentage|Metrics|Installed Apps/Azure Event Grid/Azure Event Grid - Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group={{resource\_group}} resource\_name={{resource\_name}} resource\_type={{resource\_type}} provider\_name={{provider\_name}} location={{location}}<br />metric=MatchedEventCount statistic=total \| quantize using sum \| sum by resource\_group, resource\_name|
|Azure Event Grid|Users / Applications by Operation Type|Logs|Installed Apps/Azure Event Grid/Azure Event Grid - Administrative Operations|tenant\_name={{tenant\_name}} subscription\_id={{subscription\_id}} resource\_group = {{resource\_group}} resource\_name={{resource\_name}} provider\_name={{provider\_name}} resource\_type={{resource\_type}} Administrative <br />\| JSON "properties.statusCode", "properties.message", "resultType", "category", "operationName", "callerIpAddress", "resultSignature", "level", "identity.claims.idtyp", "identity.claims.name", "identity.claims.appid" as statusCode, message, resultType, category, operationName, callerIpAddress, resultSignature, level, idtyp, name, appid nodrop<br />\| where resultType in ("Accept", "Success") and category="Administrative" <br />\| if (idtyp =="user", name, appid) as name<br />\| "Others" as operationType<br />\| if (toUppercase(operationName) matches /WRITE/, "WRITE", operationType) as operationType <br />\| if (toUppercase(operationName) matches /READ/, "READ", operationType) as operationType <br />\| if (toUppercase(operationName) matches /DELETE/, "DELETE", operationType) as operationType <br />\| count by name, operationType<br />\| transpose row name column operationType|

